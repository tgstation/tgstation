<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>code/__DEFINES/dcs/declarations.dm - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="code/__DEFINES/dcs/declarations.html#define">Define Details</a></header><main><h1>code/__DEFINES/dcs/declarations.dm <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm"></a></h1><table class="summary" cellspacing="0"><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_INCOMPATIBLE">COMPONENT_INCOMPATIBLE</a></th><td>Return this from <code>/datum/component/Initialize</code> or <code>/datum/component/OnTransfer</code> or <code>/datum/component/on_source_add</code> to have the component be deleted if it's applied to an incorrect type.
<code>parent</code> must not be modified if this is to be returned.
This will be noted in the runtime logs</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_NOTRANSFER">COMPONENT_NOTRANSFER</a></th><td>Returned in PostTransfer to prevent transfer, similar to <code>COMPONENT_INCOMPATIBLE</code></td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_REDUNDANT">COMPONENT_REDUNDANT</a></th><td>Deletes the component silently. This is for valid, non-error cases where you still want to execute some of the component's logic.</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/ELEMENT_INCOMPATIBLE">ELEMENT_INCOMPATIBLE</a></th><td>Return value to cancel attaching</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/ELEMENT_DETACH_ON_HOST_DESTROY">ELEMENT_DETACH_ON_HOST_DESTROY</a></th><td>Causes the detach proc to be called when the host object is being deleted.
Should only be used if you need to perform cleanup not related to the host object.
You do not need this if you are only unregistering signals, for instance.
You would need it if you are doing something like removing the target from a processing list.</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/ELEMENT_BESPOKE">ELEMENT_BESPOKE</a></th><td>Only elements created with the same arguments given after <code>argument_hash_start_idx</code> share an element instance
The arguments are the same when the text and number values are the same and all other values have the same ref</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/ELEMENT_COMPLEX_DETACH">ELEMENT_COMPLEX_DETACH</a></th><td>Causes all detach arguments to be passed to detach instead of only being used to identify the element
When this is used your Detach proc should have the same signature as your Attach proc</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/ELEMENT_DONT_SORT_LIST_ARGS">ELEMENT_DONT_SORT_LIST_ARGS</a></th><td>Elements with this flag will have their datum lists arguments compared as is,
without the contents being sorted alpha-numerically first.
This is good for those elements where the position of the keys matter, like in the case of color matrices.</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/ELEMENT_NO_LIST_UNIT_TEST">ELEMENT_NO_LIST_UNIT_TEST</a></th><td>Elements with this flag will be ignored by the dcs_check_list_arguments test.
A good example is connect_loc, for which it's practically undoable unless we force every signal proc to have a different name.</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_DUPE_HIGHLANDER">COMPONENT_DUPE_HIGHLANDER</a></th><td>old component is deleted (default)</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_DUPE_ALLOWED">COMPONENT_DUPE_ALLOWED</a></th><td>duplicates allowed</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_DUPE_UNIQUE">COMPONENT_DUPE_UNIQUE</a></th><td>new component is deleted</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_DUPE_SOURCES">COMPONENT_DUPE_SOURCES</a></th><td>Component uses source tracking to manage adding and removal logic.
Add a source/spawn to/the component by using AddComponentFrom(source, component_type, args...)
Removing the last source will automatically remove the component from the parent.
Arguments will be passed to on_source_add(source, args...); ensure that Initialize and on_source_add have the same signature.</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_DUPE_UNIQUE_PASSARGS">COMPONENT_DUPE_UNIQUE_PASSARGS</a></th><td>old component is given the initialization args of the new</td></tr><tr><th><a href="code/__DEFINES/dcs/declarations.html#define/COMPONENT_DUPE_SELECTIVE">COMPONENT_DUPE_SELECTIVE</a></th><td>each component of the same type is consulted as to whether the duplicate should be allowed</td></tr></table><h2 id="define">Define Details</h2><h3 id="define/COMPONENT_DUPE_ALLOWED"><aside class="declaration">#define </aside>COMPONENT_DUPE_ALLOWED <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L43"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 43"></a></h3><p>duplicates allowed</p><h3 id="define/COMPONENT_DUPE_HIGHLANDER"><aside class="declaration">#define </aside>COMPONENT_DUPE_HIGHLANDER <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L41"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 41"></a></h3><p>old component is deleted (default)</p><h3 id="define/COMPONENT_DUPE_SELECTIVE"><aside class="declaration">#define </aside>COMPONENT_DUPE_SELECTIVE <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L56"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 56"></a></h3><p>each component of the same type is consulted as to whether the duplicate should be allowed</p><h3 id="define/COMPONENT_DUPE_SOURCES"><aside class="declaration">#define </aside>COMPONENT_DUPE_SOURCES <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L52"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 52"></a></h3><p>Component uses source tracking to manage adding and removal logic.
Add a source/spawn to/the component by using AddComponentFrom(source, component_type, args...)
Removing the last source will automatically remove the component from the parent.
Arguments will be passed to on_source_add(source, args...); ensure that Initialize and on_source_add have the same signature.</p><h3 id="define/COMPONENT_DUPE_UNIQUE"><aside class="declaration">#define </aside>COMPONENT_DUPE_UNIQUE <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L45"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 45"></a></h3><p>new component is deleted</p><h3 id="define/COMPONENT_DUPE_UNIQUE_PASSARGS"><aside class="declaration">#define </aside>COMPONENT_DUPE_UNIQUE_PASSARGS <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L54"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 54"></a></h3><p>old component is given the initialization args of the new</p><h3 id="define/COMPONENT_INCOMPATIBLE"><aside class="declaration">#define </aside>COMPONENT_INCOMPATIBLE <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L4"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 4"></a></h3><p>Return this from <code>/datum/component/Initialize</code> or <code>/datum/component/OnTransfer</code> or <code>/datum/component/on_source_add</code> to have the component be deleted if it's applied to an incorrect type.
<code>parent</code> must not be modified if this is to be returned.
This will be noted in the runtime logs</p><h3 id="define/COMPONENT_NOTRANSFER"><aside class="declaration">#define </aside>COMPONENT_NOTRANSFER <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L6"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 6"></a></h3><p>Returned in PostTransfer to prevent transfer, similar to <code>COMPONENT_INCOMPATIBLE</code></p><h3 id="define/COMPONENT_REDUNDANT"><aside class="declaration">#define </aside>COMPONENT_REDUNDANT <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L8"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 8"></a></h3><p>Deletes the component silently. This is for valid, non-error cases where you still want to execute some of the component's logic.</p><h3 id="define/ELEMENT_BESPOKE"><aside class="declaration">#define </aside>ELEMENT_BESPOKE <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L23"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 23"></a></h3><p>Only elements created with the same arguments given after <code>argument_hash_start_idx</code> share an element instance
The arguments are the same when the text and number values are the same and all other values have the same ref</p><h3 id="define/ELEMENT_COMPLEX_DETACH"><aside class="declaration">#define </aside>ELEMENT_COMPLEX_DETACH <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L26"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 26"></a></h3><p>Causes all detach arguments to be passed to detach instead of only being used to identify the element
When this is used your Detach proc should have the same signature as your Attach proc</p><h3 id="define/ELEMENT_DETACH_ON_HOST_DESTROY"><aside class="declaration">#define </aside>ELEMENT_DETACH_ON_HOST_DESTROY <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L18"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 18"></a></h3><p>Causes the detach proc to be called when the host object is being deleted.
Should only be used if you need to perform cleanup not related to the host object.
You do not need this if you are only unregistering signals, for instance.
You would need it if you are doing something like removing the target from a processing list.</p><h3 id="define/ELEMENT_DONT_SORT_LIST_ARGS"><aside class="declaration">#define </aside>ELEMENT_DONT_SORT_LIST_ARGS <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L32"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 32"></a></h3><p>Elements with this flag will have their datum lists arguments compared as is,
without the contents being sorted alpha-numerically first.
This is good for those elements where the position of the keys matter, like in the case of color matrices.</p><h3 id="define/ELEMENT_INCOMPATIBLE"><aside class="declaration">#define </aside>ELEMENT_INCOMPATIBLE <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L11"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 11"></a></h3><p>Return value to cancel attaching</p><h3 id="define/ELEMENT_NO_LIST_UNIT_TEST"><aside class="declaration">#define </aside>ELEMENT_NO_LIST_UNIT_TEST <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__DEFINES/dcs/declarations.dm#L37"><img src="git.png" width="16" height="16" title="code/__DEFINES/dcs/declarations.dm 37"></a></h3><p>Elements with this flag will be ignored by the dcs_check_list_arguments test.
A good example is connect_loc, for which it's practically undoable unless we force every signal proc to have a different name.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>