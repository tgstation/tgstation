<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>code/__HELPERS/construction.dm - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="code/__HELPERS/construction.html#define">Define Details</a></header><main><h1>code/__HELPERS/construction.dm <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/__HELPERS/construction.dm"><img src="git.png" width="16" height="16" title="code/__HELPERS/construction.dm"></a></h1><table class="summary" cellspacing="0"><tr><th><a href="code/__HELPERS/construction.html#define/OPTIMAL_COST">OPTIMAL_COST</a></th><td>Makes sure only integer values are used when consuming, removing &amp; checking for mats</td></tr><tr><th><a href="code/__HELPERS/construction.html#define/GET_MATERIAL_REF">GET_MATERIAL_REF</a></th><td>Wrapper for fetching material references. Exists exclusively so that people don't need to wrap everything in a list every time.</td></tr><tr><th>/proc/<a href="global.html#proc/rcd_result_with_memory">rcd_result_with_memory</a></th><td>Produces a new RCD result from the given one if it can be calculated that
the RCD should speed up with the remembered form.</td></tr><tr><th>/proc/<a href="global.html#proc/amount2sheet">amount2sheet</a></th><td>Turns material amount into the number of sheets, returning FALSE if the number is less than SHEET_MATERIAL_AMOUNT</td></tr><tr><th>/proc/<a href="global.html#proc/sheet2amount">sheet2amount</a></th><td>Turns number of sheets into material amount, returning FALSE if the number is &lt;= 0</td></tr><tr><th>/proc/<a href="global.html#proc/fast_split_stack">fast_split_stack</a></th><td>Splits a stack. we don't use /obj/item/stack/proc/split_stack because Byond complains that should only be called asynchronously.
This proc is also more faster because it doesn't deal with mobs, copying evidences or refreshing atom storages
Has special internal uses for e.g. by the material container &amp; RPED</td></tr><tr><th>/proc/<a href="global.html#proc/split_materials_uniformly">split_materials_uniformly</a></th><td>divides a list of materials uniformly among all contents of the target_object recursively
Used to set materials of printed items with their design cost by taking into consideration their already existing materials
e.g. if 12 iron is to be divided uniformly among 2 objects A, B who's current iron contents are 3 &amp; 7
Then first we normalize those values i.e. find their weights to decide who gets an higher share of iron
total_sum = 3 + 7 = 10, A = 3/10 = 0.3, B = 7/10 = 0.7
Then we finally multiply those weights with the user value of 12 we get
A = 0.3 * 12 = 3.6, B = 0.7 * 12 = 8.4 i.e. 3.6 + 8.4 = 12!!
Off course we round the values so we don't have to deal with floating point materials so the actual value
ends being less but that's not an issue
Arguments</td></tr></table><h2 id="define">Define Details</h2><h3 id="define/GET_MATERIAL_REF"><aside class="declaration">#define </aside>GET_MATERIAL_REF<aside>(arguments ...)</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/__HELPERS/construction.dm#L5"><img src="git.png" width="16" height="16" title="code/__HELPERS/construction.dm 5"></a></h3><p>Wrapper for fetching material references. Exists exclusively so that people don't need to wrap everything in a list every time.</p><h3 id="define/OPTIMAL_COST"><aside class="declaration">#define </aside>OPTIMAL_COST<aside>(cost)</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/__HELPERS/construction.dm#L2"><img src="git.png" width="16" height="16" title="code/__HELPERS/construction.dm 2"></a></h3><p>Makes sure only integer values are used when consuming, removing &amp; checking for mats</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>