<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>code/__HELPERS/icons.dm - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a></header><main><h1>code/__HELPERS/icons.dm <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/__HELPERS/icons.dm"><img src="git.png" width="16" height="16" title="code/__HELPERS/icons.dm"></a></h1><table class="summary" cellspacing="0"><tr><th>/proc/<a href="global.html#proc/rgb2hsv">rgb2hsv</a></th><td>Converts an rgb color into a list storing hsva
Exists because it's useful to have a guaranteed alpha value</td></tr><tr><th>/proc/<a href="global.html#proc/hsv2rgb">hsv2rgb</a></th><td>Converts a list storing hsva into an rgb color</td></tr><tr><th>/proc/<a href="global.html#proc/getFlatIcon">getFlatIcon</a></th><td>Create a single <a href="https://www.byond.com/docs/ref/#/icon" title="/icon">/icon</a> from a given <a href="atom.html" title="/atom">/atom</a> or <a href="image.html" title="/image">/image</a>.</td></tr><tr><th>/proc/<a href="global.html#proc/generate_icon_alpha_mask">generate_icon_alpha_mask</a></th><td>Helper proc to generate a cutout alpha mask out of an icon.</td></tr><tr><th>/proc/<a href="global.html#proc/get_flat_human_icon">get_flat_human_icon</a></th><td></td></tr><tr><th>/proc/<a href="global.html#proc/get_flat_existing_human_icon">get_flat_existing_human_icon</a></th><td>A simpler version of get_flat_human_icon() that uses an existing human as a base to create the icon.
Does not feature caching yet, since I could not think of a good way to cache them without having a possibility
of using the cached version when we don't want to, so only use this proc if you just need this flat icon
generated once and handle the caching yourself if you need to access that icon multiple times, or
refactor this proc to feature caching of icons.</td></tr><tr><th>/proc/<a href="global.html#proc/generate_and_hash_rsc_file">generate_and_hash_rsc_file</a></th><td>generates a filename for a given asset.
like generate_asset_name(), except returns the rsc reference and the rsc file hash as well as the asset name (sans extension)
used so that certain asset files don't have to be hashed twice</td></tr><tr><th>/proc/<a href="global.html#proc/generate_asset_name">generate_asset_name</a></th><td>Generate a filename for this asset
The same asset will always lead to the same asset name
(Generated names do not include file extention.)</td></tr><tr><th>/proc/<a href="global.html#proc/get_dummy_savefile">get_dummy_savefile</a></th><td>Gets a dummy savefile for usage in icon generation.
Savefiles generated from this proc will be empty.</td></tr><tr><th>/proc/<a href="global.html#proc/icon2base64">icon2base64</a></th><td>Converts an icon to base64. Operates by putting the icon in the iconCache savefile,
exporting it as text, and then parsing the base64 from that.
(This relies on byond automatically storing icons in savefiles as base64)</td></tr><tr><th>/proc/<a href="global.html#proc/is_valid_dmi_file">is_valid_dmi_file</a></th><td>given a text string, returns whether it is a valid dmi icons folder path</td></tr><tr><th>/proc/<a href="global.html#proc/get_icon_dmi_path">get_icon_dmi_path</a></th><td>given an icon object, dmi file path, or atom/image/mutable_appearance, attempts to find and return an associated dmi file path.
a weird quirk about dm is that /icon objects represent both compile-time or dynamic icons in the rsc,
but stringifying rsc references returns a dmi file path
ONLY if that icon represents a completely unchanged dmi file from when the game was compiled.
so if the given object is associated with an icon that was in the rsc when the game was compiled, this returns a path. otherwise it returns &quot;&quot;</td></tr><tr><th>/proc/<a href="global.html#proc/icon2html">icon2html</a></th><td>generate an asset for the given icon or the icon of the given appearance for [thing], and send it to any clients in target.
Arguments:</td></tr><tr><th>/proc/<a href="global.html#proc/center_image">center_image</a></th><td>Center's an image. Only run this on float overlays and not physical
Requires:
The Image
The x dimension of the icon file used in the image
The y dimension of the icon file used in the image
eg: center_image(image_to_center, 32,32)
eg2: center_image(image_to_center, 96,96)</td></tr><tr><th>/proc/<a href="global.html#proc/icon_metadata">icon_metadata</a></th><td>Returns rustg-parsed metadata for an icon, universal icon, or DMI file, using cached values where possible
Returns null if passed object is not a filepath or icon with a valid DMI file</td></tr><tr><th>/proc/<a href="global.html#proc/icon_exists">icon_exists</a></th><td>Checks whether a given icon state exists in a given icon file. If <code>file</code> and <code>state</code> both exist,
this will return <code>TRUE</code> - otherwise, it will return <code>FALSE</code>.</td></tr><tr><th>/proc/<a href="global.html#proc/icon_states_fast">icon_states_fast</a></th><td>Cached, rustg-based alternative to icon_states()</td></tr><tr><th>/proc/<a href="global.html#proc/icon_exists_or_scream">icon_exists_or_scream</a></th><td>Functions the same as <code>/proc/icon_exists()</code>, but with the addition of a stack trace if the
specified file or state doesn't exist.</td></tr><tr><th>/proc/<a href="global.html#proc/get_size_in_tiles">get_size_in_tiles</a></th><td>Returns the size of the sprite in tiles.
Takes the icon size and divides it by the world icon size (default 32).
This gives the size of the sprite in tiles.</td></tr><tr><th>/proc/<a href="global.html#proc/get_icon_dimensions">get_icon_dimensions</a></th><td>Returns a list containing the width and height of an icon file</td></tr><tr><th>/proc/<a href="global.html#proc/get_icon_dimensions_pure">get_icon_dimensions_pure</a></th><td>Returns a list containing the width and height of an icon file, without using rustg for pure function calls</td></tr><tr><th>/proc/<a href="global.html#proc/get_small_overlay">get_small_overlay</a></th><td>Fikou's fix for making toast alerts look nice - resets offsets, transforms to fit</td></tr><tr><th>/proc/<a href="global.html#proc/strip_appearance_underlays">strip_appearance_underlays</a></th><td>Strips all underlays on a different plane from an appearance.
Returns the stripped appearance.</td></tr><tr><th>/proc/<a href="global.html#proc/copy_appearance_filter_overlays">copy_appearance_filter_overlays</a></th><td>Copies the passed /appearance, returns a /mutable_appearance</td></tr><tr><th>/proc/<a href="global.html#proc/get_job_hud_icon">get_job_hud_icon</a></th><td>Returns the (isolated) security HUD icon for the given job.</td></tr><tr><th>/proc/<a href="global.html#proc/fill_grid_from_icon">fill_grid_from_icon</a></th><td>Copies the pixel colors from the passed in icon <code>I</code> to the 2d list <code>grid</code></td></tr></table></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>