<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/mob/dead/new_player - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="mob/dead/new_player.html#var">Var Details</a> - <a href="mob/dead/new_player.html#proc">Proc Details</a></header><main><h1>new_player <aside>/<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/<a href="mob/dead/new_player.html">new_player</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L3"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 3"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="mob/dead/new_player.html#var/ineligible_for_roles">ineligible_for_roles</a></th><td>Used to make sure someone doesn't get spammed with messages if they're ineligible for roles.</td></tr><tr><th><a href="mob/dead/new_player.html#var/jobs_menu_mounted">jobs_menu_mounted</a></th><td>Used to track if the player's jobs menu sent a message saying it successfully mounted.</td></tr><tr><th><a href="mob/dead/new_player.html#var/new_character">new_character</a></th><td>For instant transfer once the round is set up</td></tr><tr><th><a href="mob/dead/new_player.html#var/ready">ready</a></th><td>String Values tied to Defines that state whether the new_player is ready to play or not.
Do try your best to compare this value directly against the defines for certainty but helper procs do exist in bulkier situations.</td></tr><tr><th><a href="mob/dead/new_player.html#var/reset_hud_cooldown">reset_hud_cooldown</a></th><td>Cooldown for the Reset Lobby Menu HUD verb</td></tr><tr><th><a href="mob/dead/new_player.html#var/spawning">spawning</a></th><td>Referenced when you want to delete the new_player later on in the code.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="mob/dead/new_player.html#proc/auto_deadmin_on_ready_or_latejoin">auto_deadmin_on_ready_or_latejoin</a></th><td>Auto deadmins an admin when they click to toggle the ready button or join game button in the menu</td></tr><tr><th><a href="mob/dead/new_player.html#proc/create_character">create_character</a></th><td>Creates, assigns and returns the new_character to spawn as. Assumes a valid mind.assigned_role exists.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/handle_player_polling">handle_player_polling</a></th><td>Shows a list of currently running polls a player can vote/has voted on</td></tr><tr><th><a href="mob/dead/new_player.html#proc/is_ready_to_play">is_ready_to_play</a></th><td>Quickly gets a boolean of whether the new_player is ready to play or not in places where we would like the boolean logic.
The assertion is that readiness must be an opted in TRUE, while all other states (e.g. not ready, broken, etc) are FALSE.
We organize it this way to ensure the system is extensible for other possible ready states.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/open_interview">open_interview</a></th><td>Verb for opening the existing interview, or if relevant creating a new interview if possible.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/poll_player">poll_player</a></th><td>Redirects a player to the correct poll window based on poll type.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/poll_player_irv">poll_player_irv</a></th><td>Shows voting window for an IRV type poll, listing its options and relevant details.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/poll_player_multi">poll_player_multi</a></th><td>Shows voting window for a multiple choice type poll, listing its options and relevant details.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/poll_player_option">poll_player_option</a></th><td>Shows voting window for an option type poll, listing its options and relevant details.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/poll_player_rating">poll_player_rating</a></th><td>Shows voting window for a rating type poll, listing its options and relevant details.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/poll_player_text">poll_player_text</a></th><td>Shows voting window for a text response type poll, listing its relevant details.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/register_for_interview">register_for_interview</a></th><td>Prepares a client for the interview system, and provides them with a new interview</td></tr><tr><th><a href="mob/dead/new_player.html#proc/reset_menu_hud">reset_menu_hud</a></th><td>Resets the Lobby Menu HUD, recreating and reassigning it to the new player</td></tr><tr><th><a href="mob/dead/new_player.html#proc/vote_on_poll_handler">vote_on_poll_handler</a></th><td>Runs some poll validation before a vote is processed.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/vote_on_poll_irv">vote_on_poll_irv</a></th><td>Processes vote form data and saves results to the database for an IRV type poll.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/vote_on_poll_multi">vote_on_poll_multi</a></th><td>Processes vote form data and saves results to the database for a multiple choice type poll.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/vote_on_poll_option">vote_on_poll_option</a></th><td>Processes vote form data and saves results to the database for an option type poll.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/vote_on_poll_rating">vote_on_poll_rating</a></th><td>Processes vote form data and saves results to the database for a rating type poll.</td></tr><tr><th><a href="mob/dead/new_player.html#proc/vote_on_poll_text">vote_on_poll_text</a></th><td>Processes response form data and saves results to the database for a text response type poll.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/ineligible_for_roles"><aside class="declaration">var </aside>ineligible_for_roles <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 18"></a></h3><p>Used to make sure someone doesn't get spammed with messages if they're ineligible for roles.</p><h3 id="var/jobs_menu_mounted"><aside class="declaration">var </aside>jobs_menu_mounted <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L20"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 20"></a></h3><p>Used to track if the player's jobs menu sent a message saying it successfully mounted.</p><h3 id="var/new_character"><aside class="declaration">var </aside>new_character <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 16"></a></h3><p>For instant transfer once the round is set up</p><h3 id="var/ready"><aside class="declaration">var </aside>ready <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 12"></a></h3><p>String Values tied to Defines that state whether the new_player is ready to play or not.
Do try your best to compare this value directly against the defines for certainty but helper procs do exist in bulkier situations.</p><h3 id="var/reset_hud_cooldown"><aside class="declaration">var </aside>reset_hud_cooldown <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 22"></a></h3><p>Cooldown for the Reset Lobby Menu HUD verb</p><h3 id="var/spawning"><aside class="declaration">var </aside>spawning <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 14"></a></h3><p>Referenced when you want to delete the new_player later on in the code.</p><h2 id="proc">Proc Details</h2><h3 id="proc/auto_deadmin_on_ready_or_latejoin"><aside class="declaration">proc </aside>auto_deadmin_on_ready_or_latejoin<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L381"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 381"></a></aside></h3><p>Auto deadmins an admin when they click to toggle the ready button or join game button in the menu</p><h3 id="proc/create_character"><aside class="declaration">proc </aside>create_character<aside>(/<a href="atom.html">atom</a>/destination)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L270"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 270"></a></aside></h3><p>Creates, assigns and returns the new_character to spawn as. Assumes a valid mind.assigned_role exists.</p><h3 id="proc/handle_player_polling"><aside class="declaration">proc </aside>handle_player_polling<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 14"></a></aside></h3><p>Shows a list of currently running polls a player can vote/has voted on</p><h3 id="proc/is_ready_to_play"><aside class="declaration">proc </aside>is_ready_to_play<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L71"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 71"></a></aside></h3><p>Quickly gets a boolean of whether the new_player is ready to play or not in places where we would like the boolean logic.
The assertion is that readiness must be an opted in TRUE, while all other states (e.g. not ready, broken, etc) are FALSE.
We organize it this way to ensure the system is extensible for other possible ready states.</p><h3 id="proc/open_interview"><aside class="declaration">proc </aside>open_interview<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/interview/interview.dm#L94"><img src="git.png" width="16" height="16" title="code/modules/interview/interview.dm 94"></a></aside></h3><p>Verb for opening the existing interview, or if relevant creating a new interview if possible.</p><h3 id="proc/poll_player"><aside class="declaration">proc </aside>poll_player<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 29"></a></aside></h3><p>Redirects a player to the correct poll window based on poll type.</p><h3 id="proc/poll_player_irv"><aside class="declaration">proc </aside>poll_player_irv<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L233"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 233"></a></aside></h3><p>Shows voting window for an IRV type poll, listing its options and relevant details.</p>
<p>If already voted on, the options are sorted how a player voted for them, otherwise they are randomly shuffled.</p><h3 id="proc/poll_player_multi"><aside class="declaration">proc </aside>poll_player_multi<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L189"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 189"></a></aside></h3><p>Shows voting window for a multiple choice type poll, listing its options and relevant details.</p>
<p>If already voted on, the options a player voted for are pre-selected.</p><h3 id="proc/poll_player_option"><aside class="declaration">proc </aside>poll_player_option<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L53"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 53"></a></aside></h3><p>Shows voting window for an option type poll, listing its options and relevant details.</p>
<p>If already voted on, the option a player voted for is pre-selected.</p><h3 id="proc/poll_player_rating"><aside class="declaration">proc </aside>poll_player_rating<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L134"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 134"></a></aside></h3><p>Shows voting window for a rating type poll, listing its options and relevant details.</p>
<p>If already voted on, the options a player voted for are pre-selected.</p><h3 id="proc/poll_player_text"><aside class="declaration">proc </aside>poll_player_text<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L97"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 97"></a></aside></h3><p>Shows voting window for a text response type poll, listing its relevant details.</p>
<p>If already responded to, the saved response of a player is shown.</p><h3 id="proc/register_for_interview"><aside class="declaration">proc </aside>register_for_interview<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L344"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 344"></a></aside></h3><p>Prepares a client for the interview system, and provides them with a new interview</p>
<p>This proc will both prepare the user by removing all verbs from them, as well as
giving them the interview form and forcing it to appear.</p><h3 id="proc/reset_menu_hud"><aside class="declaration">proc </aside>reset_menu_hud<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/new_player.dm#L365"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/new_player.dm 365"></a></aside></h3><p>Resets the Lobby Menu HUD, recreating and reassigning it to the new player</p><h3 id="proc/vote_on_poll_handler"><aside class="declaration">proc </aside>vote_on_poll_handler<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, href_list)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L321"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 321"></a></aside></h3><p>Runs some poll validation before a vote is processed.</p>
<p>Checks a player is who they claim to be and that a poll is actually still running.
Also loads the vote_id to pass onto single-option and text polls.
Increments the vote count when successful.</p><h3 id="proc/vote_on_poll_irv"><aside class="declaration">proc </aside>vote_on_poll_irv<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, /list/href_list, admin_rank, sql_poll_id)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L542"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 542"></a></aside></h3><p>Processes vote form data and saves results to the database for an IRV type poll.</p><h3 id="proc/vote_on_poll_multi"><aside class="declaration">proc </aside>vote_on_poll_multi<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, /list/href_list, admin_rank, sql_poll_id)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L495"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 495"></a></aside></h3><p>Processes vote form data and saves results to the database for a multiple choice type poll.</p><h3 id="proc/vote_on_poll_option"><aside class="declaration">proc </aside>vote_on_poll_option<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, href_list, admin_rank, sql_poll_id, vote_id)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L388"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 388"></a></aside></h3><p>Processes vote form data and saves results to the database for an option type poll.</p><h3 id="proc/vote_on_poll_rating"><aside class="declaration">proc </aside>vote_on_poll_rating<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, /list/href_list, admin_rank, sql_poll_id)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L452"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 452"></a></aside></h3><p>Processes vote form data and saves results to the database for a rating type poll.</p><h3 id="proc/vote_on_poll_text"><aside class="declaration">proc </aside>vote_on_poll_text<aside>(href_list, admin_rank, sql_poll_id, vote_id)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/poll.dm#L420"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/poll.dm 420"></a></aside></h3><p>Processes response form data and saves results to the database for a text response type poll.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>