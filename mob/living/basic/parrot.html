<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/mob/living/basic/parrot - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="mob/living/basic/parrot.html#var">Var Details</a> - <a href="mob/living/basic/parrot.html#proc">Proc Details</a></header><main><h1>parrot <aside>/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/basic.html">basic</a>/<a href="mob/living/basic/parrot.html">parrot</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 9"></a></h1><p>Parrots! Klepto bastards that imitate your speech and hoard your shit.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="mob/living/basic/parrot.html#var/desired_perches">desired_perches</a></th><td>Contains all of the perches that parrots will generally sit on until something catches their eye.</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/ears">ears</a></th><td>Headset for Poly to yell at engineers :)</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/edibles">edibles</a></th><td>Food that Poly loves to eat (spoiler alert it's just crackers)</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/forced_speech_cooldown">forced_speech_cooldown</a></th><td>Tracks the times when we send a phrase through either being pet or attack to ensure it's not abused to flood</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/held_item">held_item</a></th><td>Parrots are kleptomaniacs. This variable ... stores the item a parrot is holding.</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/icon_sit">icon_sit</a></th><td>Icon we use while sitting</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/ignore_items">ignore_items</a></th><td>items we wont pick up</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/pet_commands">pet_commands</a></th><td>list of commands we follow</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/speech_blackboard_key">speech_blackboard_key</a></th><td>The blackboard key we use to store the string we're repeating</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/speech_probability_rate">speech_probability_rate</a></th><td>The generic probability odds we have to do a speech-related action</td></tr><tr><th><a href="mob/living/basic/parrot.html#var/speech_shuffle_rate">speech_shuffle_rate</a></th><td>The generic probability odds we have to switch out our speech string</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/consume_cracker">consume_cracker</a></th><td>Eats a cracker (or anything i guess). This would be nice to eventually fold into the basic_eating element but we do too much snowflake inventory code stuff for this to be reliable presently.
We don't qdel the item here, we assume the invoking proc will have handled that somehow.
Returns TRUE if we ate the thing.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/drop_held_item">drop_held_item</a></th><td>Handles dropping items we're holding. Gently is a special modifier we can use for special interactions.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/early_melee_attack">early_melee_attack</a></th><td>Master proc which will determine the intent of OUR attacks on an object and summon the relevant procs accordingly.
This is pretty much meant for players, AI will use the task-specific procs instead.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/get_available_channels">get_available_channels</a></th><td>Gets the available channels that this parrot has access to. Returns a list of the channels we can use.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/get_phrase">get_phrase</a></th><td>Proc that handles sending the signal and returning a valid phrase to say. Will not do anything if we don't have a stat or if we're cliented.
Will return either a string or null.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/get_static_list_of_phrases">get_static_list_of_phrases</a></th><td>Gets a static list of phrases we wish to pass to the element.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/on_attacked">on_attacked</a></th><td>If we're right-clicked on with a cracker, we eat the cracker.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/on_injured">on_injured</a></th><td>Handles special behavior whenever we are injured.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/on_pet">on_pet</a></th><td>Proc that listens for when a parrot is pet so we can dispatch a voice line.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/perch_on_human">perch_on_human</a></th><td>Proc that will perch us on a human. Returns TRUE if we perched, FALSE otherwise.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/pick_up_item">pick_up_item</a></th><td>Handles picking up the item we're holding, done in its own proc because of a snowflake edge case we need to account for. No additional logic beyond that.
Returns TRUE if we picked it up, FALSE otherwise.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/resolve_right_click_attack">resolve_right_click_attack</a></th><td>Proc that we just use to see if we're rightclicking something for perch behavior or dropping the item we currently ahve</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/setup_headset">setup_headset</a></th><td>Will simply set up the headset for the parrot to use. Stub, implemented on subtypes.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/start_perching">start_perching</a></th><td>Proc that ascertains the type of perch we're dealing with and starts the perching process.
Returns TRUE if we started perching, FALSE otherwise.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/steal_from_ground">steal_from_ground</a></th><td>Picks up an item from the ground and puts it in our claws. Returns TRUE if we picked it up, FALSE otherwise.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/steal_from_mob">steal_from_mob</a></th><td>Looks for an item that we can snatch and puts it in our claws. Returns TRUE if we picked it up, FALSE otherwise.</td></tr><tr><th><a href="mob/living/basic/parrot.html#proc/update_speech_blackboards">update_speech_blackboards</a></th><td>Updates our speech blackboards mob-side to reflect the current speech on the controller to ensure everything is synchronized.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/desired_perches"><aside class="declaration">var </aside>desired_perches <aside>– /static/list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L59"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 59"></a></h3><p>Contains all of the perches that parrots will generally sit on until something catches their eye.</p><h3 id="var/ears"><aside class="declaration">var </aside>ears <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/radio.html">radio</a>/<a href="obj/item/radio/headset.html">headset</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L46"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 46"></a></h3><p>Headset for Poly to yell at engineers :)</p><h3 id="var/edibles"><aside class="declaration">var </aside>edibles <aside>– /static/list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L76"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 76"></a></h3><p>Food that Poly loves to eat (spoiler alert it's just crackers)</p><h3 id="var/forced_speech_cooldown"><aside class="declaration">var </aside>forced_speech_cooldown <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L88"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 88"></a></h3><p>Tracks the times when we send a phrase through either being pet or attack to ensure it's not abused to flood</p><h3 id="var/held_item"><aside class="declaration">var </aside>held_item <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 49"></a></h3><p>Parrots are kleptomaniacs. This variable ... stores the item a parrot is holding.</p><h3 id="var/icon_sit"><aside class="declaration">var </aside>icon_sit <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L43"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 43"></a></h3><p>Icon we use while sitting</p><h3 id="var/ignore_items"><aside class="declaration">var </aside>ignore_items <aside>– /static/list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L73"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 73"></a></h3><p>items we wont pick up</p><h3 id="var/pet_commands"><aside class="declaration">var </aside>pet_commands <aside>– /static/list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L80"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 80"></a></h3><p>list of commands we follow</p><h3 id="var/speech_blackboard_key"><aside class="declaration">var </aside>speech_blackboard_key <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 52"></a></h3><p>The blackboard key we use to store the string we're repeating</p><h3 id="var/speech_probability_rate"><aside class="declaration">var </aside>speech_probability_rate <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L54"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 54"></a></h3><p>The generic probability odds we have to do a speech-related action</p><h3 id="var/speech_shuffle_rate"><aside class="declaration">var </aside>speech_shuffle_rate <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L56"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 56"></a></h3><p>The generic probability odds we have to switch out our speech string</p><h2 id="proc">Proc Details</h2><h3 id="proc/consume_cracker"><aside class="declaration">proc </aside>consume_cracker<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L347"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 347"></a></aside></h3><p>Eats a cracker (or anything i guess). This would be nice to eventually fold into the basic_eating element but we do too much snowflake inventory code stuff for this to be reliable presently.
We don't qdel the item here, we assume the invoking proc will have handled that somehow.
Returns TRUE if we ate the thing.</p><h3 id="proc/drop_held_item"><aside class="declaration">proc </aside>drop_held_item<aside>(gently)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L385"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 385"></a></aside></h3><p>Handles dropping items we're holding. Gently is a special modifier we can use for special interactions.</p><h3 id="proc/early_melee_attack">early_melee_attack<aside>(/<a href="atom.html">atom</a>/target, /list/modifiers, ignore_cooldown)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L283"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 283"></a></aside></h3><p>Master proc which will determine the intent of OUR attacks on an object and summon the relevant procs accordingly.
This is pretty much meant for players, AI will use the task-specific procs instead.</p><h3 id="proc/get_available_channels"><aside class="declaration">proc </aside>get_available_channels<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L438"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 438"></a></aside></h3><p>Gets the available channels that this parrot has access to. Returns a list of the channels we can use.</p><h3 id="proc/get_phrase"><aside class="declaration">proc </aside>get_phrase<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L197"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 197"></a></aside></h3><p>Proc that handles sending the signal and returning a valid phrase to say. Will not do anything if we don't have a stat or if we're cliented.
Will return either a string or null.</p><h3 id="proc/get_static_list_of_phrases"><aside class="declaration">proc </aside>get_static_list_of_phrases<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L427"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 427"></a></aside></h3><p>Gets a static list of phrases we wish to pass to the element.</p><h3 id="proc/on_attacked"><aside class="declaration">proc </aside>on_attacked<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/basic.html">basic</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/attacker, /list/modifiers)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L336"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 336"></a></aside></h3><p>If we're right-clicked on with a cracker, we eat the cracker.</p><h3 id="proc/on_injured"><aside class="declaration">proc </aside>on_injured<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/basic.html">basic</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/attacker, attack_flags)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L360"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 360"></a></aside></h3><p>Handles special behavior whenever we are injured.</p><h3 id="proc/on_pet"><aside class="declaration">proc </aside>on_pet<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/basic.html">basic</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/petter, modifiers)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L212"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 212"></a></aside></h3><p>Proc that listens for when a parrot is pet so we can dispatch a voice line.</p><h3 id="proc/perch_on_human"><aside class="declaration">proc </aside>perch_on_human<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L246"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 246"></a></aside></h3><p>Proc that will perch us on a human. Returns TRUE if we perched, FALSE otherwise.</p><h3 id="proc/pick_up_item"><aside class="declaration">proc </aside>pick_up_item<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L375"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 375"></a></aside></h3><p>Handles picking up the item we're holding, done in its own proc because of a snowflake edge case we need to account for. No additional logic beyond that.
Returns TRUE if we picked it up, FALSE otherwise.</p><h3 id="proc/resolve_right_click_attack"><aside class="parent"><a title="/mob/living" href="mob/living.html#proc/resolve_right_click_attack">↑</a></aside>resolve_right_click_attack<aside>(/<a href="atom.html">atom</a>/target, /list/modifiers)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L188"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 188"></a></aside></h3><p>Proc that we just use to see if we're rightclicking something for perch behavior or dropping the item we currently ahve</p><h3 id="proc/setup_headset"><aside class="declaration">proc </aside>setup_headset<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L423"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 423"></a></aside></h3><p>Will simply set up the headset for the parrot to use. Stub, implemented on subtypes.</p><h3 id="proc/start_perching"><aside class="declaration">proc </aside>start_perching<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L222"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 222"></a></aside></h3><p>Proc that ascertains the type of perch we're dealing with and starts the perching process.
Returns TRUE if we started perching, FALSE otherwise.</p><h3 id="proc/steal_from_ground"><aside class="declaration">proc </aside>steal_from_ground<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L295"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 295"></a></aside></h3><p>Picks up an item from the ground and puts it in our claws. Returns TRUE if we picked it up, FALSE otherwise.</p><h3 id="proc/steal_from_mob"><aside class="declaration">proc </aside>steal_from_mob<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/victim)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L313"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 313"></a></aside></h3><p>Looks for an item that we can snatch and puts it in our claws. Returns TRUE if we picked it up, FALSE otherwise.</p><h3 id="proc/update_speech_blackboards"><aside class="declaration">proc </aside>update_speech_blackboards<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/pets/parrot/_parrot.dm#L418"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/pets/parrot/_parrot.dm 418"></a></aside></h3><p>Updates our speech blackboards mob-side to reflect the current speech on the controller to ensure everything is synchronized.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>