<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/mob/living/basic/revenant - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="mob/living/basic/revenant.html#var">Var Details</a> - <a href="mob/living/basic/revenant.html#proc">Proc Details</a></header><main><h1>revenant <aside>/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/basic.html">basic</a>/<a href="mob/living/basic/revenant.html">revenant</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 7"></a></h1><p>Revenants: &quot;Ghosts&quot; that are invisible and move like ghosts, cannot take damage while invisible
Can hear deadchat, but are NOT normal ghosts and do NOT have x-ray vision
Admin-spawn or random event</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="mob/living/basic/revenant.html#var/abilities">abilities</a></th><td>List of action ability datums to grant on Initialize. Keep in mind that anything with the <code>/aoe/revenant</code> subtype starts locked by default.</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/dormant">dormant</a></th><td>Are we currently dormant (ectoplasm'd)?</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/drained_mobs">drained_mobs</a></th><td>Lazylist of drained mobs to ensure that we don't steal a soul from someone twice</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/draining">draining</a></th><td>Are we currently draining someone?</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/essence">essence</a></th><td>The resource, and health, of revenants.</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/essence_accumulated">essence_accumulated</a></th><td>How much essence the revenant has stolen</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/essence_excess">essence_excess</a></th><td>How much stolen essence is available for unlocks</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/essence_regen_amount">essence_regen_amount</a></th><td>How much essence regenerates per second</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/essence_regenerating">essence_regenerating</a></th><td>If the revenant regenerates essence or not</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/generated_objectives_and_spells">generated_objectives_and_spells</a></th><td>Have we already given this revenant abilities?</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/icon_drain">icon_drain</a></th><td>The icon we use while draining someone.</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/icon_idle">icon_idle</a></th><td>The icon we use while just floating around.</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/icon_reveal">icon_reveal</a></th><td>The icon we use while in a revealed state.</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/icon_stun">icon_stun</a></th><td>The icon we use when stunned (temporarily frozen)</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/max_essence">max_essence</a></th><td>The regeneration cap of essence (go figure); regenerates every Life() tick up to this amount.</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/perfectsouls">perfectsouls</a></th><td>How many perfect, regen-cap increasing souls the revenant has. //TODO, add objective for getting a perfect soul(s?)</td></tr><tr><th><a href="mob/living/basic/revenant.html#var/unreveal_time">unreveal_time</a></th><td>How long the revenant is revealed for, is about 2 seconds times this var.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="mob/living/basic/revenant.html#proc/attempt_harvest">attempt_harvest</a></th><td>Container proc for <code>harvest()</code>, handles the pre-checks as well as potential early-exits for any reason.
Will return FALSE if we can't execute <code>harvest()</code>, or will otherwise the result of <code>harvest()</code>: a boolean value.</td></tr><tr><th><a href="mob/living/basic/revenant.html#proc/create_login_string">create_login_string</a></th><td>Generates the information the player needs to know how to play their role, and returns it as a list.</td></tr><tr><th><a href="mob/living/basic/revenant.html#proc/harvest_soul">harvest_soul</a></th><td>Harvest; activated by clicking a target, will try to drain their essence. Handles all messages and handling of the target.
Returns FALSE if we exit out of the harvest, TRUE if it is fully done.</td></tr><tr><th><a href="mob/living/basic/revenant.html#proc/incorporeal_move_check">incorporeal_move_check</a></th><td>Incorporeal move check: blocked by holy-watered tiles and salt piles.</td></tr><tr><th><a href="mob/living/basic/revenant.html#proc/move_to_ectoplasm">move_to_ectoplasm</a></th><td>Forces the mob, once dormant, to move inside ectoplasm until it can regenerate.</td></tr><tr><th><a href="mob/living/basic/revenant.html#proc/on_life">on_life</a></th><td>Signal Handler Injection to handle Life() stuff for revenants</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/abilities"><aside class="declaration">var </aside>abilities <aside>– /static/list/<a href="datum.html">datum</a>/<a href="datum/action.html">action</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L69"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 69"></a></h3><p>List of action ability datums to grant on Initialize. Keep in mind that anything with the <code>/aoe/revenant</code> subtype starts locked by default.</p><h3 id="var/dormant"><aside class="declaration">var </aside>dormant <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L60"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 60"></a></h3><p>Are we currently dormant (ectoplasm'd)?</p><h3 id="var/drained_mobs"><aside class="declaration">var </aside>drained_mobs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L67"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 67"></a></h3><p>Lazylist of drained mobs to ensure that we don't steal a soul from someone twice</p><h3 id="var/draining"><aside class="declaration">var </aside>draining <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L62"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 62"></a></h3><p>Are we currently draining someone?</p><h3 id="var/essence"><aside class="declaration">var </aside>essence <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L79"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 79"></a></h3><p>The resource, and health, of revenants.</p><h3 id="var/essence_accumulated"><aside class="declaration">var </aside>essence_accumulated <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L87"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 87"></a></h3><p>How much essence the revenant has stolen</p><h3 id="var/essence_excess"><aside class="declaration">var </aside>essence_excess <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L89"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 89"></a></h3><p>How much stolen essence is available for unlocks</p><h3 id="var/essence_regen_amount"><aside class="declaration">var </aside>essence_regen_amount <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L85"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 85"></a></h3><p>How much essence regenerates per second</p><h3 id="var/essence_regenerating"><aside class="declaration">var </aside>essence_regenerating <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L83"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 83"></a></h3><p>If the revenant regenerates essence or not</p><h3 id="var/generated_objectives_and_spells"><aside class="declaration">var </aside>generated_objectives_and_spells <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L64"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 64"></a></h3><p>Have we already given this revenant abilities?</p><h3 id="var/icon_drain"><aside class="declaration">var </aside>icon_drain <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L57"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 57"></a></h3><p>The icon we use while draining someone.</p><h3 id="var/icon_idle"><aside class="declaration">var </aside>icon_idle <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L51"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 51"></a></h3><p>The icon we use while just floating around.</p><h3 id="var/icon_reveal"><aside class="declaration">var </aside>icon_reveal <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L53"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 53"></a></h3><p>The icon we use while in a revealed state.</p><h3 id="var/icon_stun"><aside class="declaration">var </aside>icon_stun <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L55"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 55"></a></h3><p>The icon we use when stunned (temporarily frozen)</p><h3 id="var/max_essence"><aside class="declaration">var </aside>max_essence <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L81"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 81"></a></h3><p>The regeneration cap of essence (go figure); regenerates every Life() tick up to this amount.</p><h3 id="var/perfectsouls"><aside class="declaration">var </aside>perfectsouls <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L93"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 93"></a></h3><p>How many perfect, regen-cap increasing souls the revenant has. //TODO, add objective for getting a perfect soul(s?)</p><h3 id="var/unreveal_time"><aside class="declaration">var </aside>unreveal_time <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L91"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 91"></a></h3><p>How long the revenant is revealed for, is about 2 seconds times this var.</p><h2 id="proc">Proc Details</h2><h3 id="proc/attempt_harvest"><aside class="declaration">proc </aside>attempt_harvest<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/revenant_harvest.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/revenant_harvest.dm 5"></a></aside></h3><p>Container proc for <code>harvest()</code>, handles the pre-checks as well as potential early-exits for any reason.
Will return FALSE if we can't execute <code>harvest()</code>, or will otherwise the result of <code>harvest()</code>: a boolean value.</p><h3 id="proc/create_login_string"><aside class="declaration">proc </aside>create_login_string<aside>() <span class="as"> as </span>/list <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L351"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 351"></a></aside></h3><p>Generates the information the player needs to know how to play their role, and returns it as a list.</p><h3 id="proc/harvest_soul"><aside class="declaration">proc </aside>harvest_soul<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/revenant_harvest.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/revenant_harvest.dm 31"></a></aside></h3><p>Harvest; activated by clicking a target, will try to drain their essence. Handles all messages and handling of the target.
Returns FALSE if we exit out of the harvest, TRUE if it is fully done.</p><h3 id="proc/incorporeal_move_check"><aside class="declaration">proc </aside>incorporeal_move_check<aside>(/<a href="atom.html">atom</a>/destination)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L380"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 380"></a></aside></h3><p>Incorporeal move check: blocked by holy-watered tiles and salt piles.</p><h3 id="proc/move_to_ectoplasm"><aside class="declaration">proc </aside>move_to_ectoplasm<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L326"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 326"></a></aside></h3><p>Forces the mob, once dormant, to move inside ectoplasm until it can regenerate.</p><h3 id="proc/on_life"><aside class="declaration">proc </aside>on_life<aside>(seconds_per_tick)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm#L134"><img src="git.png" width="16" height="16" title="code/modules/mob/living/basic/space_fauna/revenant/_revenant.dm 134"></a></aside></h3><p>Signal Handler Injection to handle Life() stuff for revenants</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>