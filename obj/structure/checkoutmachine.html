<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/structure/checkoutmachine - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/structure/checkoutmachine.html#var">Var Details</a> - <a href="obj/structure/checkoutmachine.html#proc">Proc Details</a></header><main><h1>checkoutmachine <aside>/<a href="obj.html">obj</a>/<a href="obj/structure.html">structure</a>/<a href="obj/structure/checkoutmachine.html">checkoutmachine</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L41"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 41"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/structure/checkoutmachine.html#var/accounts_to_rob">accounts_to_rob</a></th><td>List of bank accounts to take money from, determines in start_dumping()</td></tr><tr><th><a href="obj/structure/checkoutmachine.html#var/bogdanoff">bogdanoff</a></th><td>The original user of the suspicious phone</td></tr><tr><th><a href="obj/structure/checkoutmachine.html#var/canwalk">canwalk</a></th><td>Are we able to start moving?</td></tr><tr><th><a href="obj/structure/checkoutmachine.html#var/internal_account">internal_account</a></th><td>Our own internal bank account, serves as a fallback to transfer money to if Bogdanoff doesn't have one</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/structure/checkoutmachine.html#proc/check_if_finished">check_if_finished</a></th><td>Check whether any accounts in the accounts_to_rob list are still being drained.
Returns TRUE if no accounts are being drained, FALSE otherwise</td></tr><tr><th><a href="obj/structure/checkoutmachine.html#proc/dump">dump</a></th><td>For each account being drained, pulls a random percentage of cash out the account and sends it to Bogdanoff's account.
If Bogdanoff did not have a bank account, stores the funds in the checkout's internal_account.
Sets a timer to call itself again after an interval.</td></tr><tr><th><a href="obj/structure/checkoutmachine.html#proc/expel_cash">expel_cash</a></th><td>Splits the balance of the internal_account into several smaller piles of cash and scatters them around the area.</td></tr><tr><th><a href="obj/structure/checkoutmachine.html#proc/startUp">startUp</a></th><td>Starts the dumping process and plays a start-up animation before the checkout starts walking.</td></tr><tr><th><a href="obj/structure/checkoutmachine.html#proc/start_dumping">start_dumping</a></th><td>Grabs the accounts to be robbed and puts them in accounts_to_rob, tells the accounts they're being drained and calls dump() to start draining.</td></tr><tr><th><a href="obj/structure/checkoutmachine.html#proc/stop_dumping">stop_dumping</a></th><td>Goes through accounts_to_rob and tells every account that the drain has stopped.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/accounts_to_rob"><aside class="declaration">var </aside>accounts_to_rob <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L53"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 53"></a></h3><p>List of bank accounts to take money from, determines in start_dumping()</p><h3 id="var/bogdanoff"><aside class="declaration">var </aside>bogdanoff <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L55"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 55"></a></h3><p>The original user of the suspicious phone</p><h3 id="var/canwalk"><aside class="declaration">var </aside>canwalk <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L57"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 57"></a></h3><p>Are we able to start moving?</p><h3 id="var/internal_account"><aside class="declaration">var </aside>internal_account <aside>– /<a href="datum.html">datum</a>/<a href="datum/bank_account.html">bank_account</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L59"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 59"></a></h3><p>Our own internal bank account, serves as a fallback to transfer money to if Bogdanoff doesn't have one</p><h2 id="proc">Proc Details</h2><h3 id="proc/check_if_finished"><aside class="declaration">proc </aside>check_if_finished<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L69"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 69"></a></aside></h3><p>Check whether any accounts in the accounts_to_rob list are still being drained.
Returns TRUE if no accounts are being drained, FALSE otherwise</p><h3 id="proc/dump"><aside class="declaration">proc </aside>dump<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L216"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 216"></a></aside></h3><p>For each account being drained, pulls a random percentage of cash out the account and sends it to Bogdanoff's account.
If Bogdanoff did not have a bank account, stores the funds in the checkout's internal_account.
Sets a timer to call itself again after an interval.</p><h3 id="proc/expel_cash"><aside class="declaration">proc </aside>expel_cash<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L246"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 246"></a></aside></h3><p>Splits the balance of the internal_account into several smaller piles of cash and scatters them around the area.</p><h3 id="proc/startUp"><aside class="declaration">proc </aside>startUp<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L126"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 126"></a></aside></h3><p>Starts the dumping process and plays a start-up animation before the checkout starts walking.</p><h3 id="proc/start_dumping"><aside class="declaration">proc </aside>start_dumping<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L203"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 203"></a></aside></h3><p>Grabs the accounts to be robbed and puts them in accounts_to_rob, tells the accounts they're being drained and calls dump() to start draining.</p><h3 id="proc/stop_dumping"><aside class="declaration">proc </aside>stop_dumping<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/items/crab17.dm#L237"><img src="git.png" width="16" height="16" title="code/game/objects/items/crab17.dm 237"></a></aside></h3><p>Goes through accounts_to_rob and tells every account that the drain has stopped.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>