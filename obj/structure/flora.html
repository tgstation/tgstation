<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/structure/flora - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/structure/flora.html#var">Var Details</a> - <a href="obj/structure/flora.html#proc">Proc Details</a></header><main><h1>flora <aside>/<a href="obj.html">obj</a>/<a href="obj/structure.html">structure</a>/<a href="obj/structure/flora.html">flora</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L1"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/structure/flora.html#var/can_uproot">can_uproot</a></th><td>If the user is allowed to uproot the flora</td></tr><tr><th><a href="obj/structure/flora.html#var/flora_flags">flora_flags</a></th><td>Flags for the flora to determine what kind of sound to play when it gets hit</td></tr><tr><th><a href="obj/structure/flora.html#var/harvest_amount_high">harvest_amount_high</a></th><td>The high end of how many harvested items you get</td></tr><tr><th><a href="obj/structure/flora.html#var/harvest_amount_low">harvest_amount_low</a></th><td>The low end of how many harvested items you get</td></tr><tr><th><a href="obj/structure/flora.html#var/harvest_message_true_thresholds">harvest_message_true_thresholds</a></th><td>See proc/harvest() and where this is used for an explaination on how this works</td></tr><tr><th><a href="obj/structure/flora.html#var/harvest_time">harvest_time</a></th><td>How long it takes to harvest the flora with the correct tool</td></tr><tr><th><a href="obj/structure/flora.html#var/harvest_verb">harvest_verb</a></th><td>The &quot;verb&quot; to use when the user harvests the flora</td></tr><tr><th><a href="obj/structure/flora.html#var/harvest_verb_suffix">harvest_verb_suffix</a></th><td>What should be added to harvest_verb depending on the context (&quot;user harvest(s) the tree&quot; / &quot;user chop(s down) the tree&quot;)</td></tr><tr><th><a href="obj/structure/flora.html#var/harvest_with_hands">harvest_with_hands</a></th><td>If the user is able to harvest this with their hands</td></tr><tr><th><a href="obj/structure/flora.html#var/harvestable">harvestable</a></th><td>If false, the flora won't be able to be harvested at all. If it's true, go through checks normally to determine if the flora is able to be harvested</td></tr><tr><th><a href="obj/structure/flora.html#var/harvested_desc">harvested_desc</a></th><td>If set, the flora will have this as its description after being harvested. When the flora becomes harvestable again, it regerts to its initial(desc)</td></tr><tr><th><a href="obj/structure/flora.html#var/harvested_name">harvested_name</a></th><td>If set, the flora will have this as its name after being harvested. When the flora becomes harvestable again, it reverts to its initial(name)</td></tr><tr><th><a href="obj/structure/flora.html#var/regrowth_time_high">regrowth_time_high</a></th><td>Stops the flora from regrowing if this is set to 0</td></tr><tr><th><a href="obj/structure/flora.html#var/regrowth_time_low">regrowth_time_low</a></th><td>Variables for determining the low/high ends of how long it takes for the flora takes to grow.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/structure/flora.html#proc/can_harvest">can_harvest</a></th><td>A helper proc that determines if a user can currently harvest this flora with whatever tool they're trying to use.
Returns: TRUE if they can harvest, FALSE if not. Null if it's not harvestable at all.</td></tr><tr><th><a href="obj/structure/flora.html#proc/get_potential_products">get_potential_products</a></th><td>A helper proc for getting the products that could be created when harvesting this flora, list syntax is (type = weight)
Because of how this works, it can spawn in anomalies if you want it to. Or wall girders
Returns: An assoc list of obj typepaths and their weights e.g. list(/obj/item/food/grass = 1), or null</td></tr><tr><th><a href="obj/structure/flora.html#proc/get_products_list">get_products_list</a></th><td>A helper proc for getting a random amount of products, associated with the flora's product list.
Returns: A list where each value is (harvested_item_typepath = amount_of_products)</td></tr><tr><th><a href="obj/structure/flora.html#proc/harvest">harvest</a></th><td>This gets called after a mob tries to harvest this flora with the correct tool.
It displays a flavor message to whoever's harvesting this flora, then creates new products depending on the flora's product list.
Also renames the flora if harvested_name or harvested_desc is set in the variables
Returns: FALSE if nothing was made, otherwise a list of created products</td></tr><tr><th><a href="obj/structure/flora.html#proc/replant">replant</a></th><td>Called after the user plants the flora back into the ground after uprooted</td></tr><tr><th><a href="obj/structure/flora.html#proc/uproot">uproot</a></th><td>Called after the user uproots the flora with a shovel.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/can_uproot"><aside class="declaration">var </aside>can_uproot <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L21"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 21"></a></h3><p>If the user is allowed to uproot the flora</p><h3 id="var/flora_flags"><aside class="declaration">var </aside>flora_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L50"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 50"></a></h3><p>Flags for the flora to determine what kind of sound to play when it gets hit</p><h3 id="var/harvest_amount_high"><aside class="declaration">var </aside>harvest_amount_high <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L30"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 30"></a></h3><p>The high end of how many harvested items you get</p><h3 id="var/harvest_amount_low"><aside class="declaration">var </aside>harvest_amount_low <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L28"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 28"></a></h3><p>The low end of how many harvested items you get</p><h3 id="var/harvest_message_true_thresholds"><aside class="declaration">var </aside>harvest_message_true_thresholds <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L37"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 37"></a></h3><p>See proc/harvest() and where this is used for an explaination on how this works</p><h3 id="var/harvest_time"><aside class="declaration">var </aside>harvest_time <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L40"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 40"></a></h3><p>How long it takes to harvest the flora with the correct tool</p><h3 id="var/harvest_verb"><aside class="declaration">var </aside>harvest_verb <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L17"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 17"></a></h3><p>The &quot;verb&quot; to use when the user harvests the flora</p><h3 id="var/harvest_verb_suffix"><aside class="declaration">var </aside>harvest_verb_suffix <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L19"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 19"></a></h3><p>What should be added to harvest_verb depending on the context (&quot;user harvest(s) the tree&quot; / &quot;user chop(s down) the tree&quot;)</p><h3 id="var/harvest_with_hands"><aside class="declaration">var </aside>harvest_with_hands <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L15"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 15"></a></h3><p>If the user is able to harvest this with their hands</p><h3 id="var/harvestable"><aside class="declaration">var </aside>harvestable <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L26"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 26"></a></h3><p>If false, the flora won't be able to be harvested at all. If it's true, go through checks normally to determine if the flora is able to be harvested</p><h3 id="var/harvested_desc"><aside class="declaration">var </aside>harvested_desc <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L12"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 12"></a></h3><p>If set, the flora will have this as its description after being harvested. When the flora becomes harvestable again, it regerts to its initial(desc)</p><h3 id="var/harvested_name"><aside class="declaration">var </aside>harvested_name <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L10"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 10"></a></h3><p>If set, the flora will have this as its name after being harvested. When the flora becomes harvestable again, it reverts to its initial(name)</p><h3 id="var/regrowth_time_high"><aside class="declaration">var </aside>regrowth_time_high <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L47"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 47"></a></h3><p>Stops the flora from regrowing if this is set to 0</p><h3 id="var/regrowth_time_low"><aside class="declaration">var </aside>regrowth_time_low <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L45"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 45"></a></h3><p>Variables for determining the low/high ends of how long it takes for the flora takes to grow.</p><h2 id="proc">Proc Details</h2><h3 id="proc/can_harvest"><aside class="declaration">proc </aside>can_harvest<aside>(/<a href="mob.html">mob</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/harvesting_item)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L164"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 164"></a></aside></h3><p>A helper proc that determines if a user can currently harvest this flora with whatever tool they're trying to use.
Returns: TRUE if they can harvest, FALSE if not. Null if it's not harvestable at all.</p><h3 id="proc/get_potential_products"><aside class="declaration">proc </aside>get_potential_products<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L138"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 138"></a></aside></h3><p>A helper proc for getting the products that could be created when harvesting this flora, list syntax is (type = weight)
Because of how this works, it can spawn in anomalies if you want it to. Or wall girders
Returns: An assoc list of obj typepaths and their weights e.g. list(/obj/item/food/grass = 1), or null</p><h3 id="proc/get_products_list"><aside class="declaration">proc </aside>get_products_list<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L145"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 145"></a></aside></h3><p>A helper proc for getting a random amount of products, associated with the flora's product list.
Returns: A list where each value is (harvested_item_typepath = amount_of_products)</p><h3 id="proc/harvest"><aside class="declaration">proc </aside>harvest<aside>(user, product_amount_multiplier)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L193"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 193"></a></aside></h3><p>This gets called after a mob tries to harvest this flora with the correct tool.
It displays a flavor message to whoever's harvesting this flora, then creates new products depending on the flora's product list.
Also renames the flora if harvested_name or harvested_desc is set in the variables
Returns: FALSE if nothing was made, otherwise a list of created products</p><h3 id="proc/replant"><aside class="declaration">proc </aside>replant<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L273"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 273"></a></aside></h3><p>Called after the user plants the flora back into the ground after uprooted</p><h3 id="proc/uproot"><aside class="declaration">proc </aside>uproot<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/structures/flora.dm#L263"><img src="git.png" width="16" height="16" title="code/game/objects/structures/flora.dm 263"></a></aside></h3><p>Called after the user uproots the flora with a shovel.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>