<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/effect/mine - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/effect/mine.html#var">Var Details</a> - <a href="obj/effect/mine.html#proc">Proc Details</a></header><main><h1>mine <aside>/<a href="obj.html">obj</a>/<a href="obj/effect/mine.html">effect/mine</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L1"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/effect/mine.html#var/arm_delay">arm_delay</a></th><td>If set, we default armed to FALSE and set it to TRUE after this long from initializing</td></tr><tr><th><a href="obj/effect/mine.html#var/armed">armed</a></th><td>Can be set to FALSE if we want a short 'coming online' delay, then set to TRUE. Can still be set off by damage</td></tr><tr><th><a href="obj/effect/mine.html#var/foot_on_mine">foot_on_mine</a></th><td>Who's got their foot on the mine's pressure plate
Stepping on the mine will set this to the first mob who stepped over it
The mine will not detonate via movement unless the first mob steps off of it</td></tr><tr><th><a href="obj/effect/mine.html#var/triggered">triggered</a></th><td>We manually check to see if we've been triggered in case multiple atoms cross us in the time between the mine being triggered and it actually deleting, to avoid a race condition with multiple detonations</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/effect/mine.html#proc/can_trigger">can_trigger</a></th><td>Can this mine trigger on the passed movable?</td></tr><tr><th><a href="obj/effect/mine.html#proc/mineEffect">mineEffect</a></th><td>The effect of the mine</td></tr><tr><th><a href="obj/effect/mine.html#proc/now_armed">now_armed</a></th><td>If the landmine was previously inactive, this beeps and displays a message marking it active</td></tr><tr><th><a href="obj/effect/mine.html#proc/triggermine">triggermine</a></th><td>When something sets off a mine</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/arm_delay"><aside class="declaration">var </aside>arm_delay <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L14"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 14"></a></h3><p>If set, we default armed to FALSE and set it to TRUE after this long from initializing</p><h3 id="var/armed"><aside class="declaration">var </aside>armed <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L12"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 12"></a></h3><p>Can be set to FALSE if we want a short 'coming online' delay, then set to TRUE. Can still be set off by damage</p><h3 id="var/foot_on_mine"><aside class="declaration">var </aside>foot_on_mine <aside>– /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L19"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 19"></a></h3><p>Who's got their foot on the mine's pressure plate
Stepping on the mine will set this to the first mob who stepped over it
The mine will not detonate via movement unless the first mob steps off of it</p><h3 id="var/triggered"><aside class="declaration">var </aside>triggered <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L10"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 10"></a></h3><p>We manually check to see if we've been triggered in case multiple atoms cross us in the time between the mine being triggered and it actually deleting, to avoid a race condition with multiple detonations</p><h2 id="proc">Proc Details</h2><h3 id="proc/can_trigger"><aside class="declaration">proc </aside>can_trigger<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/on_who)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L64"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 64"></a></aside></h3><p>Can this mine trigger on the passed movable?</p><h3 id="proc/mineEffect"><aside class="declaration">proc </aside>mineEffect<aside>(/<a href="mob.html">mob</a>/victim)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L53"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 53"></a></aside></h3><p>The effect of the mine</p><h3 id="proc/now_armed"><aside class="declaration">proc </aside>now_armed<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L57"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 57"></a></aside></h3><p>If the landmine was previously inactive, this beeps and displays a message marking it active</p><h3 id="proc/triggermine"><aside class="declaration">proc </aside>triggermine<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/triggerer)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/game/objects/effects/mines.dm#L132"><img src="git.png" width="16" height="16" title="code/game/objects/effects/mines.dm 132"></a></aside></h3><p>When something sets off a mine</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>