<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/vehicle - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/vehicle.html#var">Var Details</a> - <a href="obj/vehicle.html#proc">Proc Details</a></header><main><h1>vehicle <aside>/<a href="obj.html">obj</a>/<a href="obj/vehicle.html">vehicle</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L1"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/vehicle.html#var/canmove">canmove</a></th><td>Whether the vehicle is currently able to move</td></tr><tr><th><a href="obj/vehicle.html#var/inserted_key">inserted_key</a></th><td>The inserted key, needed on some vehicles to start the engine</td></tr><tr><th><a href="obj/vehicle.html#var/key_type">key_type</a></th><td>If the driver needs a certain item in hand (or inserted, for vehicles) to drive this. For vehicles, this must be duplicated on their riding component subtype
<a href="datum/component/riding.html#var/keytype" title="/datum/component/riding">/datum/component/riding/var/keytype</a> variable because only a few specific checks are handled here with this var, and the majority of it is on the riding component
Eventually the remaining checks should be moved to the component and this var removed.</td></tr><tr><th><a href="obj/vehicle.html#var/max_drivers">max_drivers</a></th><td>Maximum amount of drivers</td></tr><tr><th><a href="obj/vehicle.html#var/max_occupants">max_occupants</a></th><td>Maximum amount of passengers plus drivers</td></tr><tr><th><a href="obj/vehicle.html#var/trailer">trailer</a></th><td>This vehicle will follow us when we move (like atrailer duh)</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/vehicle.html#proc/add_trailer">add_trailer</a></th><td>To add a trailer to the vehicle in a manner that allows safe qdels</td></tr><tr><th><a href="obj/vehicle.html#proc/destroy_controller_action_type">destroy_controller_action_type</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/destroy_passenger_action_type">destroy_passenger_action_type</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/generate_action_type">generate_action_type</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/generate_actions">generate_actions</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/generate_integrity_message">generate_integrity_message</a></th><td>Returns a readable string of the vehicle's health for examining. Overridden by subtypes who want to be more verbose with their health messages.</td></tr><tr><th><a href="obj/vehicle.html#proc/grant_action_type_to_mob">grant_action_type_to_mob</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/grant_passenger_actions">grant_passenger_actions</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/initialize_controller_action_type">initialize_controller_action_type</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/initialize_passenger_action_type">initialize_passenger_action_type</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/remove_action_type_from_mob">remove_action_type_from_mob</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/remove_passenger_actions">remove_passenger_actions</a></th><td></td></tr><tr><th><a href="obj/vehicle.html#proc/remove_trailer">remove_trailer</a></th><td>To remove a trailer from the vehicle in a manner that allows safe qdels</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/canmove"><aside class="declaration">var </aside>canmove <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 31"></a></h3><p>Whether the vehicle is currently able to move</p><h3 id="var/inserted_key"><aside class="declaration">var </aside>inserted_key <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/key</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 29"></a></h3><p>The inserted key, needed on some vehicles to start the engine</p><h3 id="var/key_type"><aside class="declaration">var </aside>key_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 27"></a></h3><p>If the driver needs a certain item in hand (or inserted, for vehicles) to drive this. For vehicles, this must be duplicated on their riding component subtype
<a href="datum/component/riding.html#var/keytype" title="/datum/component/riding">/datum/component/riding/var/keytype</a> variable because only a few specific checks are handled here with this var, and the majority of it is on the riding component
Eventually the remaining checks should be moved to the component and this var removed.</p><h3 id="var/max_drivers"><aside class="declaration">var </aside>max_drivers <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L19"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 19"></a></h3><p>Maximum amount of drivers</p><h3 id="var/max_occupants"><aside class="declaration">var </aside>max_occupants <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 17"></a></h3><p>Maximum amount of passengers plus drivers</p><h3 id="var/trailer"><aside class="declaration">var </aside>trailer <aside>– /<a href="obj.html">obj</a>/<a href="obj/vehicle.html">vehicle</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L36"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 36"></a></h3><p>This vehicle will follow us when we move (like atrailer duh)</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_trailer"><aside class="declaration">proc </aside>add_trailer<aside>(/<a href="obj.html">obj</a>/<a href="obj/vehicle.html">vehicle</a>/added_vehicle)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L183"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 183"></a></aside></h3><p>To add a trailer to the vehicle in a manner that allows safe qdels</p><h3 id="proc/destroy_controller_action_type"><aside class="declaration">proc </aside>destroy_controller_action_type<aside>(actiontype, control_flag)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L74"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 74"></a></aside></h3><h2 id="destroy-controller-action-type">destroy_controller_action_type</h2>
<p>As the name implies, removes the actiontype from autogrant and removes it from all occupants
args:</p>
<ul>
<li>actiontype: typepath of the action you want to remove from occupants and autogrant.</li>
</ul><h3 id="proc/destroy_passenger_action_type"><aside class="declaration">proc </aside>destroy_passenger_action_type<aside>(actiontype)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L48"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 48"></a></aside></h3><h2 id="destroy-passenger-action-type">destroy_passenger_action_type</h2>
<p>Removes this action type from all occupants and stops autogranting it
args:</p>
<ul>
<li>actiontype: typepath of the action you want to remove from occupants and the autogrant list.</li>
</ul><h3 id="proc/generate_action_type"><aside class="declaration">proc </aside>generate_action_type<aside>(actiontype)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 21"></a></aside></h3><h2 id="generate-action-type">generate_action_type</h2>
<p>A small proc to properly set up each action path.
args:</p>
<ul>
<li>actiontype: typepath of the action the proc sets up.
returns created and set up action instance</li>
</ul><h3 id="proc/generate_actions"><aside class="declaration">proc </aside>generate_actions<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L10"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 10"></a></aside></h3><h2 id="generate-actions">generate_actions</h2>
<p>You override this with initialize_passenger_action_type and initialize_controller_action_type calls
To give passengers actions when they enter the vehicle.
Read the documentation on the aforementioned procs to learn the difference</p><h3 id="proc/generate_integrity_message"><aside class="declaration">proc </aside>generate_integrity_message<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L75"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 75"></a></aside></h3><p>Returns a readable string of the vehicle's health for examining. Overridden by subtypes who want to be more verbose with their health messages.</p><h3 id="proc/grant_action_type_to_mob"><aside class="declaration">proc </aside>grant_action_type_to_mob<aside>(actiontype, /<a href="mob.html">mob</a>/grant_to)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L90"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 90"></a></aside></h3><h2 id="grant-action-type-to-mob">grant_action_type_to_mob</h2>
<p>As on the tin, it does all the annoying small stuff and sanity needed
to GRANT an action to a mob.
args:</p>
<ul>
<li>actiontype: typepath of the action you want to give to grant_to.</li>
<li>grant_to: the mob we're giving actiontype to
returns TRUE if successfully granted</li>
</ul><h3 id="proc/grant_passenger_actions"><aside class="declaration">proc </aside>grant_passenger_actions<aside>(/<a href="mob.html">mob</a>/grant_to)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L131"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 131"></a></aside></h3><h2 id="grant-passenger-actions">grant_passenger_actions</h2>
<p>Called on every passenger that enters the vehicle, goes through the list of actions it needs to give...
and does that.
args:</p>
<ul>
<li>grant_to: mob that needs to get every action the vehicle grants</li>
</ul><h3 id="proc/initialize_controller_action_type"><aside class="declaration">proc </aside>initialize_controller_action_type<aside>(actiontype, control_flag)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L61"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 61"></a></aside></h3><h2 id="initialize-controller-action-type">initialize_controller_action_type</h2>
<p>Gives any passenger that enters the vehicle this action... IF they have the correct vehicle control flag.
This is used so passengers cannot press buttons only drivers should have, for example.
args:</p>
<ul>
<li>actiontype: typepath of the action you want to give occupants.</li>
</ul><h3 id="proc/initialize_passenger_action_type"><aside class="declaration">proc </aside>initialize_passenger_action_type<aside>(actiontype)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L36"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 36"></a></aside></h3><h2 id="initialize-passenger-action-type">initialize_passenger_action_type</h2>
<p>Gives any passenger that enters the mech this action.
They will lose it when they disembark.
args:</p>
<ul>
<li>actiontype: typepath of the action you want to give occupants.</li>
</ul><h3 id="proc/remove_action_type_from_mob"><aside class="declaration">proc </aside>remove_action_type_from_mob<aside>(actiontype, /<a href="mob.html">mob</a>/take_from)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L111"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 111"></a></aside></h3><h2 id="remove-action-type-from-mob">remove_action_type_from_mob</h2>
<p>As on the tin, it does all the annoying small stuff and sanity needed
to REMOVE an action to a mob.
args:</p>
<ul>
<li>actiontype: typepath of the action you want to give to grant_to.</li>
<li>take_from: the mob we're taking actiontype to
returns TRUE if successfully removed</li>
</ul><h3 id="proc/remove_passenger_actions"><aside class="declaration">proc </aside>remove_passenger_actions<aside>(/<a href="mob.html">mob</a>/take_from)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/vehicle_actions.dm#L143"><img src="git.png" width="16" height="16" title="code/modules/vehicles/vehicle_actions.dm 143"></a></aside></h3><h2 id="remove-passenger-actions">remove_passenger_actions</h2>
<p>Called on every passenger that exits the vehicle, goes through the list of actions it needs to remove...
and does that.
args:</p>
<ul>
<li>take_from: mob that needs to get every action the vehicle grants</li>
</ul><h3 id="proc/remove_trailer"><aside class="declaration">proc </aside>remove_trailer<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/vehicles/_vehicle.dm#L188"><img src="git.png" width="16" height="16" title="code/modules/vehicles/_vehicle.dm 188"></a></aside></h3><p>To remove a trailer from the vehicle in a manner that allows safe qdels</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>