<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/machinery/atmospherics - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/machinery/atmospherics.html#var">Var Details</a> - <a href="obj/machinery/atmospherics.html#proc">Proc Details</a></header><main><h1>atmospherics <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/atmospherics.html">atmospherics</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 13"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/can_unwrench">can_unwrench</a></th><td>Check if the object can be unwrenched</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/cap_overlay">cap_overlay</a></th><td>Cap overlay that is being added to turf's <code>vis_contents</code>, <code>null</code> if pipe was never hidden or has no valid connections</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/construction_type">construction_type</a></th><td>The path of the pipe/device that will spawn after unwrenching it (such as pipe fittings)</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/device_type">device_type</a></th><td>The type of the device (UNARY, BINARY, TRINARY, QUATERNARY)</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/has_cap_visuals">has_cap_visuals</a></th><td>Whether it will generate cap sprites when hidden</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/hide">hide</a></th><td>This only works on pipes, because they have 1000 subtypes which need to be visible and invisible under tiles, so we track this here</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/initialize_directions">initialize_directions</a></th><td>Bitflag of the initialized directions (NORTH | SOUTH | EAST | WEST)</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/nodes">nodes</a></th><td>The lists of nodes that a pipe/device has, depends on the device_type var (from 1 to 4)</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/on">on</a></th><td>Check if the device should be on or off (mostly used in processing for machines)</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/override_naming">override_naming</a></th><td>keeps the name of the object from being overridden if it's vareditted.</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/paintable">paintable</a></th><td>Whether it can be painted</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/pipe_color">pipe_color</a></th><td>The color of the pipe</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/pipe_flags">pipe_flags</a></th><td>The flags of the pipe/component (PIPING_ALL_LAYER | PIPING_ONE_PER_TURF | PIPING_DEFAULT_LAYER_ONLY | PIPING_CARDINAL_AUTONORMALIZE)</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/pipe_state">pipe_state</a></th><td>icon_state as a pipe item</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/pipe_vision_img">pipe_vision_img</a></th><td>The image of the pipe/device used for ventcrawling</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/piping_layer">piping_layer</a></th><td>What layer the pipe is in (from 1 to 5, default 3)</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/rebuilding">rebuilding</a></th><td>Is the thing being rebuilt by SSair or not. Prevents list bloat</td></tr><tr><th><a href="obj/machinery/atmospherics.html#var/vent_movement">vent_movement</a></th><td>The bitflag that's being checked on ventcrawling. Default is to allow ventcrawling and seeing pipes.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/atmos_init">atmos_init</a></th><td>Initialize for atmos devices</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/can_be_node">can_be_node</a></th><td>Check if a node can actually exists by connecting to another machine
called on atmos_init()
Arguments:</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/can_see_pipes">can_see_pipes</a></th><td>Used for certain children of obj/machinery/atmospherics to not show pipe vision when mob is inside it.</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/can_unwrench">can_unwrench</a></th><td>Getter for can_unwrench</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/connection_check">connection_check</a></th><td>Check the connection between two nodes</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/destroy_network">destroy_network</a></th><td>Called by the machinery disconnect(), custom for each type</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/disconnect">disconnect</a></th><td>Disconnects the nodes</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/find_connecting">find_connecting</a></th><td>Find a connecting /obj/machinery/atmospherics in specified direction, called by relaymove()
used by ventcrawling mobs to check if they can move inside a pipe in a specific direction
Arguments:</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/get_init_directions">get_init_directions</a></th><td>Getter of initial directions</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/get_node_connects">get_node_connects</a></th><td>Getter for node_connects</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/get_pipe_image">get_pipe_image</a></th><td>Getter for piping layer shifted, pipe colored overlays</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/get_rebuild_targets">get_rebuild_targets</a></th><td>Returns a list of new pipelines that need to be built up</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/is_connectable">is_connectable</a></th><td>check if the piping layer and color are the same on both sides (grey can connect to all colors)
returns TRUE or FALSE if the connection is possible or not
Arguments:</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/normalize_cardinal_directions">normalize_cardinal_directions</a></th><td>Setter for device direction</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/nullify_node">nullify_node</a></th><td>Called on destroy(mostly deconstruction) and when moving nodes around, disconnect the nodes from the network
Arguments:</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/on_deconstruction">on_deconstruction</a></th><td>Pipe deconstruction</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/on_hide">on_hide</a></th><td>Signal handler. Updates both our pipe cap visuals and those of adjacent nodes.
We update adjacent nodes as their pipe caps are based partially on our state, so they need updating as well.</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/paint">paint</a></th><td>Called by the RPD.dm pre_attack()
Arguments:</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/pipeline_expansion">pipeline_expansion</a></th><td>Called on construction and when expanding the datum_pipeline, returns the nodes of the device</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/portable_device_connected">portable_device_connected</a></th><td>Return TRUE if there is device connected to portables_connector</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/rebuild_pipes">rebuild_pipes</a></th><td>This should only be called by SSair as part of the rebuild queue.
Handles rebuilding pipelines after init or they've been changed.</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/replace_pipenet">replace_pipenet</a></th><td>Replaces the connection to the old_pipenet with the new_pipenet</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/return_pipenet">return_pipenet</a></th><td>Called by add_member() in datum_pipeline.dm, returns the parent network the device is connected to</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/return_pipenet_airs">return_pipenet_airs</a></th><td>Called by add_machinery_member() in datum_pipeline.dm, returns a list of gas_mixtures and assigns them into other_airs (by addMachineryMember) to allow pressure redistribution for the machineries.</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/return_pipenets">return_pipenets</a></th><td>Getter of a list of pipenets</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/set_init_directions">set_init_directions</a></th><td>Set the initial directions of the device (NORTH || SOUTH || EAST || WEST), called on New()</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/set_on">set_on</a></th><td>Turns the machine on/off
Arguments</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/set_pipe_color">set_pipe_color</a></th><td>Setter for pipe color, so we can ensure it's all uniform and save cpu time</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/set_pipenet">set_pipenet</a></th><td>Called by build_pipeline() and add_member() in datum_pipeline.dm, set the network the device is connected to, to the datum pipeline it has reference</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/set_piping_layer">set_piping_layer</a></th><td>setter for pipe layers</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/setup_hiding">setup_hiding</a></th><td>Sets up our pipe hiding logic, consolidated in one place so subtypes may override it.
This lets subtypes implement their own hiding logic without needing to worry about conflicts with the parent hiding logic.</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/shuttleRotate">shuttleRotate</a></th><td>Machine rotate procs</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/unsafe_pressure_release">unsafe_pressure_release</a></th><td>Pipe pressure release calculations</td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/update_cap_visuals">update_cap_visuals</a></th><td>Handles cap overlay addition and removal, won't do anything if <code>has_cap_visuals</code> is set to <code>FALSE</code></td></tr><tr><th><a href="obj/machinery/atmospherics.html#proc/update_layer">update_layer</a></th><td>Update the layer in which the pipe/device is in, that way pipes have consistent layer depending on piping_layer</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/can_unwrench"><aside class="declaration">var </aside>can_unwrench <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 27"></a></h3><p>Check if the object can be unwrenched</p><h3 id="var/cap_overlay"><aside class="declaration">var </aside>cap_overlay <aside>– /<a href="obj.html">obj</a>/effect/overlay/cap_visual</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L60"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 60"></a></h3><p>Cap overlay that is being added to turf's <code>vis_contents</code>, <code>null</code> if pipe was never hidden or has no valid connections</p><h3 id="var/construction_type"><aside class="declaration">var </aside>construction_type <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 49"></a></h3><p>The path of the pipe/device that will spawn after unwrenching it (such as pipe fittings)</p><h3 id="var/device_type"><aside class="declaration">var </aside>device_type <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L44"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 44"></a></h3><p>The type of the device (UNARY, BINARY, TRINARY, QUATERNARY)</p><h3 id="var/has_cap_visuals"><aside class="declaration">var </aside>has_cap_visuals <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L58"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 58"></a></h3><p>Whether it will generate cap sprites when hidden</p><h3 id="var/hide"><aside class="declaration">var </aside>hide <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 38"></a></h3><p>This only works on pipes, because they have 1000 subtypes which need to be visible and invisible under tiles, so we track this here</p><h3 id="var/initialize_directions"><aside class="declaration">var </aside>initialize_directions <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 29"></a></h3><p>Bitflag of the initialized directions (NORTH | SOUTH | EAST | WEST)</p><h3 id="var/nodes"><aside class="declaration">var </aside>nodes <aside>– /list/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/atmospherics.html">atmospherics</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L46"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 46"></a></h3><p>The lists of nodes that a pipe/device has, depends on the device_type var (from 1 to 4)</p><h3 id="var/on"><aside class="declaration">var </aside>on <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L53"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 53"></a></h3><p>Check if the device should be on or off (mostly used in processing for machines)</p><h3 id="var/override_naming"><aside class="declaration">var </aside>override_naming <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L69"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 69"></a></h3><p>keeps the name of the object from being overridden if it's vareditted.</p><h3 id="var/paintable"><aside class="declaration">var </aside>paintable <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L56"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 56"></a></h3><p>Whether it can be painted</p><h3 id="var/pipe_color"><aside class="declaration">var </aside>pipe_color <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 31"></a></h3><p>The color of the pipe</p><h3 id="var/pipe_flags"><aside class="declaration">var </aside>pipe_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 35"></a></h3><p>The flags of the pipe/component (PIPING_ALL_LAYER | PIPING_ONE_PER_TURF | PIPING_DEFAULT_LAYER_ONLY | PIPING_CARDINAL_AUTONORMALIZE)</p><h3 id="var/pipe_state"><aside class="declaration">var </aside>pipe_state <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L51"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 51"></a></h3><p>icon_state as a pipe item</p><h3 id="var/pipe_vision_img"><aside class="declaration">var </aside>pipe_vision_img <aside>– /<a href="image.html">image</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 41"></a></h3><p>The image of the pipe/device used for ventcrawling</p><h3 id="var/piping_layer"><aside class="declaration">var </aside>piping_layer <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 33"></a></h3><p>What layer the pipe is in (from 1 to 5, default 3)</p><h3 id="var/rebuilding"><aside class="declaration">var </aside>rebuilding <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L63"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 63"></a></h3><p>Is the thing being rebuilt by SSair or not. Prevents list bloat</p><h3 id="var/vent_movement"><aside class="declaration">var </aside>vent_movement <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L66"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 66"></a></h3><p>The bitflag that's being checked on ventcrawling. Default is to allow ventcrawling and seeing pipes.</p><h2 id="proc">Proc Details</h2><h3 id="proc/atmos_init"><aside class="declaration">proc </aside>atmos_init<aside>(/list/node_connects)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L287"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 287"></a></aside></h3><p>Initialize for atmos devices</p>
<p>initialize the nodes for each pipe/device, this is called just after the air controller sets up turfs
Arguments:</p>
<ul>
<li>list/node_connects - a list of the nodes on the device that can make a connection to other machines</li>
</ul><h3 id="proc/can_be_node"><aside class="declaration">proc </aside>can_be_node<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/atmospherics.html">atmospherics</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L305"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 305"></a></aside></h3><p>Check if a node can actually exists by connecting to another machine
called on atmos_init()
Arguments:</p>
<ul>
<li>obj/machinery/atmospherics/target - the machine we are connecting to</li>
</ul><h3 id="proc/can_see_pipes"><aside class="declaration">proc </aside>can_see_pipes<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L645"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 645"></a></aside></h3><p>Used for certain children of obj/machinery/atmospherics to not show pipe vision when mob is inside it.</p><h3 id="proc/can_unwrench"><aside class="declaration">proc </aside>can_unwrench<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L476"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 476"></a></aside></h3><p>Getter for can_unwrench</p>
<p>Called by wrench_act() to check if the device can be unwrenched, each device override this with custom code (like if on/operating can't unwrench)
Arguments:</p>
<ul>
<li>mob/user - the mob doing the act</li>
</ul><h3 id="proc/connection_check"><aside class="declaration">proc </aside>connection_check<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/atmospherics.html">atmospherics</a>/target, given_layer)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L317"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 317"></a></aside></h3><p>Check the connection between two nodes</p>
<p>Check if our machine and the target machine are connectable by both calling isConnectable and by checking that the directions and piping_layer are compatible
called by can_be_node() (for building a network) and find_connecting() (for ventcrawling)
Arguments:</p>
<ul>
<li>obj/machinery/atmospherics/target - the machinery we want to connect to</li>
<li>given_layer - the piping_layer we are checking</li>
</ul><h3 id="proc/destroy_network"><aside class="declaration">proc </aside>destroy_network<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L173"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 173"></a></aside></h3><p>Called by the machinery disconnect(), custom for each type</p><h3 id="proc/disconnect"><aside class="declaration">proc </aside>disconnect<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/atmospherics.html">atmospherics</a>/reference)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L405"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 405"></a></aside></h3><p>Disconnects the nodes</p>
<p>Called by nullify_node(), it disconnects two nodes by removing the reference id from the node itself that called this proc
Arguments:</p>
<ul>
<li>obj/machinery/atmospherics/reference - the machinery we are removing from the node connection</li>
</ul><h3 id="proc/find_connecting"><aside class="declaration">proc </aside>find_connecting<aside>(direction, prompted_layer)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L253"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 253"></a></aside></h3><p>Find a connecting /obj/machinery/atmospherics in specified direction, called by relaymove()
used by ventcrawling mobs to check if they can move inside a pipe in a specific direction
Arguments:</p>
<ul>
<li>direction - the direction we are checking against</li>
<li>prompted_layer - the piping_layer we are inside</li>
</ul><h3 id="proc/get_init_directions"><aside class="declaration">proc </aside>get_init_directions<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L371"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 371"></a></aside></h3><p>Getter of initial directions</p><h3 id="proc/get_node_connects"><aside class="declaration">proc </aside>get_node_connects<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L265"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 265"></a></aside></h3><p>Getter for node_connects</p>
<p>Return a list of the nodes that can connect to other machines, get called by atmos_init()</p><h3 id="proc/get_pipe_image"><aside class="declaration">proc </aside>get_pipe_image<aside>(iconfile, iconstate, direction, color, piping_layer, trinary)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L532"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 532"></a></aside></h3><p>Getter for piping layer shifted, pipe colored overlays</p>
<p>Creates the image for the pipe underlay that all components use, called by get_pipe_underlay() in components_base.dm
Arguments:</p>
<ul>
<li>iconfile  - path of the iconstate we are using (ex: 'icons/obj/machines/atmospherics/thermomachine.dmi')</li>
<li>iconstate - the image we are using inside the file</li>
<li>direction - the direction of our device</li>
<li>color - the color (in hex value, like #559900) that the pipe should have</li>
<li>piping_layer - the piping_layer the device is in, used inside PIPING_LAYER_SHIFT</li>
<li>trinary - if TRUE we also use PIPING_FORWARD_SHIFT on layer 1 and 5 for trinary devices (filters and mixers)</li>
</ul><h3 id="proc/get_rebuild_targets"><aside class="declaration">proc </aside>get_rebuild_targets<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L203"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 203"></a></aside></h3><p>Returns a list of new pipelines that need to be built up</p><h3 id="proc/is_connectable"><aside class="declaration">proc </aside>is_connectable<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/atmospherics.html">atmospherics</a>/target, given_layer)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L335"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 335"></a></aside></h3><p>check if the piping layer and color are the same on both sides (grey can connect to all colors)
returns TRUE or FALSE if the connection is possible or not
Arguments:</p>
<ul>
<li>obj/machinery/atmospherics/target - the machinery we want to connect to</li>
<li>given_layer - the piping_layer we are connecting to</li>
</ul><h3 id="proc/normalize_cardinal_directions"><aside class="declaration">proc </aside>normalize_cardinal_directions<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L223"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 223"></a></aside></h3><p>Setter for device direction</p>
<p>Set the direction to either SOUTH or WEST if the pipe_flag is set to PIPING_CARDINAL_AUTONORMALIZE, called in New(), used mostly by layer manifolds</p><h3 id="proc/nullify_node"><aside class="declaration">proc </aside>nullify_node<aside>(i)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L211"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 211"></a></aside></h3><p>Called on destroy(mostly deconstruction) and when moving nodes around, disconnect the nodes from the network
Arguments:</p>
<ul>
<li>i - is the current iteration of the node, based on the device_type (from 1 to 4)</li>
</ul><h3 id="proc/on_deconstruction"><aside class="parent"><a title="/obj/machinery" href="obj/machinery.html#proc/on_deconstruction">↑</a></aside>on_deconstruction<aside>(disassembled)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L509"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 509"></a></aside></h3><p>Pipe deconstruction</p>
<p>Called by wrench_act(), create a pipe fitting and remove the pipe</p><h3 id="proc/on_hide"><aside class="declaration">proc </aside>on_hide<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L141"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 141"></a></aside></h3><p>Signal handler. Updates both our pipe cap visuals and those of adjacent nodes.
We update adjacent nodes as their pipe caps are based partially on our state, so they need updating as well.</p><h3 id="proc/paint"><aside class="declaration">proc </aside>paint<aside>(paint_color)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L706"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 706"></a></aside></h3><p>Called by the RPD.dm pre_attack()
Arguments:</p>
<ul>
<li>paint_color - color that the pipe will be painted in (colors in hex like #4f4f4f)</li>
</ul><h3 id="proc/pipeline_expansion"><aside class="declaration">proc </aside>pipeline_expansion<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L359"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 359"></a></aside></h3><p>Called on construction and when expanding the datum_pipeline, returns the nodes of the device</p><h3 id="proc/portable_device_connected"><aside class="declaration">proc </aside>portable_device_connected<aside>(node)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L719"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 719"></a></aside></h3><p>Return TRUE if there is device connected to portables_connector</p><h3 id="proc/rebuild_pipes"><aside class="declaration">proc </aside>rebuild_pipes<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L194"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 194"></a></aside></h3><p>This should only be called by SSair as part of the rebuild queue.
Handles rebuilding pipelines after init or they've been changed.</p><h3 id="proc/replace_pipenet"><aside class="declaration">proc </aside>replace_pipenet<aside>(/<a href="datum.html">datum</a>/<a href="datum/pipeline.html">pipeline</a>/old_pipenet, /<a href="datum.html">datum</a>/<a href="datum/pipeline.html">pipeline</a>/new_pipenet)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L395"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 395"></a></aside></h3><p>Replaces the connection to the old_pipenet with the new_pipenet</p><h3 id="proc/return_pipenet"><aside class="declaration">proc </aside>return_pipenet<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L377"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 377"></a></aside></h3><p>Called by add_member() in datum_pipeline.dm, returns the parent network the device is connected to</p><h3 id="proc/return_pipenet_airs"><aside class="declaration">proc </aside>return_pipenet_airs<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L383"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 383"></a></aside></h3><p>Called by add_machinery_member() in datum_pipeline.dm, returns a list of gas_mixtures and assigns them into other_airs (by addMachineryMember) to allow pressure redistribution for the machineries.</p><h3 id="proc/return_pipenets"><aside class="declaration">proc </aside>return_pipenets<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L636"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 636"></a></aside></h3><p>Getter of a list of pipenets</p>
<p>called in relaymove() to create the image for vent crawling</p><h3 id="proc/set_init_directions"><aside class="declaration">proc </aside>set_init_directions<aside>(init_dir)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L365"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 365"></a></aside></h3><p>Set the initial directions of the device (NORTH || SOUTH || EAST || WEST), called on New()</p><h3 id="proc/set_on"><aside class="declaration">proc </aside>set_on<aside>(active)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L182"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 182"></a></aside></h3><p>Turns the machine on/off
Arguments</p>
<ul>
<li>active - the state of the machine</li>
</ul><h3 id="proc/set_pipe_color"><aside class="declaration">proc </aside>set_pipe_color<aside>(pipe_colour)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L714"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 714"></a></aside></h3><p>Setter for pipe color, so we can ensure it's all uniform and save cpu time</p><h3 id="proc/set_pipenet"><aside class="declaration">proc </aside>set_pipenet<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L389"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 389"></a></aside></h3><p>Called by build_pipeline() and add_member() in datum_pipeline.dm, set the network the device is connected to, to the datum pipeline it has reference</p><h3 id="proc/set_piping_layer"><aside class="declaration">proc </aside>set_piping_layer<aside>(new_layer)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L237"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 237"></a></aside></h3><p>setter for pipe layers</p>
<p>Set the layer of the pipe that the device has to a new_layer
Arguments:</p>
<ul>
<li>new_layer - the layer at which we want the piping_layer to be (1 to 5)</li>
</ul><h3 id="proc/setup_hiding"><aside class="declaration">proc </aside>setup_hiding<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L133"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 133"></a></aside></h3><p>Sets up our pipe hiding logic, consolidated in one place so subtypes may override it.
This lets subtypes implement their own hiding logic without needing to worry about conflicts with the parent hiding logic.</p><h3 id="proc/shuttleRotate"><aside class="parent"><a title="/atom/movable" href="atom/movable.html#proc/shuttleRotate">↑</a></aside>shuttleRotate<aside>(rotation, params)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/shuttle/mobile_port/shuttle_rotate_callbacks.dm#L82"><img src="git.png" width="16" height="16" title="code/modules/shuttle/mobile_port/shuttle_rotate_callbacks.dm 82"></a></aside></h3><p>Machine rotate procs</p><h3 id="proc/unsafe_pressure_release"><aside class="declaration">proc </aside>unsafe_pressure_release<aside>(/<a href="mob.html">mob</a>/user, pressures)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L488"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 488"></a></aside></h3><p>Pipe pressure release calculations</p>
<p>Throws the user when they unwrench a pipe with a major difference between the internal and environmental pressure.
Called by wrench_act() before deconstruct()
Arguments:</p>
<ul>
<li>mob_user - the mob doing the act</li>
<li>pressures - it can be passed on from wrench_act(), it's the pressure difference between the environment pressure and the pipe internal pressure</li>
</ul><h3 id="proc/update_cap_visuals"><aside class="declaration">proc </aside>update_cap_visuals<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L657"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 657"></a></aside></h3><p>Handles cap overlay addition and removal, won't do anything if <code>has_cap_visuals</code> is set to <code>FALSE</code></p><h3 id="proc/update_layer"><aside class="declaration">proc </aside>update_layer<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/atmospherics/machinery/atmosmachinery.dm#L651"><img src="git.png" width="16" height="16" title="code/modules/atmospherics/machinery/atmosmachinery.dm 651"></a></aside></h3><p>Update the layer in which the pipe/device is in, that way pipes have consistent layer depending on piping_layer</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>