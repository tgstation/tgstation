<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/machinery/quantum_server - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/machinery/quantum_server.html#var">Var Details</a> - <a href="obj/machinery/quantum_server.html#proc">Proc Details</a></header><main><h1>quantum_server <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/quantum_server.html">quantum_server</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L4"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 4"></a></h1><p>The base object for the quantum server</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/avatar_connection_refs">avatar_connection_refs</a></th><td>Current plugged in users</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/broadcast_toggle_cd">broadcast_toggle_cd</a></th><td>Cooldown between being able to toggle broadcasting</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/broadcasting">broadcasting</a></th><td>Determines if we broadcast to entertainment monitors or not</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/capacitor_coefficient">capacitor_coefficient</a></th><td>Affects server cooldown efficiency</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/domain_randomized">domain_randomized</a></th><td>If the current domain was a random selection</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/exit_turfs">exit_turfs</a></th><td>The turfs we can place a hololadder on.</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/generated_domain">generated_domain</a></th><td>The loaded map template, map_template/virtual_domain</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/glitch_chance">glitch_chance</a></th><td>Chance multipled by threat to spawn a glitch</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/is_ready">is_ready</a></th><td>Prevents multiple user actions. Handled by loading domains and cooldowns</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/multiplayer_bonus">multiplayer_bonus</a></th><td>Scales loot with extra players</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/mutation_candidate_refs">mutation_candidate_refs</a></th><td>Cached list of mutable mobs in zone for cybercops</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/nohit_bonus">nohit_bonus</a></th><td>Extra bonus for every player that nohits the run</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/points">points</a></th><td>The amount of points in the system, used to purchase maps</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/polling_cooldown">polling_cooldown</a></th><td>Cooldown for how often you're allowed to harass deadchat for PVP domains</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/retries_spent">retries_spent</a></th><td>Keeps track of the number of times someone has built a hololadder</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/scanner_tier">scanner_tier</a></th><td>Changes how much info is available on the domain</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/server_cooldown_time">server_cooldown_time</a></th><td>Length of time it takes for the server to cool down after resetting. Here to give runners downtime so their faces don't get stuck like that</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/servo_bonus">servo_bonus</a></th><td>Applies bonuses to rewards etc</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/spawned_threat_refs">spawned_threat_refs</a></th><td>Any ghosts that have spawned in</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/threat">threat</a></th><td>Determines the glitches available to spawn, builds with completion</td></tr><tr><th><a href="obj/machinery/quantum_server.html#var/threat_prob_max">threat_prob_max</a></th><td>Maximum rate at which a glitch can spawn</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/add_threats">add_threats</a></th><td>Adds threats to the list and notifies players</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/attempt_spawn_cache">attempt_spawn_cache</a></th><td>Attempts to spawn a crate twice based on the list of available locations</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/attempt_spawn_curiosity">attempt_spawn_curiosity</a></th><td>Attempts to spawn a lootbox</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/begin_shutdown">begin_shutdown</a></th><td>Gives all current occupants a notification that the server is going down</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/calculate_rewards">calculate_rewards</a></th><td>Handles calculating rewards based on number of players, parts, threats, etc</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/can_generate_tech_disk">can_generate_tech_disk</a></th><td>Checks if the players should get a bepis reward</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/cold_boot_map">cold_boot_map</a></th><td>Links all the loading processes together - does validation for booting a map</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/cool_off">cool_off</a></th><td>Resets the cooldown state and updates icons</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/generate_avatar">generate_avatar</a></th><td>Generates a new avatar for the bitrunner.</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/generate_loot">generate_loot</a></th><td>Handles spawning the (new) crate and deleting the former</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/generate_secondary_loot">generate_secondary_loot</a></th><td>Builds secondary loot if the achievements were met</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_antagonist_role">get_antagonist_role</a></th><td>Choses which antagonist role is spawned based on threat</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_avatar_data">get_avatar_data</a></th><td>If there are hosted minds, attempts to get a list of their current virtual bodies w/ vitals</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_avatar_destination">get_avatar_destination</a></th><td>I grab the atom here so I can signal it / manipulate spawners etc</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_completion_certificate">get_completion_certificate</a></th><td>Returns the markdown text containing domain completion information</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_multiplayer_bonus">get_multiplayer_bonus</a></th><td>Calculates total bonus from completing the domain in multiplayer</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_mutation_target">get_mutation_target</a></th><td>Selects a target to mutate. Gives two attempts, then crashes if it fails.</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_nohit_bouns">get_nohit_bouns</a></th><td>Calculates total bonus from completing the domain without taking damage</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_random_domain_id">get_random_domain_id</a></th><td>Gets a random available domain given the current points.</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/get_random_nearby_forge">get_random_nearby_forge</a></th><td>Locates any turfs with forges on them, returns a random one</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/grade_completion">grade_completion</a></th><td>Grades the player's run based on several factors</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/load_domain">load_domain</a></th><td>Initializes a new domain if the given key is valid and the user has enough points</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/load_map_items">load_map_items</a></th><td>Loads in necessary map items like hololadder spawns, caches, etc</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/load_mob_segments">load_mob_segments</a></th><td>Loads in any mob segments of the map</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/notify_spawned_threats">notify_spawned_threats</a></th><td>Finds any mobs with minds in the zones and gives them the bad news</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/on_broken">on_broken</a></th><td>If broken via signal, disconnects all users</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/on_corpse_spawned">on_corpse_spawned</a></th><td>Whenever a corpse spawner makes a new corpse, add it to the list of potential mutations</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/on_delete">on_delete</a></th><td>Being qdeleted - make sure the circuit and connected mobs go with it</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/on_goal_turf_entered">on_goal_turf_entered</a></th><td>Whenever something enters the send tiles, check if it's a loot crate. If so, alert players.</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/on_goal_turf_examined">on_goal_turf_examined</a></th><td>Handles examining the server. Shows cooldown time and efficiency.</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/on_template_loaded">on_template_loaded</a></th><td>Scans over the inbound created_atoms from lazy templates</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/on_threat_created">on_threat_created</a></th><td>Handles when cybercops are summoned into the area or ghosts click a ghost role spawner</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/remove_threat">remove_threat</a></th><td>Removes a specific threat - used when station spawning</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/reset">reset</a></th><td>Stops the current virtual domain and disconnects all users</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/reset_equipment">reset_equipment</a></th><td>Removes all blacklisted items from a mob and returns them to base state</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/scrub_vdom">scrub_vdom</a></th><td>Tries to clean up everything in the domain</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/setup_glitch">setup_glitch</a></th><td>Selects the role and waits for a ghost orbiter</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/sever_connections">sever_connections</a></th><td>Severs any connected users</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/spark_at_location">spark_at_location</a></th><td>Do some magic teleport sparks</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/spawn_glitch">spawn_glitch</a></th><td>Orbit poll has concluded - spawn the antag</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/start_new_connection">start_new_connection</a></th><td>Starts building a new avatar for the player.
Called by netpods when they don't have a current avatar.
This is a procedural proc which links several others together.</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/station_spawn">station_spawn</a></th><td>Oh boy - transports the antag station side</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/stock_gear">stock_gear</a></th><td>Scans over neo's contents for bitrunning tech disks. Loads the items or abilities onto the avatar.</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/toggle_broadcast">toggle_broadcast</a></th><td>Toggles broadcast on and off</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/validate_mutation_candidates">validate_mutation_candidates</a></th><td>Removes any invalid candidates from the list</td></tr><tr><th><a href="obj/machinery/quantum_server.html#proc/validate_turf">validate_turf</a></th><td>Returns a turf if it's not dense, else will find a neighbor.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/avatar_connection_refs"><aside class="declaration">var </aside>avatar_connection_refs <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L24"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 24"></a></h3><p>Current plugged in users</p><h3 id="var/broadcast_toggle_cd"><aside class="declaration">var </aside>broadcast_toggle_cd <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 52"></a></h3><p>Cooldown between being able to toggle broadcasting</p><h3 id="var/broadcasting"><aside class="declaration">var </aside>broadcasting <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L50"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 50"></a></h3><p>Determines if we broadcast to entertainment monitors or not</p><h3 id="var/capacitor_coefficient"><aside class="declaration">var </aside>capacitor_coefficient <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 14"></a></h3><p>Affects server cooldown efficiency</p><h3 id="var/domain_randomized"><aside class="declaration">var </aside>domain_randomized <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 18"></a></h3><p>If the current domain was a random selection</p><h3 id="var/exit_turfs"><aside class="declaration">var </aside>exit_turfs <aside>– /list/<a href="turf.html">turf</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L48"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 48"></a></h3><p>The turfs we can place a hololadder on.</p><h3 id="var/generated_domain"><aside class="declaration">var </aside>generated_domain <aside>– /<a href="datum.html">datum</a>/<a href="datum/lazy_template.html">lazy_template</a>/<a href="datum/lazy_template/virtual_domain.html">virtual_domain</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 16"></a></h3><p>The loaded map template, map_template/virtual_domain</p><h3 id="var/glitch_chance"><aside class="declaration">var </aside>glitch_chance <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 22"></a></h3><p>Chance multipled by threat to spawn a glitch</p><h3 id="var/is_ready"><aside class="declaration">var </aside>is_ready <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L20"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 20"></a></h3><p>Prevents multiple user actions. Handled by loading domains and cooldowns</p><h3 id="var/multiplayer_bonus"><aside class="declaration">var </aside>multiplayer_bonus <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L30"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 30"></a></h3><p>Scales loot with extra players</p><h3 id="var/mutation_candidate_refs"><aside class="declaration">var </aside>mutation_candidate_refs <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L26"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 26"></a></h3><p>Cached list of mutable mobs in zone for cybercops</p><h3 id="var/nohit_bonus"><aside class="declaration">var </aside>nohit_bonus <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L32"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 32"></a></h3><p>Extra bonus for every player that nohits the run</p><h3 id="var/points"><aside class="declaration">var </aside>points <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L34"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 34"></a></h3><p>The amount of points in the system, used to purchase maps</p><h3 id="var/polling_cooldown"><aside class="declaration">var </aside>polling_cooldown <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L54"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 54"></a></h3><p>Cooldown for how often you're allowed to harass deadchat for PVP domains</p><h3 id="var/retries_spent"><aside class="declaration">var </aside>retries_spent <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L36"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 36"></a></h3><p>Keeps track of the number of times someone has built a hololadder</p><h3 id="var/scanner_tier"><aside class="declaration">var </aside>scanner_tier <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 38"></a></h3><p>Changes how much info is available on the domain</p><h3 id="var/server_cooldown_time"><aside class="declaration">var </aside>server_cooldown_time <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L40"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 40"></a></h3><p>Length of time it takes for the server to cool down after resetting. Here to give runners downtime so their faces don't get stuck like that</p><h3 id="var/servo_bonus"><aside class="declaration">var </aside>servo_bonus <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L42"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 42"></a></h3><p>Applies bonuses to rewards etc</p><h3 id="var/spawned_threat_refs"><aside class="declaration">var </aside>spawned_threat_refs <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L28"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 28"></a></h3><p>Any ghosts that have spawned in</p><h3 id="var/threat"><aside class="declaration">var </aside>threat <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L44"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 44"></a></h3><p>Determines the glitches available to spawn, builds with completion</p><h3 id="var/threat_prob_max"><aside class="declaration">var </aside>threat_prob_max <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/_parent.dm#L46"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/_parent.dm 46"></a></h3><p>Maximum rate at which a glitch can spawn</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_threats"><aside class="declaration">proc </aside>add_threats<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/threat)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 2"></a></aside></h3><p>Adds threats to the list and notifies players</p><h3 id="proc/attempt_spawn_cache"><aside class="declaration">proc </aside>attempt_spawn_cache<aside>(/list/possible_turfs)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/obj_generation.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/obj_generation.dm 2"></a></aside></h3><p>Attempts to spawn a crate twice based on the list of available locations</p><h3 id="proc/attempt_spawn_curiosity"><aside class="declaration">proc </aside>attempt_spawn_curiosity<aside>(/list/possible_turfs)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/obj_generation.dm#L20"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/obj_generation.dm 20"></a></aside></h3><p>Attempts to spawn a lootbox</p><h3 id="proc/begin_shutdown"><aside class="declaration">proc </aside>begin_shutdown<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/map_handling.dm#L4"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/map_handling.dm 4"></a></aside></h3><p>Gives all current occupants a notification that the server is going down</p><h3 id="proc/calculate_rewards"><aside class="declaration">proc </aside>calculate_rewards<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/loot.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/loot.dm 9"></a></aside></h3><p>Handles calculating rewards based on number of players, parts, threats, etc</p><h3 id="proc/can_generate_tech_disk"><aside class="declaration">proc </aside>can_generate_tech_disk<aside>(grade)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/loot.dm#L151"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/loot.dm 151"></a></aside></h3><p>Checks if the players should get a bepis reward</p><h3 id="proc/cold_boot_map"><aside class="declaration">proc </aside>cold_boot_map<aside>(map_key, was_random_selection)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/map_handling.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/map_handling.dm 31"></a></aside></h3><p>Links all the loading processes together - does validation for booting a map</p><h3 id="proc/cool_off"><aside class="declaration">proc </aside>cool_off<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 5"></a></aside></h3><p>Resets the cooldown state and updates icons</p><h3 id="proc/generate_avatar"><aside class="declaration">proc </aside>generate_avatar<aside>(/<a href="turf.html">turf</a>/destination, /<a href="datum.html">datum</a>/<a href="datum/outfit.html">outfit</a>/netsuit)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/obj_generation.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/obj_generation.dm 41"></a></aside></h3><p>Generates a new avatar for the bitrunner.</p><h3 id="proc/generate_loot"><aside class="declaration">proc </aside>generate_loot<aside>(/<a href="obj.html">obj</a>/cache, /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/byteforge.html">byteforge</a>/chosen_forge)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/loot.dm#L51"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/loot.dm 51"></a></aside></h3><p>Handles spawning the (new) crate and deleting the former</p><h3 id="proc/generate_secondary_loot"><aside class="declaration">proc </aside>generate_secondary_loot<aside>(/<a href="obj.html">obj</a>/curiosity, /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/byteforge.html">byteforge</a>/chosen_forge)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/loot.dm#L87"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/loot.dm 87"></a></aside></h3><p>Builds secondary loot if the achievements were met</p><h3 id="proc/get_antagonist_role"><aside class="declaration">proc </aside>get_antagonist_role<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 9"></a></aside></h3><p>Choses which antagonist role is spawned based on threat</p><h3 id="proc/get_avatar_data"><aside class="declaration">proc </aside>get_avatar_data<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 12"></a></aside></h3><p>If there are hosted minds, attempts to get a list of their current virtual bodies w/ vitals</p><h3 id="proc/get_avatar_destination"><aside class="declaration">proc </aside>get_avatar_destination<aside>() <span class="as"> as </span>/<a href="atom.html">atom</a> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 38"></a></aside></h3><p>I grab the atom here so I can signal it / manipulate spawners etc</p><h3 id="proc/get_completion_certificate"><aside class="declaration">proc </aside>get_completion_certificate<aside>(time_difference, grade)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/loot.dm#L99"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/loot.dm 99"></a></aside></h3><p>Returns the markdown text containing domain completion information</p><h3 id="proc/get_multiplayer_bonus"><aside class="declaration">proc </aside>get_multiplayer_bonus<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/loot.dm#L26"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/loot.dm 26"></a></aside></h3><p>Calculates total bonus from completing the domain in multiplayer</p><h3 id="proc/get_mutation_target"><aside class="declaration">proc </aside>get_mutation_target<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 25"></a></aside></h3><p>Selects a target to mutate. Gives two attempts, then crashes if it fails.</p><h3 id="proc/get_nohit_bouns"><aside class="declaration">proc </aside>get_nohit_bouns<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/loot.dm#L39"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/loot.dm 39"></a></aside></h3><p>Calculates total bonus from completing the domain without taking damage</p><h3 id="proc/get_random_domain_id"><aside class="declaration">proc </aside>get_random_domain_id<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L90"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 90"></a></aside></h3><p>Gets a random available domain given the current points.</p><h3 id="proc/get_random_nearby_forge"><aside class="declaration">proc </aside>get_random_nearby_forge<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L80"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 80"></a></aside></h3><p>Locates any turfs with forges on them, returns a random one</p><h3 id="proc/grade_completion"><aside class="declaration">proc </aside>grade_completion<aside>(completion_time)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/loot.dm#L166"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/loot.dm 166"></a></aside></h3><p>Grades the player's run based on several factors</p><h3 id="proc/load_domain"><aside class="declaration">proc </aside>load_domain<aside>(map_key)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/map_handling.dm#L97"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/map_handling.dm 97"></a></aside></h3><p>Initializes a new domain if the given key is valid and the user has enough points</p><h3 id="proc/load_map_items"><aside class="declaration">proc </aside>load_map_items<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/map_handling.dm#L137"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/map_handling.dm 137"></a></aside></h3><p>Loads in necessary map items like hololadder spawns, caches, etc</p><h3 id="proc/load_mob_segments"><aside class="declaration">proc </aside>load_mob_segments<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/obj_generation.dm#L99"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/obj_generation.dm 99"></a></aside></h3><p>Loads in any mob segments of the map</p><h3 id="proc/notify_spawned_threats"><aside class="declaration">proc </aside>notify_spawned_threats<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L42"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 42"></a></aside></h3><p>Finds any mobs with minds in the zones and gives them the bad news</p><h3 id="proc/on_broken"><aside class="declaration">proc </aside>on_broken<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/signal_handlers.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/signal_handlers.dm 2"></a></aside></h3><p>If broken via signal, disconnects all users</p><h3 id="proc/on_corpse_spawned"><aside class="declaration">proc </aside>on_corpse_spawned<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/corpse)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/signal_handlers.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/signal_handlers.dm 9"></a></aside></h3><p>Whenever a corpse spawner makes a new corpse, add it to the list of potential mutations</p><h3 id="proc/on_delete"><aside class="declaration">proc </aside>on_delete<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/signal_handlers.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/signal_handlers.dm 16"></a></aside></h3><p>Being qdeleted - make sure the circuit and connected mobs go with it</p><h3 id="proc/on_goal_turf_entered"><aside class="declaration">proc </aside>on_goal_turf_entered<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/arrived, /<a href="atom.html">atom</a>/old_loc, /list/<a href="atom.html">atom</a>/old_locs)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/signal_handlers.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/signal_handlers.dm 33"></a></aside></h3><p>Whenever something enters the send tiles, check if it's a loot crate. If so, alert players.</p><h3 id="proc/on_goal_turf_examined"><aside class="declaration">proc </aside>on_goal_turf_examined<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/examiner, /list/examine_text)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/signal_handlers.dm#L59"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/signal_handlers.dm 59"></a></aside></h3><p>Handles examining the server. Shows cooldown time and efficiency.</p><h3 id="proc/on_template_loaded"><aside class="declaration">proc </aside>on_template_loaded<aside>(/<a href="datum.html">datum</a>/<a href="datum/lazy_template.html">lazy_template</a>/source, /list/created_atoms)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/signal_handlers.dm#L67"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/signal_handlers.dm 67"></a></aside></h3><p>Scans over the inbound created_atoms from lazy templates</p><h3 id="proc/on_threat_created"><aside class="declaration">proc </aside>on_threat_created<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/threat)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/signal_handlers.dm#L113"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/signal_handlers.dm 113"></a></aside></h3><p>Handles when cybercops are summoned into the area or ghosts click a ghost role spawner</p><h3 id="proc/remove_threat"><aside class="declaration">proc </aside>remove_threat<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/threat)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L60"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 60"></a></aside></h3><p>Removes a specific threat - used when station spawning</p><h3 id="proc/reset"><aside class="declaration">proc </aside>reset<aside>(fast)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/map_handling.dm#L201"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/map_handling.dm 201"></a></aside></h3><p>Stops the current virtual domain and disconnects all users</p><h3 id="proc/reset_equipment"><aside class="declaration">proc </aside>reset_equipment<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/person)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L114"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 114"></a></aside></h3><p>Removes all blacklisted items from a mob and returns them to base state</p><h3 id="proc/scrub_vdom"><aside class="declaration">proc </aside>scrub_vdom<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/map_handling.dm#L223"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/map_handling.dm 223"></a></aside></h3><p>Tries to clean up everything in the domain</p><h3 id="proc/setup_glitch"><aside class="declaration">proc </aside>setup_glitch<aside>(/<a href="datum.html">datum</a>/<a href="datum/antagonist.html">antagonist</a>/<a href="datum/antagonist/bitrunning_glitch.html">bitrunning_glitch</a>/forced_role)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L65"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 65"></a></aside></h3><p>Selects the role and waits for a ghost orbiter</p><h3 id="proc/sever_connections"><aside class="declaration">proc </aside>sever_connections<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L128"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 128"></a></aside></h3><p>Severs any connected users</p><h3 id="proc/spark_at_location"><aside class="declaration">proc </aside>spark_at_location<aside>(/<a href="obj.html">obj</a>/cache)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L136"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 136"></a></aside></h3><p>Do some magic teleport sparks</p><h3 id="proc/spawn_glitch"><aside class="declaration">proc </aside>spawn_glitch<aside>(/<a href="datum.html">datum</a>/<a href="datum/antagonist.html">antagonist</a>/<a href="datum/antagonist/bitrunning_glitch.html">bitrunning_glitch</a>/chosen_role, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/mutation_target, /<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/<a href="mob/dead/observer.html">observer</a>/ghost)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L93"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 93"></a></aside></h3><p>Orbit poll has concluded - spawn the antag</p><h3 id="proc/start_new_connection"><aside class="declaration">proc </aside>start_new_connection<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/neo, /<a href="datum.html">datum</a>/<a href="datum/outfit.html">outfit</a>/netsuit) <span class="as"> as </span>/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L144"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 144"></a></aside></h3><p>Starts building a new avatar for the player.
Called by netpods when they don't have a current avatar.
This is a procedural proc which links several others together.</p><h3 id="proc/station_spawn"><aside class="declaration">proc </aside>station_spawn<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/antag, /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/byteforge.html">byteforge</a>/chosen_forge)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L131"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 131"></a></aside></h3><p>Oh boy - transports the antag station side</p><h3 id="proc/stock_gear"><aside class="declaration">proc </aside>stock_gear<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/avatar, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/neo, /<a href="datum.html">datum</a>/<a href="datum/lazy_template.html">lazy_template</a>/<a href="datum/lazy_template/virtual_domain.html">virtual_domain</a>/generated_domain)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/obj_generation.dm#L131"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/obj_generation.dm 131"></a></aside></h3><p>Scans over neo's contents for bitrunning tech disks. Loads the items or abilities onto the avatar.</p><h3 id="proc/toggle_broadcast"><aside class="declaration">proc </aside>toggle_broadcast<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L169"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 169"></a></aside></h3><p>Toggles broadcast on and off</p><h3 id="proc/validate_mutation_candidates"><aside class="declaration">proc </aside>validate_mutation_candidates<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/threats.dm#L179"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/threats.dm 179"></a></aside></h3><p>Removes any invalid candidates from the list</p><h3 id="proc/validate_turf"><aside class="declaration">proc </aside>validate_turf<aside>(/<a href="turf.html">turf</a>/chosen_turf)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/server/util.dm#L184"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/server/util.dm 184"></a></aside></h3><p>Returns a turf if it's not dense, else will find a neighbor.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>