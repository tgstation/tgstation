<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/machinery/ore_silo - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/machinery/ore_silo.html#var">Var Details</a> - <a href="obj/machinery/ore_silo.html#proc">Proc Details</a></header><main><h1>ore_silo <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/ore_silo.html">ore_silo</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L26"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 26"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/machinery/ore_silo.html#var/ID_required">ID_required</a></th><td>Only the station loaded ore silo starts out with ID restrictions, else its optional</td></tr><tr><th><a href="obj/machinery/ore_silo.html#var/announcement_messages">announcement_messages</a></th><td>List of announcement messages for silo restrictions</td></tr><tr><th><a href="obj/machinery/ore_silo.html#var/banned_users">banned_users</a></th><td>A list of names of bank account IDs that are banned from using this ore silo.</td></tr><tr><th><a href="obj/machinery/ore_silo.html#var/holds">holds</a></th><td>List of all connected components that are on hold from accessing materials.</td></tr><tr><th><a href="obj/machinery/ore_silo.html#var/materials">materials</a></th><td>Material Container</td></tr><tr><th><a href="obj/machinery/ore_silo.html#var/ore_connected_machines">ore_connected_machines</a></th><td>List of all components that are sharing ores with this silo.</td></tr><tr><th><a href="obj/machinery/ore_silo.html#var/radio">radio</a></th><td>The machine's internal radio, used to broadcast alerts.</td></tr><tr><th><a href="obj/machinery/ore_silo.html#var/radio_channels">radio_channels</a></th><td>The channels we announce over</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/machinery/ore_silo.html#proc/attempt_ban_toggle">attempt_ban_toggle</a></th><td>Called from the ore silo's UI, when someone attempts to (un)ban a user from using the ore silo.
The person doing the banning should have at least QM access. Unless this is emagged. Not modifiable by silicons unless emagged.
Anyone but the Captain attempting to ban someone with QM access from the ore silo gets what is essentially a glorified version
of the permission denied result.</td></tr><tr><th><a href="obj/machinery/ore_silo.html#proc/attempt_toggle_restrict">attempt_toggle_restrict</a></th><td>Called from the ore silo tgui interface, for when someone attempts to restrict or unrestrict the ore silo from requiring
an ID with an attached bank account (or, a chameleon ID, or, being a silicon)
user - the person who tried to toggle the ore silo's access restriction. Needs to be someone with QM access, unless the
silo is emagged. Shouldn't allow silicons to toggle this unless the silo is emagged.</td></tr><tr><th><a href="obj/machinery/ore_silo.html#proc/configure_default_announcements_policy">configure_default_announcements_policy</a></th><td>Set up the default announcement policy for actions
radio_channels[channel_name_key] = policy_bitmask
where channel_name_key is one of RADIO_CHANNEL_(COMMON|COMMAND|SECURITY|SUPPLY)
and policy_bitmask is a bitmask of actions that will be announced on that channel
by default</td></tr><tr><th><a href="obj/machinery/ore_silo.html#proc/connect_receptacle">connect_receptacle</a></th><td>The logic for disconnecting a remote receptacle (RCD, fabricator, etc.) is collected here for sanity's sake
rather than being on specific types. Serves to agnosticize the remote_materials component somewhat rather than
snowflaking code for silos into the component.</td></tr><tr><th><a href="obj/machinery/ore_silo.html#proc/disconnect_receptacle">disconnect_receptacle</a></th><td>The logic for disconnecting a remote receptacle (RCD, fabricator, etc.) is collected here for sanity's sake
rather than being on specific types. Cleans up references to us and to the receptacle.</td></tr><tr><th><a href="obj/machinery/ore_silo.html#proc/silo_log">silo_log</a></th><td>Creates a log entry for depositing/withdrawing from the silo both ingame and in text based log</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/ID_required"><aside class="declaration">var </aside>ID_required <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L37"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 37"></a></h3><p>Only the station loaded ore silo starts out with ID restrictions, else its optional</p><h3 id="var/announcement_messages"><aside class="declaration">var </aside>announcement_messages <aside>– /static/alist</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L56"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 56"></a></h3><p>List of announcement messages for silo restrictions</p><h3 id="var/banned_users"><aside class="declaration">var </aside>banned_users <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L45"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 45"></a></h3><p>A list of names of bank account IDs that are banned from using this ore silo.</p><h3 id="var/holds"><aside class="declaration">var </aside>holds <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L39"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 39"></a></h3><p>List of all connected components that are on hold from accessing materials.</p><h3 id="var/materials"><aside class="declaration">var </aside>materials <aside>– /<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/material_container.html">material_container</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L43"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 43"></a></h3><p>Material Container</p><h3 id="var/ore_connected_machines"><aside class="declaration">var </aside>ore_connected_machines <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/remote_materials.html">remote_materials</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 41"></a></h3><p>List of all components that are sharing ores with this silo.</p><h3 id="var/radio"><aside class="declaration">var </aside>radio <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/radio.html">radio</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L47"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 47"></a></h3><p>The machine's internal radio, used to broadcast alerts.</p><h3 id="var/radio_channels"><aside class="declaration">var </aside>radio_channels <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 49"></a></h3><p>The channels we announce over</p><h2 id="proc">Proc Details</h2><h3 id="proc/attempt_ban_toggle"><aside class="declaration">proc </aside>attempt_ban_toggle<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, /list/target_user_data)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L353"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 353"></a></aside></h3><p>Called from the ore silo's UI, when someone attempts to (un)ban a user from using the ore silo.
The person doing the banning should have at least QM access. Unless this is emagged. Not modifiable by silicons unless emagged.
Anyone but the Captain attempting to ban someone with QM access from the ore silo gets what is essentially a glorified version
of the permission denied result.</p>
<ul>
<li>user - The person who clicked the ban button in the UI.</li>
<li>target_user_data - Data in the form rendered from ID_DATA(target), passed into the ore silo logs by whatever the target did such
as removing/adding sheets, printing items, etc</li>
</ul><h3 id="proc/attempt_toggle_restrict"><aside class="declaration">proc </aside>attempt_toggle_restrict<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L438"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 438"></a></aside></h3><p>Called from the ore silo tgui interface, for when someone attempts to restrict or unrestrict the ore silo from requiring
an ID with an attached bank account (or, a chameleon ID, or, being a silicon)
user - the person who tried to toggle the ore silo's access restriction. Needs to be someone with QM access, unless the
silo is emagged. Shouldn't allow silicons to toggle this unless the silo is emagged.</p><h3 id="proc/configure_default_announcements_policy"><aside class="declaration">proc </aside>configure_default_announcements_policy<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L474"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 474"></a></aside></h3><p>Set up the default announcement policy for actions
radio_channels[channel_name_key] = policy_bitmask
where channel_name_key is one of RADIO_CHANNEL_(COMMON|COMMAND|SECURITY|SUPPLY)
and policy_bitmask is a bitmask of actions that will be announced on that channel
by default</p><h3 id="proc/connect_receptacle"><aside class="declaration">proc </aside>connect_receptacle<aside>(/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/remote_materials.html">remote_materials</a>/receptacle, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/physical_receptacle)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L186"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 186"></a></aside></h3><p>The logic for disconnecting a remote receptacle (RCD, fabricator, etc.) is collected here for sanity's sake
rather than being on specific types. Serves to agnosticize the remote_materials component somewhat rather than
snowflaking code for silos into the component.</p>
<ul>
<li>receptacle - The datum/component/remote_materials component that is getting connected.</li>
<li>physical_receptacle - the actual object in the game world that was connected to our material supply. Typed as atom/movable for
future-proofing against anything that may conceivably one day have remote silo access, such as a cyborg, an implant, structures, vehicles,
and so-on.</li>
</ul><h3 id="proc/disconnect_receptacle"><aside class="declaration">proc </aside>disconnect_receptacle<aside>(/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/remote_materials.html">remote_materials</a>/receptacle, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/physical_receptacle)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L200"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 200"></a></aside></h3><p>The logic for disconnecting a remote receptacle (RCD, fabricator, etc.) is collected here for sanity's sake
rather than being on specific types. Cleans up references to us and to the receptacle.</p>
<ul>
<li>receptacle - The datum/component/remote_materials component that is getting destroyed.</li>
<li>physical_receptacle - the actual object in the game world that was connected to our material supply. Typed as atom/movable for
future-proofing against anything that may conceivably one day have remote silo access, such as a cyborg, an implant, structures, vehicles,
and so-on.</li>
</ul><h3 id="proc/silo_log"><aside class="declaration">proc </aside>silo_log<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/M, action, amount, noun, /list/mats, /alist/user_data)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/mining/machine_silo.dm#L538"><img src="git.png" width="16" height="16" title="code/modules/mining/machine_silo.dm 538"></a></aside></h3><p>Creates a log entry for depositing/withdrawing from the silo both ingame and in text based log</p>
<p>Arguments:</p>
<ul>
<li><a href="obj/machinery.html" title="/obj/machinery">M</a>: The machine performing the action.</li>
<li>action: Text that visually describes the action (smelted/deposited/resupplied...)</li>
<li>amount: The amount of sheets/objects deposited/withdrawn by this action. Positive for depositing, negative for withdrawing.</li>
<li>noun: Name of the object the action was performed with (sheet, units, ore...)</li>
<li>[mats][list]: Assoc list in format (material datum = amount of raw materials). Wants the actual amount of raw (iron, glass...) materials involved in this action. If you have 10 metal sheets each worth 100 iron you would pass a list with the iron material datum = 1000</li>
<li>user_data - ID_DATA(user), includes details (not currently) rendered to the player, such as bank account #, see the proc on SSid_access</li>
</ul></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>