<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/projectile - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> â€” <a href="obj/projectile.html#var">Var Details</a> - <a href="obj/projectile.html#proc">Proc Details</a></header><main><h1>projectile <aside>/<a href="obj.html">obj</a>/<a href="obj/projectile.html">projectile</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 7"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/projectile.html#var/accuracy_falloff">accuracy_falloff</a></th><td>How much accuracy is lost for each tile travelled</td></tr><tr><th><a href="obj/projectile.html#var/accurate_range">accurate_range</a></th><td>How much accuracy before falloff starts to matter. Formula is range - falloff * tiles travelled</td></tr><tr><th><a href="obj/projectile.html#var/angle">angle</a></th><td>The current angle of the projectile. Initially null, so if the arg is missing from [/fire()], we can calculate it from firer and target as fallback.</td></tr><tr><th><a href="obj/projectile.html#var/animate_movement">animate_movement</a></th><td>Gliding does not enjoy something getting moved multiple turfs in a tick, which is why we animate it manually</td></tr><tr><th><a href="obj/projectile.html#var/armor_flag">armor_flag</a></th><td>Defines what armor to use when it hits things.  Must be set to bullet, laser, energy, or bomb</td></tr><tr><th><a href="obj/projectile.html#var/armour_penetration">armour_penetration</a></th><td>How much armor this projectile pierces.</td></tr><tr><th><a href="obj/projectile.html#var/beam_points">beam_points</a></th><td>Associated list of coordinate points in which we changed trajectories in order to calculate hitscan tracers
Value points to the next point in the beam</td></tr><tr><th><a href="obj/projectile.html#var/can_hit_turfs">can_hit_turfs</a></th><td>If true directly targeted turfs can be hit</td></tr><tr><th><a href="obj/projectile.html#var/catastropic_dismemberment">catastropic_dismemberment</a></th><td>If TRUE, this projectile deals its damage to the chest if it dismembers a limb.</td></tr><tr><th><a href="obj/projectile.html#var/damage_falloff_tile">damage_falloff_tile</a></th><td>How much we want to drop damage per tile as it travels through the air</td></tr><tr><th><a href="obj/projectile.html#var/def_zone">def_zone</a></th><td>Zone at which the projectile is aimed at</td></tr><tr><th><a href="obj/projectile.html#var/deletion_queued">deletion_queued</a></th><td>In order to preserve animations, projectiles are only deleted the tick <em>after</em> they impact something.
Same is applied to reaching the range limit</td></tr><tr><th><a href="obj/projectile.html#var/dismemberment">dismemberment</a></th><td>Damage the limb must have for it to be dismembered upon getting hit. 0 will prevent dismembering altogether</td></tr><tr><th><a href="obj/projectile.html#var/do_not_log">do_not_log</a></th><td>If true, the projectile won't cause any logging whatsoever. Used for hallucinations and shit.</td></tr><tr><th><a href="obj/projectile.html#var/drowsy">drowsy</a></th><td>Drowsiness applied on projectile hit</td></tr><tr><th><a href="obj/projectile.html#var/embed_data">embed_data</a></th><td>Saves embedding data</td></tr><tr><th><a href="obj/projectile.html#var/embed_falloff_tile">embed_falloff_tile</a></th><td>How much we want to drop the embed_chance value, if we can embed, per tile, for falloff purposes</td></tr><tr><th><a href="obj/projectile.html#var/embed_type">embed_type</a></th><td>If we have a shrapnel_type defined, these embedding stats will be passed to the spawned shrapnel type, which will roll for embedding on the target</td></tr><tr><th><a href="obj/projectile.html#var/entry_x">entry_x</a></th><td>X coordinate at which the projectile entered a new turf</td></tr><tr><th><a href="obj/projectile.html#var/entry_y">entry_y</a></th><td>Y coordinate at which the projectile entered a new turf</td></tr><tr><th><a href="obj/projectile.html#var/eyeblur">eyeblur</a></th><td>Seconds of blurry eyes applied on projectile hit</td></tr><tr><th><a href="obj/projectile.html#var/fired">fired</a></th><td>If the projectile was fired already</td></tr><tr><th><a href="obj/projectile.html#var/fired_from">fired_from</a></th><td>The thing that the projectile was fired from (gun, turret, spell)</td></tr><tr><th><a href="obj/projectile.html#var/firer">firer</a></th><td>Atom who shot the projectile (Not the gun, the guy who shot the gun)</td></tr><tr><th><a href="obj/projectile.html#var/free_hitscan_forceMove">free_hitscan_forceMove</a></th><td>Next forceMove will not create tracer end/start effects</td></tr><tr><th><a href="obj/projectile.html#var/hit_prone_targets">hit_prone_targets</a></th><td>If TRUE, hit mobs, even if they are lying on the floor and are not our target within MAX_RANGE_HIT_PRONE_TARGETS tiles</td></tr><tr><th><a href="obj/projectile.html#var/hit_threshhold">hit_threshhold</a></th><td>If objects are below this layer, we pass through them</td></tr><tr><th><a href="obj/projectile.html#var/hitscan">hitscan</a></th><td>Wherever this projectile is hitscan. Hitscan projectiles are processed until the end of their path instantly upon being fired and leave a tracer in their path</td></tr><tr><th><a href="obj/projectile.html#var/hitsound">hitsound</a></th><td>The sound this plays on impact.</td></tr><tr><th><a href="obj/projectile.html#var/hitsound_wall">hitsound_wall</a></th><td>Sound played when the projectile hits a wall</td></tr><tr><th><a href="obj/projectile.html#var/homing">homing</a></th><td>If the projectile is currently homing. Warning - this changes projectile's processing logic, reverting it to segmented processing instead of new raymarching logic
This does not actually set up the projectile to home in on a target - you need to set that up with set_homing_target() on the projectile!</td></tr><tr><th><a href="obj/projectile.html#var/homing_target">homing_target</a></th><td>Target the projectile is homing on</td></tr><tr><th><a href="obj/projectile.html#var/homing_turn_speed">homing_turn_speed</a></th><td>Angles per move segment, distance is based on SSprojectiles.pixels_per_decisecond
With pixels_per_decisecond set to 16 and homing_turn_speed, the projectile can turn up to 20 pixels per turf passed</td></tr><tr><th><a href="obj/projectile.html#var/ignore_range_hit_prone_targets">ignore_range_hit_prone_targets</a></th><td>If TRUE, ignores the range of MAX_RANGE_HIT_PRONE_TARGETS tiles of hit_prone_targets</td></tr><tr><th><a href="obj/projectile.html#var/ignore_source_check">ignore_source_check</a></th><td>If TRUE, we can hit our firer.</td></tr><tr><th><a href="obj/projectile.html#var/ignored_factions">ignored_factions</a></th><td>We ignore mobs with these factions.</td></tr><tr><th><a href="obj/projectile.html#var/impact_effect_type">impact_effect_type</a></th><td>Impact VFX created upon hitting something</td></tr><tr><th><a href="obj/projectile.html#var/impact_type">impact_type</a></th><td>Hitscan impact effect spawned on the target</td></tr><tr><th><a href="obj/projectile.html#var/impact_x">impact_x</a></th><td>X coordinate at which the projectile visually impacted the target</td></tr><tr><th><a href="obj/projectile.html#var/impact_y">impact_y</a></th><td>Y coordinate at which the projectile visually impacted the target</td></tr><tr><th><a href="obj/projectile.html#var/impacted">impacted</a></th><td>We already impacted these things, do not impact them again. Used to make sure we can pierce things we want to pierce. Lazylist, typecache style (object = TRUE) for performance.</td></tr><tr><th><a href="obj/projectile.html#var/jitter">jitter</a></th><td>Jittering applied on projectile hit</td></tr><tr><th><a href="obj/projectile.html#var/last_impact_turf">last_impact_turf</a></th><td>Turf of the last atom we've impacted</td></tr><tr><th><a href="obj/projectile.html#var/last_point">last_point</a></th><td>Last point in the beam</td></tr><tr><th><a href="obj/projectile.html#var/last_process">last_process</a></th><td>Last time the projectile was processed, also used for lag compensation</td></tr><tr><th><a href="obj/projectile.html#var/last_projectile_move">last_projectile_move</a></th><td>Last time the projectile moved, used for lag compensation if SSprojectiles starts chugging</td></tr><tr><th><a href="obj/projectile.html#var/last_tick_turf">last_tick_turf</a></th><td>Turf that we have registered connect_loc signal - this is done for performance, as we're moving ~a dozen turfs per tick
and registering and unregistering signal for every single one of them is stupid. Unregistering the signal from the correct turf in case we get moved by smth else is important</td></tr><tr><th><a href="obj/projectile.html#var/log_override">log_override</a></th><td>If the act of firing this projectile does not create logs</td></tr><tr><th><a href="obj/projectile.html#var/max_pierces">max_pierces</a></th><td>How many times this projectile can pierce something before deleting</td></tr><tr><th><a href="obj/projectile.html#var/maximum_range">maximum_range</a></th><td>Original range upon being fired/reflected</td></tr><tr><th><a href="obj/projectile.html#var/min_ricochets">min_ricochets</a></th><td>How many times we have to ricochet min (unless we hit an atom we can ricochet off)</td></tr><tr><th><a href="obj/projectile.html#var/movement_vector">movement_vector</a></th><td>Projectile's movement vector - this caches sine/cosine of our angle to cut down on trig calculations</td></tr><tr><th><a href="obj/projectile.html#var/muzzle_type">muzzle_type</a></th><td>Hitscan muzzle effect spawned on the firer</td></tr><tr><th><a href="obj/projectile.html#var/nondirectional_sprite">nondirectional_sprite</a></th><td>Set TRUE to prevent projectiles from having their sprites rotated based on firing angle</td></tr><tr><th><a href="obj/projectile.html#var/original">original</a></th><td>Original clicked target</td></tr><tr><th><a href="obj/projectile.html#var/original_angle">original_angle</a></th><td>Angle at the moment of firing</td></tr><tr><th><a href="obj/projectile.html#var/overrun">overrun</a></th><td>How many pixels we missed last tick due to lag or speed cap</td></tr><tr><th><a href="obj/projectile.html#var/p_x">p_x</a></th><td>pixel_x where the player clicked. Default is the center.</td></tr><tr><th><a href="obj/projectile.html#var/p_y">p_y</a></th><td>pixel_y where the player clicked. Default is the center</td></tr><tr><th><a href="obj/projectile.html#var/pass_flags">pass_flags</a></th><td></td></tr><tr><th><a href="obj/projectile.html#var/paused">paused</a></th><td>If the projectile is suspended mid-air</td></tr><tr><th><a href="obj/projectile.html#var/phasing_ignore_direct_target">phasing_ignore_direct_target</a></th><td>If FALSE, allow us to hit something directly targeted/clicked/whatnot even if we're able to phase through it</td></tr><tr><th><a href="obj/projectile.html#var/pierces">pierces</a></th><td>Number of times we've pierced something. Incremented BEFORE bullet_act and on_hit proc!</td></tr><tr><th><a href="obj/projectile.html#var/pixels_moved_last_tile">pixels_moved_last_tile</a></th><td>Remaining pixel movement last tick - used for precise range calculations</td></tr><tr><th><a href="obj/projectile.html#var/projectile_angle">projectile_angle</a></th><td>Additional rotation for the projectile, in case it uses some object's sprite</td></tr><tr><th><a href="obj/projectile.html#var/projectile_phasing">projectile_phasing</a></th><td>Bitflag for things the projectile should just phase through entirely - No hitting unless direct target and [phasing_ignore_direct_target] is FALSE. Uses pass_flags flags.</td></tr><tr><th><a href="obj/projectile.html#var/projectile_piercing">projectile_piercing</a></th><td>Bitflag for things the projectile should hit, but pierce through without deleting itself. Defers to projectile_phasing. Uses pass_flags flags.</td></tr><tr><th><a href="obj/projectile.html#var/range">range</a></th><td>This will de-increment every step. When 0, it will delete the projectile.</td></tr><tr><th><a href="obj/projectile.html#var/reflect_range_decrease">reflect_range_decrease</a></th><td>Amount of original range that falls off when reflecting, so it doesn't go forever</td></tr><tr><th><a href="obj/projectile.html#var/reflectable">reflectable</a></th><td>If this projectile can be reflected</td></tr><tr><th><a href="obj/projectile.html#var/ricochet_auto_aim_angle">ricochet_auto_aim_angle</a></th><td>On ricochet, if ricochet_auto_aim_range is nonzero, we'll consider any mobs within this range of the normal angle of incidence to home in on, higher = more auto aim</td></tr><tr><th><a href="obj/projectile.html#var/ricochet_auto_aim_range">ricochet_auto_aim_range</a></th><td>On ricochet, if nonzero, we consider all mobs within this range of our projectile at the time of ricochet to home in on like Revolver Ocelot, as governed by ricochet_auto_aim_angle</td></tr><tr><th><a href="obj/projectile.html#var/ricochet_chance">ricochet_chance</a></th><td>0-100 (or more, I guess), the base chance of ricocheting, before being modified by the atom we shoot and our chance decay</td></tr><tr><th><a href="obj/projectile.html#var/ricochet_decay_chance">ricochet_decay_chance</a></th><td>0-1 (or more, I guess) multiplier, the ricochet_chance is modified by multiplying this after each ricochet</td></tr><tr><th><a href="obj/projectile.html#var/ricochet_decay_damage">ricochet_decay_damage</a></th><td>0-1 (or more, I guess) multiplier, the projectile's damage is modified by multiplying this after each ricochet</td></tr><tr><th><a href="obj/projectile.html#var/ricochet_incidence_leeway">ricochet_incidence_leeway</a></th><td>the angle of impact must be within this many degrees of the struck surface, set to 0 to allow any angle</td></tr><tr><th><a href="obj/projectile.html#var/ricochet_shoots_firer">ricochet_shoots_firer</a></th><td>Can our ricochet autoaim hit our firer?</td></tr><tr><th><a href="obj/projectile.html#var/ricochets">ricochets</a></th><td>How many times we've ricochet'd so far (instance variable, not a stat)</td></tr><tr><th><a href="obj/projectile.html#var/ricochets_max">ricochets_max</a></th><td>How many times we can ricochet max</td></tr><tr><th><a href="obj/projectile.html#var/sharpness">sharpness</a></th><td>For what kind of brute wounds we're rolling for, if we're doing such a thing. Lasers obviously don't care since they do burn instead.</td></tr><tr><th><a href="obj/projectile.html#var/shrapnel_type">shrapnel_type</a></th><td>If defined, on hit we create an item of this type then call hitby() on the hit target with this, mainly used for embedding items (bullets) in targets</td></tr><tr><th><a href="obj/projectile.html#var/slur">slur</a></th><td>Slurring applied on projectile hit</td></tr><tr><th><a href="obj/projectile.html#var/spawned_muzzle">spawned_muzzle</a></th><td>If a hitscan muzzle effect has been created for this &quot;path&quot;, reset during forceMoves.</td></tr><tr><th><a href="obj/projectile.html#var/speed">speed</a></th><td>How many tiles we pass in a single SSprojectiles tick</td></tr><tr><th><a href="obj/projectile.html#var/spread">spread</a></th><td>Random spread done projectile-side for convinience</td></tr><tr><th><a href="obj/projectile.html#var/stamina">stamina</a></th><td>Extra stamina damage applied on projectile hit (in addition to the main damage)</td></tr><tr><th><a href="obj/projectile.html#var/stamina_falloff_tile">stamina_falloff_tile</a></th><td>How much we want to drop stamina damage (defined by the stamina variable) per tile as it travels through the air</td></tr><tr><th><a href="obj/projectile.html#var/starting">starting</a></th><td>Projectile's starting turf</td></tr><tr><th><a href="obj/projectile.html#var/stutter">stutter</a></th><td>Stuttering applied on projectile hit</td></tr><tr><th><a href="obj/projectile.html#var/suppressed">suppressed</a></th><td>One of three suppression states: NONE displays the hit message and produces a loud sound,
QUIET makes a quiet sound and only lets the victim know they've been shot, and VERY only makes a very quiet sound with no messages</td></tr><tr><th><a href="obj/projectile.html#var/temporary_unstoppable_movement">temporary_unstoppable_movement</a></th><td>We are flagged PHASING temporarily to not stop moving when we Bump something but want to keep going anyways.</td></tr><tr><th><a href="obj/projectile.html#var/ticks_to_deletion">ticks_to_deletion</a></th><td>How many ticks should we wait in queued deletion mode before qdeleting? Sometimes increased in animations</td></tr><tr><th><a href="obj/projectile.html#var/tracer_type">tracer_type</a></th><td>Hitscan tracer effect left behind the projectile</td></tr><tr><th><a href="obj/projectile.html#var/weak_against_armour">weak_against_armour</a></th><td>Whether or not our projectile doubles the value of affecting armour</td></tr><tr><th><a href="obj/projectile.html#var/wound_falloff_tile">wound_falloff_tile</a></th><td>How much we want to drop both wound_bonus and exposed_wound_bonus (to a minimum of 0 for the latter) per tile, for falloff purposes</td></tr><tr><th><a href="obj/projectile.html#var/xo">xo</a></th><td>Initial target x coordinate offset of the projectile</td></tr><tr><th><a href="obj/projectile.html#var/yo">yo</a></th><td>Initial target y coordinate offset of the projectile</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/projectile.html#proc/CanPassThrough">CanPassThrough</a></th><td>Projectile can pass through
Used to not even attempt to Bump() or fail to Cross() anything we already hit.</td></tr><tr><th><a href="obj/projectile.html#proc/Moved">Moved</a></th><td>Projectile moved:</td></tr><tr><th><a href="obj/projectile.html#proc/aim_projectile">aim_projectile</a></th><td>Aims the projectile at a target.</td></tr><tr><th><a href="obj/projectile.html#proc/can_embed_into">can_embed_into</a></th><td>Checks if the projectile can embed into someone</td></tr><tr><th><a href="obj/projectile.html#proc/can_hit_target">can_hit_target</a></th><td>Returns true if the target atom is on our current turf and above the right layer
If direct target is true it's the originally clicked target.</td></tr><tr><th><a href="obj/projectile.html#proc/create_hitscan_point">create_hitscan_point</a></th><td>Creates a new keypoint in which the tracer will split</td></tr><tr><th><a href="obj/projectile.html#proc/get_embed">get_embed</a></th><td>Fetches, or lazyloads, our embedding datum</td></tr><tr><th><a href="obj/projectile.html#proc/impact">impact</a></th><td>Called when the projectile hits something
This can either be from it bumping something,
or it passing over a turf/being crossed and scanning that there is infact
a valid target it needs to hit.
This target isn't however necessarily WHAT it hits
that is determined by process_hit and select_target.</td></tr><tr><th><a href="obj/projectile.html#proc/is_hostile_projectile">is_hostile_projectile</a></th><td>Is this projectile considered &quot;hostile&quot;?</td></tr><tr><th><a href="obj/projectile.html#proc/move_animate">move_animate</a></th><td>Called every time projectile animates its movement, in case child wants to have custom animations.
Returning TRUE cancels normal animation</td></tr><tr><th><a href="obj/projectile.html#proc/on_entered">on_entered</a></th><td>Projectile crossed: When something enters a projectile's tile, make sure the projectile hits it if it should be hitting it.</td></tr><tr><th><a href="obj/projectile.html#proc/on_hit">on_hit</a></th><td>Called when the projectile hits something</td></tr><tr><th><a href="obj/projectile.html#proc/on_range">on_range</a></th><td>Called next tick after the projectile reaches its maximum range so the animation has time to fully play out</td></tr><tr><th><a href="obj/projectile.html#proc/prehit_pierce">prehit_pierce</a></th><td>Checks if we should pierce something.</td></tr><tr><th><a href="obj/projectile.html#proc/process_hitscan">process_hitscan</a></th><td>Attempts to force the projectile to move until the subsystem runs out of processing time, the projectile impacts something or gets frozen by timestop</td></tr><tr><th><a href="obj/projectile.html#proc/process_homing">process_homing</a></th><td>Called every projectile loop for homing or alternatively, custom trajectory changes.</td></tr><tr><th><a href="obj/projectile.html#proc/record_hitscan_start">record_hitscan_start</a></th><td>Creates (or wipes clean) list of tracer keypoints and creates a first point.</td></tr><tr><th><a href="obj/projectile.html#proc/reduce_range">reduce_range</a></th><td>Called every time a projectile passes one tile worth of movement</td></tr><tr><th><a href="obj/projectile.html#proc/reflect">reflect</a></th><td>Reflects the projectile off of something</td></tr><tr><th><a href="obj/projectile.html#proc/scan_moved_turf">scan_moved_turf</a></th><td>Scans if we should hit something on the turf we just moved to if we haven't already</td></tr><tr><th><a href="obj/projectile.html#proc/select_target">select_target</a></th><td>Selects a target to hit from a turf</td></tr><tr><th><a href="obj/projectile.html#proc/set_angle_centered">set_angle_centered</a></th><td>Same as set_angle, but the reflection continues from the center of the object that reflects it instead of the side</td></tr><tr><th><a href="obj/projectile.html#proc/set_embed">set_embed</a></th><td>Sets our embedding datum to a different one. Can also take types</td></tr><tr><th><a href="obj/projectile.html#proc/set_homing_target">set_homing_target</a></th><td>Makes projectile home onto the passed target with minor inaccuracy</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/accuracy_falloff"><aside class="declaration">var </aside>accuracy_falloff <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L271"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 271"></a></h3><p>How much accuracy is lost for each tile travelled</p><h3 id="var/accurate_range"><aside class="declaration">var </aside>accurate_range <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L273"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 273"></a></h3><p>How much accuracy before falloff starts to matter. Formula is range - falloff * tiles travelled</p><h3 id="var/angle"><aside class="declaration">var </aside>angle <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L109"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 109"></a></h3><p>The current angle of the projectile. Initially null, so if the arg is missing from [/fire()], we can calculate it from firer and target as fallback.</p><h3 id="var/animate_movement">animate_movement <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L119"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 119"></a></h3><p>Gliding does not enjoy something getting moved multiple turfs in a tick, which is why we animate it manually</p><h3 id="var/armor_flag"><aside class="declaration">var </aside>armor_flag <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L194"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 194"></a></h3><p>Defines what armor to use when it hits things.  Must be set to bullet, laser, energy, or bomb</p><h3 id="var/armour_penetration"><aside class="declaration">var </aside>armour_penetration <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L196"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 196"></a></h3><p>How much armor this projectile pierces.</p><h3 id="var/beam_points"><aside class="declaration">var </aside>beam_points <aside>â€“ /list/<a href="datum.html">datum</a>/<a href="datum/point.html">point</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L148"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 148"></a></h3><p>Associated list of coordinate points in which we changed trajectories in order to calculate hitscan tracers
Value points to the next point in the beam</p><h3 id="var/can_hit_turfs"><aside class="declaration">var </aside>can_hit_turfs <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L275"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 275"></a></h3><p>If true directly targeted turfs can be hit</p><h3 id="var/catastropic_dismemberment"><aside class="declaration">var </aside>catastropic_dismemberment <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L230"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 230"></a></h3><p>If TRUE, this projectile deals its damage to the chest if it dismembers a limb.</p><h3 id="var/damage_falloff_tile"><aside class="declaration">var </aside>damage_falloff_tile <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L263"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 263"></a></h3><p>How much we want to drop damage per tile as it travels through the air</p><h3 id="var/def_zone"><aside class="declaration">var </aside>def_zone <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 27"></a></h3><p>Zone at which the projectile is aimed at</p><h3 id="var/deletion_queued"><aside class="declaration">var </aside>deletion_queued <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L246"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 246"></a></h3><p>In order to preserve animations, projectiles are only deleted the tick <em>after</em> they impact something.
Same is applied to reaching the range limit</p><h3 id="var/dismemberment"><aside class="declaration">var </aside>dismemberment <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L228"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 228"></a></h3><p>Damage the limb must have for it to be dismembered upon getting hit. 0 will prevent dismembering altogether</p><h3 id="var/do_not_log"><aside class="declaration">var </aside>do_not_log <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L236"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 236"></a></h3><p>If true, the projectile won't cause any logging whatsoever. Used for hallucinations and shit.</p><h3 id="var/drowsy"><aside class="declaration">var </aside>drowsy <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L217"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 217"></a></h3><p>Drowsiness applied on projectile hit</p><h3 id="var/embed_data"><aside class="declaration">var </aside>embed_data <aside>â€“ /<a href="datum.html">datum</a>/<a href="datum/embedding.html">embedding</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L255"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 255"></a></h3><p>Saves embedding data</p><h3 id="var/embed_falloff_tile"><aside class="declaration">var </aside>embed_falloff_tile <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L269"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 269"></a></h3><p>How much we want to drop the embed_chance value, if we can embed, per tile, for falloff purposes</p><h3 id="var/embed_type"><aside class="declaration">var </aside>embed_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L253"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 253"></a></h3><p>If we have a shrapnel_type defined, these embedding stats will be passed to the spawned shrapnel type, which will roll for embedding on the target</p><h3 id="var/entry_x"><aside class="declaration">var </aside>entry_x <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L48"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 48"></a></h3><p>X coordinate at which the projectile entered a new turf</p><h3 id="var/entry_y"><aside class="declaration">var </aside>entry_y <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L50"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 50"></a></h3><p>Y coordinate at which the projectile entered a new turf</p><h3 id="var/eyeblur"><aside class="declaration">var </aside>eyeblur <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L215"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 215"></a></h3><p>Seconds of blurry eyes applied on projectile hit</p><h3 id="var/fired"><aside class="declaration">var </aside>fired <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L59"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 59"></a></h3><p>If the projectile was fired already</p><h3 id="var/fired_from"><aside class="declaration">var </aside>fired_from <aside>â€“ /<a href="datum.html">datum</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 31"></a></h3><p>The thing that the projectile was fired from (gun, turret, spell)</p><h3 id="var/firer"><aside class="declaration">var </aside>firer <aside>â€“ /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 29"></a></h3><p>Atom who shot the projectile (Not the gun, the guy who shot the gun)</p><h3 id="var/free_hitscan_forceMove"><aside class="declaration">var </aside>free_hitscan_forceMove <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L152"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 152"></a></h3><p>Next forceMove will not create tracer end/start effects</p><h3 id="var/hit_prone_targets"><aside class="declaration">var </aside>hit_prone_targets <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L257"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 257"></a></h3><p>If TRUE, hit mobs, even if they are lying on the floor and are not our target within MAX_RANGE_HIT_PRONE_TARGETS tiles</p><h3 id="var/hit_threshhold"><aside class="declaration">var </aside>hit_threshhold <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L103"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 103"></a></h3><p>If objects are below this layer, we pass through them</p><h3 id="var/hitscan"><aside class="declaration">var </aside>hitscan <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L145"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 145"></a></h3><p>Wherever this projectile is hitscan. Hitscan projectiles are processed until the end of their path instantly upon being fired and leave a tracer in their path</p><h3 id="var/hitsound"><aside class="declaration">var </aside>hitsound <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 21"></a></h3><p>The sound this plays on impact.</p><h3 id="var/hitsound_wall"><aside class="declaration">var </aside>hitsound_wall <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 23"></a></h3><p>Sound played when the projectile hits a wall</p><h3 id="var/homing"><aside class="declaration">var </aside>homing <aside>â€“ /final</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L178"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 178"></a></h3><p>If the projectile is currently homing. Warning - this changes projectile's processing logic, reverting it to segmented processing instead of new raymarching logic
This does not actually set up the projectile to home in on a target - you need to set that up with set_homing_target() on the projectile!</p><h3 id="var/homing_target"><aside class="declaration">var </aside>homing_target <aside>â€“ /<a href="atom.html">atom</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L180"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 180"></a></h3><p>Target the projectile is homing on</p><h3 id="var/homing_turn_speed"><aside class="declaration">var </aside>homing_turn_speed <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L183"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 183"></a></h3><p>Angles per move segment, distance is based on SSprojectiles.pixels_per_decisecond
With pixels_per_decisecond set to 16 and homing_turn_speed, the projectile can turn up to 20 pixels per turf passed</p><h3 id="var/ignore_range_hit_prone_targets"><aside class="declaration">var </aside>ignore_range_hit_prone_targets <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L259"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 259"></a></h3><p>If TRUE, ignores the range of MAX_RANGE_HIT_PRONE_TARGETS tiles of hit_prone_targets</p><h3 id="var/ignore_source_check"><aside class="declaration">var </aside>ignore_source_check <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L73"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 73"></a></h3><p>If TRUE, we can hit our firer.</p><h3 id="var/ignored_factions"><aside class="declaration">var </aside>ignored_factions <aside>â€“ /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L238"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 238"></a></h3><p>We ignore mobs with these factions.</p><h3 id="var/impact_effect_type"><aside class="declaration">var </aside>impact_effect_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L232"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 232"></a></h3><p>Impact VFX created upon hitting something</p><h3 id="var/impact_type"><aside class="declaration">var </aside>impact_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L162"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 162"></a></h3><p>Hitscan impact effect spawned on the target</p><h3 id="var/impact_x"><aside class="declaration">var </aside>impact_x <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 52"></a></h3><p>X coordinate at which the projectile visually impacted the target</p><h3 id="var/impact_y"><aside class="declaration">var </aside>impact_y <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L54"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 54"></a></h3><p>Y coordinate at which the projectile visually impacted the target</p><h3 id="var/impacted"><aside class="declaration">var </aside>impacted <aside>â€“ /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L71"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 71"></a></h3><p>We already impacted these things, do not impact them again. Used to make sure we can pierce things we want to pierce. Lazylist, typecache style (object = TRUE) for performance.</p><h3 id="var/jitter"><aside class="declaration">var </aside>jitter <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L219"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 219"></a></h3><p>Jittering applied on projectile hit</p><h3 id="var/last_impact_turf"><aside class="declaration">var </aside>last_impact_turf <aside>â€“ /final/<a href="turf.html">turf</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L56"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 56"></a></h3><p>Turf of the last atom we've impacted</p><h3 id="var/last_point"><aside class="declaration">var </aside>last_point <aside>â€“ /<a href="datum.html">datum</a>/<a href="datum/point.html">point</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L150"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 150"></a></h3><p>Last point in the beam</p><h3 id="var/last_process"><aside class="declaration">var </aside>last_process <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L65"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 65"></a></h3><p>Last time the projectile was processed, also used for lag compensation</p><h3 id="var/last_projectile_move"><aside class="declaration">var </aside>last_projectile_move <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L63"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 63"></a></h3><p>Last time the projectile moved, used for lag compensation if SSprojectiles starts chugging</p><h3 id="var/last_tick_turf"><aside class="declaration">var </aside>last_tick_turf <aside>â€“ /<a href="turf.html">turf</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L241"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 241"></a></h3><p>Turf that we have registered connect_loc signal - this is done for performance, as we're moving ~a dozen turfs per tick
and registering and unregistering signal for every single one of them is stupid. Unregistering the signal from the correct turf in case we get moved by smth else is important</p><h3 id="var/log_override"><aside class="declaration">var </aside>log_override <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L234"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 234"></a></h3><p>If the act of firing this projectile does not create logs</p><h3 id="var/max_pierces"><aside class="declaration">var </aside>max_pierces <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L100"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 100"></a></h3><p>How many times this projectile can pierce something before deleting</p><h3 id="var/maximum_range"><aside class="declaration">var </aside>maximum_range <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L202"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 202"></a></h3><p>Original range upon being fired/reflected</p><h3 id="var/min_ricochets"><aside class="declaration">var </aside>min_ricochets <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L127"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 127"></a></h3><p>How many times we have to ricochet min (unless we hit an atom we can ricochet off)</p><h3 id="var/movement_vector"><aside class="declaration">var </aside>movement_vector <aside>â€“ /<a href="datum.html">datum</a>/<a href="datum/vector.html">vector</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L69"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 69"></a></h3><p>Projectile's movement vector - this caches sine/cosine of our angle to cut down on trig calculations</p><h3 id="var/muzzle_type"><aside class="declaration">var </aside>muzzle_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L160"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 160"></a></h3><p>Hitscan muzzle effect spawned on the firer</p><h3 id="var/nondirectional_sprite"><aside class="declaration">var </aside>nondirectional_sprite <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L113"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 113"></a></h3><p>Set TRUE to prevent projectiles from having their sprites rotated based on firing angle</p><h3 id="var/original"><aside class="declaration">var </aside>original <aside>â€“ /<a href="atom.html">atom</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L36"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 36"></a></h3><p>Original clicked target</p><h3 id="var/original_angle"><aside class="declaration">var </aside>original_angle <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L111"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 111"></a></h3><p>Angle at the moment of firing</p><h3 id="var/overrun"><aside class="declaration">var </aside>overrun <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L67"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 67"></a></h3><p>How many pixels we missed last tick due to lag or speed cap</p><h3 id="var/p_x"><aside class="declaration">var </aside>p_x <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L44"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 44"></a></h3><p>pixel_x where the player clicked. Default is the center.</p><h3 id="var/p_y"><aside class="declaration">var </aside>p_y <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L46"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 46"></a></h3><p>pixel_y where the player clicked. Default is the center</p><h3 id="var/pass_flags"><aside class="parent"><a title="/atom/movable" href="atom/movable.html#var/pass_flags">â†‘</a></aside>pass_flags <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L90"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 90"></a></h3><ul>
<li>
<p>PROJECTILE PIERCING
* WARNING:
* Projectile piercing MUST be done using these variables.
* Ordinary passflags will result in can_hit_target being false unless directly clicked on - similar to projectile_phasing but without even going to process_hit.
* The two flag variables below both use pass flags.
* In the context of LETPASStHROW, it means the projectile will ignore things that are currently &quot;in the air&quot; from a throw.</p>
<pre><code>* Also, projectiles sense hits using Bump(), and then pierce them if necessary.
* They simply do not follow conventional movement rules.
* NEVER flag a projectile as PHASING movement type.
* If you so badly need to make one go through *everything*, override check_pierce() for your projectile to always return PROJECTILE_PIERCE_PHASE/HIT.
</code></pre>
</li>
</ul>
<p>The &quot;usual&quot; flags of pass_flags is used in that can_hit_target ignores these unless they're specifically targeted/clicked on. This behavior entirely bypasses process_hit if triggered, rather than phasing which uses prehit_pierce() to check.</p><h3 id="var/paused"><aside class="declaration">var </aside>paused <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L61"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 61"></a></h3><p>If the projectile is suspended mid-air</p><h3 id="var/phasing_ignore_direct_target"><aside class="declaration">var </aside>phasing_ignore_direct_target <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L92"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 92"></a></h3><p>If FALSE, allow us to hit something directly targeted/clicked/whatnot even if we're able to phase through it</p><h3 id="var/pierces"><aside class="declaration">var </aside>pierces <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L98"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 98"></a></h3><p>Number of times we've pierced something. Incremented BEFORE bullet_act and on_hit proc!</p><h3 id="var/pixels_moved_last_tile"><aside class="declaration">var </aside>pixels_moved_last_tile <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L243"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 243"></a></h3><p>Remaining pixel movement last tick - used for precise range calculations</p><h3 id="var/projectile_angle"><aside class="declaration">var </aside>projectile_angle <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L117"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 117"></a></h3><p>Additional rotation for the projectile, in case it uses some object's sprite</p><h3 id="var/projectile_phasing"><aside class="declaration">var </aside>projectile_phasing <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L94"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 94"></a></h3><p>Bitflag for things the projectile should just phase through entirely - No hitting unless direct target and [phasing_ignore_direct_target] is FALSE. Uses pass_flags flags.</p><h3 id="var/projectile_piercing"><aside class="declaration">var </aside>projectile_piercing <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L96"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 96"></a></h3><p>Bitflag for things the projectile should hit, but pierce through without deleting itself. Defers to projectile_phasing. Uses pass_flags flags.</p><h3 id="var/range"><aside class="declaration">var </aside>range <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L200"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 200"></a></h3><p>This will de-increment every step. When 0, it will delete the projectile.</p><h3 id="var/reflect_range_decrease"><aside class="declaration">var </aside>reflect_range_decrease <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L204"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 204"></a></h3><p>Amount of original range that falls off when reflecting, so it doesn't go forever</p><h3 id="var/reflectable"><aside class="declaration">var </aside>reflectable <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L206"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 206"></a></h3><p>If this projectile can be reflected</p><h3 id="var/ricochet_auto_aim_angle"><aside class="declaration">var </aside>ricochet_auto_aim_angle <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L137"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 137"></a></h3><p>On ricochet, if ricochet_auto_aim_range is nonzero, we'll consider any mobs within this range of the normal angle of incidence to home in on, higher = more auto aim</p><h3 id="var/ricochet_auto_aim_range"><aside class="declaration">var </aside>ricochet_auto_aim_range <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L135"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 135"></a></h3><p>On ricochet, if nonzero, we consider all mobs within this range of our projectile at the time of ricochet to home in on like Revolver Ocelot, as governed by ricochet_auto_aim_angle</p><h3 id="var/ricochet_chance"><aside class="declaration">var </aside>ricochet_chance <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L129"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 129"></a></h3><p>0-100 (or more, I guess), the base chance of ricocheting, before being modified by the atom we shoot and our chance decay</p><h3 id="var/ricochet_decay_chance"><aside class="declaration">var </aside>ricochet_decay_chance <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L131"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 131"></a></h3><p>0-1 (or more, I guess) multiplier, the ricochet_chance is modified by multiplying this after each ricochet</p><h3 id="var/ricochet_decay_damage"><aside class="declaration">var </aside>ricochet_decay_damage <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L133"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 133"></a></h3><p>0-1 (or more, I guess) multiplier, the projectile's damage is modified by multiplying this after each ricochet</p><h3 id="var/ricochet_incidence_leeway"><aside class="declaration">var </aside>ricochet_incidence_leeway <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L139"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 139"></a></h3><p>the angle of impact must be within this many degrees of the struck surface, set to 0 to allow any angle</p><h3 id="var/ricochet_shoots_firer"><aside class="declaration">var </aside>ricochet_shoots_firer <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L141"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 141"></a></h3><p>Can our ricochet autoaim hit our firer?</p><h3 id="var/ricochets"><aside class="declaration">var </aside>ricochets <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L123"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 123"></a></h3><p>How many times we've ricochet'd so far (instance variable, not a stat)</p><h3 id="var/ricochets_max"><aside class="declaration">var </aside>ricochets_max <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L125"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 125"></a></h3><p>How many times we can ricochet max</p><h3 id="var/sharpness"><aside class="declaration">var </aside>sharpness <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L261"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 261"></a></h3><p>For what kind of brute wounds we're rolling for, if we're doing such a thing. Lasers obviously don't care since they do burn instead.</p><h3 id="var/shrapnel_type"><aside class="declaration">var </aside>shrapnel_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L251"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 251"></a></h3><p>If defined, on hit we create an item of this type then call hitby() on the hit target with this, mainly used for embedding items (bullets) in targets</p><h3 id="var/slur"><aside class="declaration">var </aside>slur <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L225"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 225"></a></h3><p>Slurring applied on projectile hit</p><h3 id="var/spawned_muzzle"><aside class="declaration">var </aside>spawned_muzzle <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L155"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 155"></a></h3><p>If a hitscan muzzle effect has been created for this &quot;path&quot;, reset during forceMoves.</p><h3 id="var/speed"><aside class="declaration">var </aside>speed <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L106"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 106"></a></h3><p>How many tiles we pass in a single SSprojectiles tick</p><h3 id="var/spread"><aside class="declaration">var </aside>spread <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L115"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 115"></a></h3><p>Random spread done projectile-side for convinience</p><h3 id="var/stamina"><aside class="declaration">var </aside>stamina <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L221"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 221"></a></h3><p>Extra stamina damage applied on projectile hit (in addition to the main damage)</p><h3 id="var/stamina_falloff_tile"><aside class="declaration">var </aside>stamina_falloff_tile <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L265"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 265"></a></h3><p>How much we want to drop stamina damage (defined by the stamina variable) per tile as it travels through the air</p><h3 id="var/starting"><aside class="declaration">var </aside>starting <aside>â€“ /<a href="turf.html">turf</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L42"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 42"></a></h3><p>Projectile's starting turf</p><h3 id="var/stutter"><aside class="declaration">var </aside>stutter <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L223"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 223"></a></h3><p>Stuttering applied on projectile hit</p><h3 id="var/suppressed"><aside class="declaration">var </aside>suppressed <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L34"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 34"></a></h3><p>One of three suppression states: NONE displays the hit message and produces a loud sound,
QUIET makes a quiet sound and only lets the victim know they've been shot, and VERY only makes a very quiet sound with no messages</p><h3 id="var/temporary_unstoppable_movement"><aside class="declaration">var </aside>temporary_unstoppable_movement <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L75"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 75"></a></h3><p>We are flagged PHASING temporarily to not stop moving when we Bump something but want to keep going anyways.</p><h3 id="var/ticks_to_deletion"><aside class="declaration">var </aside>ticks_to_deletion <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L248"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 248"></a></h3><p>How many ticks should we wait in queued deletion mode before qdeleting? Sometimes increased in animations</p><h3 id="var/tracer_type"><aside class="declaration">var </aside>tracer_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L158"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 158"></a></h3><p>Hitscan tracer effect left behind the projectile</p><h3 id="var/weak_against_armour"><aside class="declaration">var </aside>weak_against_armour <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L198"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 198"></a></h3><p>Whether or not our projectile doubles the value of affecting armour</p><h3 id="var/wound_falloff_tile"><aside class="declaration">var </aside>wound_falloff_tile <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L267"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 267"></a></h3><p>How much we want to drop both wound_bonus and exposed_wound_bonus (to a minimum of 0 for the latter) per tile, for falloff purposes</p><h3 id="var/xo"><aside class="declaration">var </aside>xo <aside>â€“ /final</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 38"></a></h3><p>Initial target x coordinate offset of the projectile</p><h3 id="var/yo"><aside class="declaration">var </aside>yo <aside>â€“ /final</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L40"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 40"></a></h3><p>Initial target y coordinate offset of the projectile</p><h2 id="proc">Proc Details</h2><h3 id="proc/CanPassThrough"><aside class="parent"><a title="/atom/movable" href="atom/movable.html#proc/CanPassThrough">â†‘</a></aside>CanPassThrough<aside>(/<a href="atom.html">atom</a>/blocker, movement_dir, blocker_opinion)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L715"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 715"></a></aside></h3><p>Projectile can pass through
Used to not even attempt to Bump() or fail to Cross() anything we already hit.</p><h3 id="proc/Moved"><aside class="parent"><a title="/atom/movable" href="atom/movable.html#proc/Moved">â†‘</a></aside>Moved<aside>(/<a href="atom.html">atom</a>/old_loc, movement_dir, forced, /list/old_locs, momentum_change)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L727"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 727"></a></aside></h3><p>Projectile moved:</p>
<p>If not fired yet, do not do anything. Else,</p>
<p>If temporary unstoppable movement used for piercing through things we already hit (impacted list) is set, unset it.
Scan turf we're now in for anything we can/should hit. This is useful for hitting non dense objects the user
directly clicks on, as well as for PHASING projectiles to be able to hit things at all as they don't ever Bump().</p><h3 id="proc/aim_projectile"><aside class="declaration">proc </aside>aim_projectile<aside>(/<a href="atom.html">atom</a>/target, /<a href="atom.html">atom</a>/source, /list/modifiers, deviation)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1235"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1235"></a></aside></h3><p>Aims the projectile at a target.</p>
<p>Must be passed at least one of a target or a list of click parameters.
If only passed the click modifiers the source atom must be a mob with a client.</p>
<p>Arguments:</p>
<ul>
<li><a href="atom.html" title="/atom">target</a>: (Optional) The thing that the projectile will be aimed at.</li>
<li><a href="atom.html" title="/atom">source</a>: The initial location of the projectile or the thing firing it.</li>
<li><a href="https://www.byond.com/docs/ref/#/list" title="/list">modifiers</a>: (Optional) A list of click parameters to apply to this operation.</li>
<li>deviation: (Optional) How the trajectory should deviate from the target in degrees.
<ul>
<li>//Spread is FORCED!</li>
</ul>
</li>
</ul><h3 id="proc/can_embed_into"><aside class="declaration">proc </aside>can_embed_into<aside>(/<a href="atom.html">atom</a>/hit)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1368"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1368"></a></aside></h3><p>Checks if the projectile can embed into someone</p><h3 id="proc/can_hit_target"><aside class="declaration">proc </aside>can_hit_target<aside>(/<a href="atom.html">atom</a>/target, direct_target, ignore_loc, cross_failed)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L625"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 625"></a></aside></h3><p>Returns true if the target atom is on our current turf and above the right layer
If direct target is true it's the originally clicked target.</p><h3 id="proc/create_hitscan_point"><aside class="declaration">proc </aside>create_hitscan_point<aside>(impact, tile_center, broken_segment)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1134"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1134"></a></aside></h3><p>Creates a new keypoint in which the tracer will split</p><h3 id="proc/get_embed"><aside class="declaration">proc </aside>get_embed<aside>() <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/embedding.html">embedding</a> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1413"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1413"></a></aside></h3><p>Fetches, or lazyloads, our embedding datum</p><h3 id="proc/impact"><aside class="declaration">proc </aside>impact<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L479"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 479"></a></aside></h3><p>Called when the projectile hits something
This can either be from it bumping something,
or it passing over a turf/being crossed and scanning that there is infact
a valid target it needs to hit.
This target isn't however necessarily WHAT it hits
that is determined by process_hit and select_target.</p>
<p>Furthermore, this proc shouldn't check can_hit_target - this should only be called if can hit target is already checked.
Also, we select_target to find what to process_hit first.</p><h3 id="proc/is_hostile_projectile"><aside class="declaration">proc </aside>is_hostile_projectile<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1358"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1358"></a></aside></h3><p>Is this projectile considered &quot;hostile&quot;?</p>
<p>By default all projectiles which deal damage or impart crowd control effects (including stamina) are hostile</p>
<p>This is NOT used for pacifist checks, that's handled by <a href="obj/item/ammo_casing.html#var/harmful" title="/obj/item/ammo_casing">/obj/item/ammo_casing/var/harmful</a>
This is used in places such as AI responses to determine if they're being threatened or not (among other places)</p><h3 id="proc/move_animate"><aside class="declaration">proc </aside>move_animate<aside>(animate_x, animate_y, animate_time, deleting)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1086"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1086"></a></aside></h3><p>Called every time projectile animates its movement, in case child wants to have custom animations.
Returning TRUE cancels normal animation</p><h3 id="proc/on_entered"><aside class="declaration">proc </aside>on_entered<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/entered_atom)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L706"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 706"></a></aside></h3><p>Projectile crossed: When something enters a projectile's tile, make sure the projectile hits it if it should be hitting it.</p><h3 id="proc/on_hit"><aside class="declaration">proc </aside>on_hit<aside>(/<a href="atom.html">atom</a>/target, blocked, pierce_hit)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L347"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 347"></a></aside></h3><p>Called when the projectile hits something</p>
<p>By default parent call will always return [BULLET_ACT_HIT] (unless qdeleted)
so it is save to assume a successful hit in children (though not necessarily successfully damaged - it could've been blocked)</p>
<p>Arguments</p>
<ul>
<li>target - thing hit</li>
<li>blocked - percentage of hit blocked (0 to 100)</li>
<li>pierce_hit - boolean, are we piercing through or regular hitting</li>
</ul>
<p>Returns</p>
<ul>
<li>Returns [BULLET_ACT_HIT] if we hit something. Default return value.</li>
<li>Returns [BULLET_ACT_BLOCK] if we were hit but sustained no effects (blocked it). Note, Being &quot;blocked&quot; =/= &quot;blocked is 100&quot;.</li>
<li>Returns [BULLET_ACT_FORCE_PIERCE] to have the projectile keep going instead of &quot;hitting&quot;, as if we were not hit at all.</li>
</ul><h3 id="proc/on_range"><aside class="declaration">proc </aside>on_range<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L327"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 327"></a></aside></h3><p>Called next tick after the projectile reaches its maximum range so the animation has time to fully play out</p><h3 id="proc/prehit_pierce"><aside class="declaration">proc </aside>prehit_pierce<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L743"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 743"></a></aside></h3><p>Checks if we should pierce something.</p>
<p>NOT meant to be a pure proc, since this replaces prehit() which was used to do things.
Return PROJECTILE_DELETE_WITHOUT_HITTING to delete projectile without hitting at all!</p><h3 id="proc/process_hitscan"><aside class="declaration">proc </aside>process_hitscan<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1100"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1100"></a></aside></h3><p>Attempts to force the projectile to move until the subsystem runs out of processing time, the projectile impacts something or gets frozen by timestop</p><h3 id="proc/process_homing"><aside class="declaration">proc </aside>process_homing<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1090"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1090"></a></aside></h3><p>Called every projectile loop for homing or alternatively, custom trajectory changes.</p><h3 id="proc/record_hitscan_start"><aside class="declaration">proc </aside>record_hitscan_start<aside>(offset)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1121"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1121"></a></aside></h3><p>Creates (or wipes clean) list of tracer keypoints and creates a first point.</p><h3 id="proc/reduce_range"><aside class="declaration">proc </aside>reduce_range<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L300"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 300"></a></aside></h3><p>Called every time a projectile passes one tile worth of movement</p><h3 id="proc/reflect"><aside class="declaration">proc </aside>reflect<aside>(/<a href="atom.html">atom</a>/hit_atom)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1372"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1372"></a></aside></h3><p>Reflects the projectile off of something</p><h3 id="proc/scan_moved_turf"><aside class="declaration">proc </aside>scan_moved_turf<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L686"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 686"></a></aside></h3><p>Scans if we should hit something on the turf we just moved to if we haven't already</p>
<p>This proc is a little high in overhead but allows us to not snowflake CanPass in living and other things.</p><h3 id="proc/select_target"><aside class="declaration">proc </aside>select_target<aside>(/<a href="turf.html">turf</a>/our_turf, /<a href="atom.html">atom</a>/bumped)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L597"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 597"></a></aside></h3><p>Selects a target to hit from a turf</p>
<p>@params
our_turf - Turf on which we hit the target
bumped - What we've impacted and why this selection was called in the first place.
If set, this atom is always treated as dense by can_hit_target.</p>
<p>Priority:
0. Anything that is already in impacted is ignored no matter what. Furthermore, in any bracket, if the target atom parameter is in it, that's hit first.
Furthermore, can_hit_target is always checked. This (entire proc) is PERFORMANCE OVERHEAD!! But, it shouldn't be &quot;&quot;too&quot;&quot; bad and I frankly don't have a better <em>generic non snowflakey</em> way that I can think of right now at 3 AM.
FURTHERMORE, mobs/objs have a density check from can_hit_target - to hit non dense objects over a turf, you must click on them, same for mobs that usually wouldn't get hit.</p>
<ol>
<li>Special check on what we bumped to see if it's a border object that intercepts hitting anything behind it</li>
<li>The thing originally aimed at/clicked on</li>
<li>Mobs - picks lowest buckled mob to prevent scarp piggybacking memes</li>
<li>Objs</li>
<li>Turf</li>
<li>Nothing</li>
</ol><h3 id="proc/set_angle_centered"><aside class="declaration">proc </aside>set_angle_centered<aside>(center_turf, new_angle)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L849"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 849"></a></aside></h3><p>Same as set_angle, but the reflection continues from the center of the object that reflects it instead of the side</p><h3 id="proc/set_embed"><aside class="declaration">proc </aside>set_embed<aside>(/<a href="datum.html">datum</a>/<a href="datum/embedding.html">embedding</a>/new_embed, dont_delete)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L1422"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 1422"></a></aside></h3><p>Sets our embedding datum to a different one. Can also take types</p><h3 id="proc/set_homing_target"><aside class="declaration">proc </aside>set_homing_target<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/projectiles/projectile.dm#L825"><img src="git.png" width="16" height="16" title="code/modules/projectiles/projectile.dm 825"></a></aside></h3><p>Makes projectile home onto the passed target with minor inaccuracy</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>