<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/dynamic_ruleset - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/dynamic_ruleset.html#var">Var Details</a> - <a href="datum/dynamic_ruleset.html#proc">Proc Details</a></header><main><h1>dynamic_ruleset <aside>/<a href="datum.html">datum</a>/<a href="datum/dynamic_ruleset.html">dynamic_ruleset</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L6"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 6"></a></h1><h2 id="dynamic-ruleset-datum">Dynamic ruleset datum</h2>
<p>These datums (which are not singletons) are used by dynamic to create antagonists</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/blacklisted_roles">blacklisted_roles</a></th><td>List of roles that are blacklisted from this ruleset
For roundstart rulesets, it will prevent players from being selected for this ruleset if they have one of these roles
For latejoin or midround rulesets, it will prevent players from being assigned to this ruleset if they have one of these roles</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/config_tag">config_tag</a></th><td>Tag the ruleset uses for configuring.
Don't change this unless you know what you're doing.</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/jobban_flag">jobban_flag</a></th><td>What flag to check for jobbans?
Optional, if unset, uses pref_flag for jobbans instead</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/log_data">log_data</a></th><td>Extra logging information can be set here, to be output into any admin messaging and dynamic logs.</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/max_antag_cap">max_antag_cap</a></th><td>How many candidates will be this ruleset try to select?
Ie. &quot;We have 10 cadidates, but we only want x of them to be antags&quot;</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/min_antag_cap">min_antag_cap</a></th><td>How many candidates are needed for this ruleset to be selected?
Ie. &quot;We won't even bother attempting to run this ruleset unless at least x players want to be it&quot;</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/min_pop">min_pop</a></th><td>The min population for which this ruleset is available.</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/minimum_required_age">minimum_required_age</a></th><td>Players whose account is less than this many days old will be filtered out of the candidate list</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/name">name</a></th><td>Human-readable name of the ruleset.</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/pref_flag">pref_flag</a></th><td>What flag to check for prefs?
Required if the antag has an associated preference, and must be unique
(unless RULESET_VARIATION is set in ruleset_flags)</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/preview_antag_datum">preview_antag_datum</a></th><td>Points to what antag datum this ruleset will use for generating a preview icon in the prefs menu</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/repeatable">repeatable</a></th><td>If set to TRUE, dynamic will be able to draft this ruleset again later on</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/repeatable_weight_decrease">repeatable_weight_decrease</a></th><td>Every time this ruleset is selected, the weight will be decreased by this amount</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/ruleset_flags">ruleset_flags</a></th><td>Flags for this ruleset</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/ruleset_lazy_templates">ruleset_lazy_templates</a></th><td>Templates necessary for this ruleset to be executed</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/selected_minds">selected_minds</a></th><td>List of all minds selected for this ruleset</td></tr><tr><th><a href="datum/dynamic_ruleset.html#var/weight">weight</a></th><td>The chance the ruleset is picked when selecting from the pool of rulesets.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/assign_role">assign_role</a></th><td>Used by the ruleset to actually assign the role to the player
This is ran after they have a player character spawned, and after they're in their job (with all their job equipment)</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/can_be_selected">can_be_selected</a></th><td>Any additional checks to see if this ruleset can be selected</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/configure_ruleset">configure_ruleset</a></th><td>Allows admins to configure rulesets before prepare_execution() is called.</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/create_execute_args">create_execute_args</a></th><td>Allows you to supply extra arguments to assign_role() if needed</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/execute">execute</a></th><td>Executes the ruleset, assigning the selected players to their roles.
No backing out now, at this point it's guaranteed to run.</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/get_always_blacklisted_roles">get_always_blacklisted_roles</a></th><td>Returns a list of roles that are always blacklisted from this ruleset, for mechanical reasons (an AI can't be a changeling)</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/get_antag_cap">get_antag_cap</a></th><td>Returns what the antag cap with the given population is.</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/get_blacklisted_roles">get_blacklisted_roles</a></th><td>Returns a list of roles that cannot be selected for this ruleset</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/get_candidate_mind">get_candidate_mind</a></th><td>Gets the mind of a candidate, can be overridden to return a different mind if necessary</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/get_config_blacklisted_roles">get_config_blacklisted_roles</a></th><td>Returns all the jobs the config says this ruleset cannot select</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/get_tier_specific_value">get_tier_specific_value</a></th><td>Gets the list value for the given tier, otherwise use next highest tier,
or failing that, next lowest</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/get_weight">get_weight</a></th><td>Calculates the weight of this ruleset for the given tier.</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/is_valid_candidate">is_valid_candidate</a></th><td>Any additional checks to see if this player is a valid candidate for this ruleset</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/load_templates">load_templates</a></th><td>Handles loading map templates that this ruleset requires</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/load_tier_list">load_tier_list</a></th><td>Used to create tier alists for weights and min_pop values</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/prepare_execution">prepare_execution</a></th><td>Prepares the ruleset for execution, primarily used for selecting the players who will be assigned to this ruleset</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/prepare_for_role">prepare_for_role</a></th><td>Handles any special logic that needs to be done for a player before they are assigned to this ruleset
This is ran before the player is in their job position, and before they even have a player character</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/round_result">round_result</a></th><td>Handles setting SSticker news report / mode result for more impactful rulsets</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/select_candidates">select_candidates</a></th><td>Returns a list of players picked for this ruleset</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/set_config_value">set_config_value</a></th><td>Used for parsing config entries to validate them</td></tr><tr><th><a href="datum/dynamic_ruleset.html#proc/trim_candidates">trim_candidates</a></th><td>Takes in a list of players and returns a list of players who are valid candidates for this ruleset
Don't touch this proc if you need to trim candidates further - override is_valid_candidate() instead</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/blacklisted_roles"><aside class="declaration">var </aside>blacklisted_roles <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L50"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 50"></a></h3><p>List of roles that are blacklisted from this ruleset
For roundstart rulesets, it will prevent players from being selected for this ruleset if they have one of these roles
For latejoin or midround rulesets, it will prevent players from being assigned to this ruleset if they have one of these roles</p><h3 id="var/config_tag"><aside class="declaration">var </aside>config_tag <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L11"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 11"></a></h3><p>Tag the ruleset uses for configuring.
Don't change this unless you know what you're doing.</p><h3 id="var/jobban_flag"><aside class="declaration">var </aside>jobban_flag <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L15"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 15"></a></h3><p>What flag to check for jobbans?
Optional, if unset, uses pref_flag for jobbans instead</p><h3 id="var/log_data"><aside class="declaration">var </aside>log_data <aside>– /final</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L84"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 84"></a></h3><p>Extra logging information can be set here, to be output into any admin messaging and dynamic logs.</p><h3 id="var/max_antag_cap"><aside class="declaration">var </aside>max_antag_cap <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L74"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 74"></a></h3><p>How many candidates will be this ruleset try to select?
Ie. &quot;We have 10 cadidates, but we only want x of them to be antags&quot;</p>
<p>This can either be</p>
<ul>
<li>A number
Or</li>
<li>A list in the form of list(&quot;denominator&quot; = x, &quot;offset&quot; = y)
which will divide the population size by x and add y to it to calculate the number of candidates</li>
</ul>
<p>If null, defaults to min_antag_cap</p><h3 id="var/min_antag_cap"><aside class="declaration">var </aside>min_antag_cap <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L61"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 61"></a></h3><p>How many candidates are needed for this ruleset to be selected?
Ie. &quot;We won't even bother attempting to run this ruleset unless at least x players want to be it&quot;</p>
<p>This can either be</p>
<ul>
<li>A number
Or</li>
<li>A list in the form of list(&quot;denominator&quot; = x, &quot;offset&quot; = y)
which will divide the population size by x and add y to it to calculate the number of candidates</li>
</ul><h3 id="var/min_pop"><aside class="declaration">var </aside>min_pop <aside>– /alist</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L46"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 46"></a></h3><p>The min population for which this ruleset is available.</p>
<p>This can either be</p>
<ul>
<li>A list of min populations corresponding to dynamic tiers.
If a tier is not specified, it will use the next highest tier.
Or</li>
<li>A single min population for all tiers.</li>
</ul><h3 id="var/minimum_required_age"><aside class="declaration">var </aside>minimum_required_age <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L80"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 80"></a></h3><p>Players whose account is less than this many days old will be filtered out of the candidate list</p><h3 id="var/name"><aside class="declaration">var </aside>name <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L8"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 8"></a></h3><p>Human-readable name of the ruleset.</p><h3 id="var/pref_flag"><aside class="declaration">var </aside>pref_flag <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L19"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 19"></a></h3><p>What flag to check for prefs?
Required if the antag has an associated preference, and must be unique
(unless RULESET_VARIATION is set in ruleset_flags)</p><h3 id="var/preview_antag_datum"><aside class="declaration">var </aside>preview_antag_datum <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L23"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 23"></a></h3><p>Points to what antag datum this ruleset will use for generating a preview icon in the prefs menu</p><h3 id="var/repeatable"><aside class="declaration">var </aside>repeatable <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L76"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 76"></a></h3><p>If set to TRUE, dynamic will be able to draft this ruleset again later on</p><h3 id="var/repeatable_weight_decrease"><aside class="declaration">var </aside>repeatable_weight_decrease <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L78"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 78"></a></h3><p>Every time this ruleset is selected, the weight will be decreased by this amount</p><h3 id="var/ruleset_flags"><aside class="declaration">var </aside>ruleset_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L21"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 21"></a></h3><p>Flags for this ruleset</p><h3 id="var/ruleset_lazy_templates"><aside class="declaration">var </aside>ruleset_lazy_templates <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L82"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 82"></a></h3><p>Templates necessary for this ruleset to be executed</p><h3 id="var/selected_minds"><aside class="declaration">var </aside>selected_minds <aside>– /final/list/<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L25"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 25"></a></h3><p>List of all minds selected for this ruleset</p><h3 id="var/weight"><aside class="declaration">var </aside>weight <aside>– /alist</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L36"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 36"></a></h3><p>The chance the ruleset is picked when selecting from the pool of rulesets.</p>
<p>This can either be</p>
<ul>
<li>A list of weight corresponding to dynamic tiers.
If a tier is not specified, it will use the next highest tier.
Or</li>
<li>A single weight for all tiers.</li>
</ul><h2 id="proc">Proc Details</h2><h3 id="proc/assign_role"><aside class="declaration">proc </aside>assign_role<aside>(/<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a>/candidate)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L356"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 356"></a></aside></h3><p>Used by the ruleset to actually assign the role to the player
This is ran after they have a player character spawned, and after they're in their job (with all their job equipment)</p>
<p>Override this proc to give out antag datums or special items or whatever</p><h3 id="proc/can_be_selected"><aside class="declaration">proc </aside>can_be_selected<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L148"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 148"></a></aside></h3><p>Any additional checks to see if this ruleset can be selected</p><h3 id="proc/configure_ruleset"><aside class="declaration">proc </aside>configure_ruleset<aside>(/<a href="mob.html">mob</a>/admin)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L375"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 375"></a></aside></h3><p>Allows admins to configure rulesets before prepare_execution() is called.</p>
<p>Only called if RULESET_ADMIN_CONFIGURABLE is set in ruleset_flags.
Also only called by midrounds currently.</p><h3 id="proc/create_execute_args"><aside class="declaration">proc </aside>create_execute_args<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L347"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 347"></a></aside></h3><p>Allows you to supply extra arguments to assign_role() if needed</p><h3 id="proc/execute"><aside class="declaration">proc </aside>execute<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L341"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 341"></a></aside></h3><p>Executes the ruleset, assigning the selected players to their roles.
No backing out now, at this point it's guaranteed to run.</p>
<p>Prefer to override assign_role() instead of this proc</p><h3 id="proc/get_always_blacklisted_roles"><aside class="declaration">proc </aside>get_always_blacklisted_roles<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L267"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 267"></a></aside></h3><p>Returns a list of roles that are always blacklisted from this ruleset, for mechanical reasons (an AI can't be a changeling)</p><h3 id="proc/get_antag_cap"><aside class="declaration">proc </aside>get_antag_cap<aside>(population_size, antag_cap)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L202"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 202"></a></aside></h3><p>Returns what the antag cap with the given population is.</p><h3 id="proc/get_blacklisted_roles"><aside class="declaration">proc </aside>get_blacklisted_roles<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L250"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 250"></a></aside></h3><p>Returns a list of roles that cannot be selected for this ruleset</p><h3 id="proc/get_candidate_mind"><aside class="declaration">proc </aside>get_candidate_mind<aside>(/<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/candidate)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L246"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 246"></a></aside></h3><p>Gets the mind of a candidate, can be overridden to return a different mind if necessary</p><h3 id="proc/get_config_blacklisted_roles"><aside class="declaration">proc </aside>get_config_blacklisted_roles<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L254"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 254"></a></aside></h3><p>Returns all the jobs the config says this ruleset cannot select</p><h3 id="proc/get_tier_specific_value"><aside class="declaration">proc </aside>get_tier_specific_value<aside>(/alist/values, tier)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L153"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 153"></a></aside></h3><p>Gets the list value for the given tier, otherwise use next highest tier,
or failing that, next lowest</p><h3 id="proc/get_weight"><aside class="declaration">proc </aside>get_weight<aside>(population_size, tier)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L176"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 176"></a></aside></h3><p>Calculates the weight of this ruleset for the given tier.</p>
<ul>
<li>population_size - How many players are alive</li>
<li>tier - The dynamic tier to calculate the weight for</li>
</ul><h3 id="proc/is_valid_candidate"><aside class="declaration">proc </aside>is_valid_candidate<aside>(/<a href="mob.html">mob</a>/candidate, /<a href="client.html">client</a>/candidate_client)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L321"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 321"></a></aside></h3><p>Any additional checks to see if this player is a valid candidate for this ruleset</p><h3 id="proc/load_templates"><aside class="declaration">proc </aside>load_templates<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L311"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 311"></a></aside></h3><p>Handles loading map templates that this ruleset requires</p><h3 id="proc/load_tier_list"><aside class="declaration">proc </aside>load_tier_list<aside>(/list/incoming_list)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L126"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 126"></a></aside></h3><p>Used to create tier alists for weights and min_pop values</p><h3 id="proc/prepare_execution"><aside class="declaration">proc </aside>prepare_execution<aside>(population_size, /list/<a href="mob.html">mob</a>/antag_candidates)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L217"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 217"></a></aside></h3><p>Prepares the ruleset for execution, primarily used for selecting the players who will be assigned to this ruleset</p>
<ul>
<li>antag_candidates - List of players who are candidates for this ruleset
This list is mutated by this proc!</li>
</ul>
<p>Returns TRUE if execution is ready, FALSE if it should be canceled</p><h3 id="proc/prepare_for_role"><aside class="declaration">proc </aside>prepare_for_role<aside>(/<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a>/candidate)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L331"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 331"></a></aside></h3><p>Handles any special logic that needs to be done for a player before they are assigned to this ruleset
This is ran before the player is in their job position, and before they even have a player character</p>
<p>Override this proc to do things like set forced jobs, DON'T assign roles or give out equipments here!</p><h3 id="proc/round_result"><aside class="declaration">proc </aside>round_result<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L366"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 366"></a></aside></h3><p>Handles setting SSticker news report / mode result for more impactful rulsets</p>
<p>Return TRUE if any result was set</p><h3 id="proc/select_candidates"><aside class="declaration">proc </aside>select_candidates<aside>(/list/<a href="mob.html">mob</a>/antag_candidates, num_candidates)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L295"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 295"></a></aside></h3><p>Returns a list of players picked for this ruleset</p><h3 id="proc/set_config_value"><aside class="declaration">proc </aside>set_config_value<aside>(new_var, new_val)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L95"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 95"></a></aside></h3><p>Used for parsing config entries to validate them</p><h3 id="proc/trim_candidates"><aside class="declaration">proc </aside>trim_candidates<aside>(/list/<a href="mob.html">mob</a>/antag_candidates)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/_dynamic_ruleset.dm#L275"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/_dynamic_ruleset.dm 275"></a></aside></h3><p>Takes in a list of players and returns a list of players who are valid candidates for this ruleset
Don't touch this proc if you need to trim candidates further - override is_valid_candidate() instead</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>