<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/mood_event - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/mood_event.html#var">Var Details</a> - <a href="datum/mood_event.html#proc">Proc Details</a></header><main><h1>mood_event <aside>/<a href="datum.html">datum</a>/<a href="datum/mood_event.html">mood_event</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L1"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/mood_event.html#var/category">category</a></th><td>A category to put multiple mood events. If one of the mood events in the category
is active while another mood event (from the same category) is triggered it will remove
the effects of the current mood event and replace it with the new one</td></tr><tr><th><a href="datum/mood_event.html#var/description">description</a></th><td>Description of the mood event</td></tr><tr><th><a href="datum/mood_event.html#var/event_flags">event_flags</a></th><td>Flags that determine what kind of event this is
For example, you might have a &quot;EVENT_FEAR&quot; flag that denotes this mood event relates to being afraid of something</td></tr><tr><th><a href="datum/mood_event.html#var/hidden">hidden</a></th><td>Is this mood event hidden on examine</td></tr><tr><th><a href="datum/mood_event.html#var/mood_change">mood_change</a></th><td>An integer value that affects overall sanity over time</td></tr><tr><th><a href="datum/mood_event.html#var/owner">owner</a></th><td>Owner of this mood event</td></tr><tr><th><a href="datum/mood_event.html#var/required_job">required_job</a></th><td>List of required jobs for this mood event</td></tr><tr><th><a href="datum/mood_event.html#var/special_screen_obj">special_screen_obj</a></th><td>Icon state of the unique mood event icon, if applicable</td></tr><tr><th><a href="datum/mood_event.html#var/special_screen_replace">special_screen_replace</a></th><td>if false, it will be an overlay instead</td></tr><tr><th><a href="datum/mood_event.html#var/timeout">timeout</a></th><td>How long this mood event should last</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/mood_event.html#proc/add_effects">add_effects</a></th><td>Called when added to a mob</td></tr><tr><th><a href="datum/mood_event.html#proc/be_refreshed">be_refreshed</a></th><td>Called when we get added to a mood datum, but a mood of our type in our category already</td></tr><tr><th><a href="datum/mood_event.html#proc/be_replaced">be_replaced</a></th><td>Called when we get added to a mood datum, but a mood of a different type is in our category</td></tr><tr><th><a href="datum/mood_event.html#proc/can_effect_mob">can_effect_mob</a></th><td>Called when this datum is created, checks if the passed mob can experience this mood event</td></tr><tr><th><a href="datum/mood_event.html#proc/on_add">on_add</a></th><td>Wrapper for the mood event being added to a mob</td></tr><tr><th><a href="datum/mood_event.html#proc/remove_effects">remove_effects</a></th><td>Called when the event is cleared from a mob</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/category"><aside class="declaration">var </aside>category <aside>– /final</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L15"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 15"></a></h3><p>A category to put multiple mood events. If one of the mood events in the category
is active while another mood event (from the same category) is triggered it will remove
the effects of the current mood event and replace it with the new one</p><h3 id="var/description"><aside class="declaration">var </aside>description <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L3"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 3"></a></h3><p>Description of the mood event</p><h3 id="var/event_flags"><aside class="declaration">var </aside>event_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 18"></a></h3><p>Flags that determine what kind of event this is
For example, you might have a &quot;EVENT_FEAR&quot; flag that denotes this mood event relates to being afraid of something</p><h3 id="var/hidden"><aside class="declaration">var </aside>hidden <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L9"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 9"></a></h3><p>Is this mood event hidden on examine</p><h3 id="var/mood_change"><aside class="declaration">var </aside>mood_change <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L5"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 5"></a></h3><p>An integer value that affects overall sanity over time</p><h3 id="var/owner"><aside class="declaration">var </aside>owner <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 24"></a></h3><p>Owner of this mood event</p><h3 id="var/required_job"><aside class="declaration">var </aside>required_job <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L26"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 26"></a></h3><p>List of required jobs for this mood event</p><h3 id="var/special_screen_obj"><aside class="declaration">var </aside>special_screen_obj <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 20"></a></h3><p>Icon state of the unique mood event icon, if applicable</p><h3 id="var/special_screen_replace"><aside class="declaration">var </aside>special_screen_replace <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 22"></a></h3><p>if false, it will be an overlay instead</p><h3 id="var/timeout"><aside class="declaration">var </aside>timeout <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L7"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 7"></a></h3><p>How long this mood event should last</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_effects"><aside class="declaration">proc </aside>add_effects<aside>(...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L112"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 112"></a></aside></h3><p>Called when added to a mob</p>
<ul>
<li>... - Any arguments passed to add_mood_event after the typepath are passed here</li>
</ul><h3 id="proc/be_refreshed"><aside class="declaration">proc </aside>be_refreshed<aside>(/<a href="datum.html">datum</a>/<a href="datum/mood.html">mood</a>/home, ...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L130"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 130"></a></aside></h3><p>Called when we get added to a mood datum, but a mood of our type in our category already</p>
<ul>
<li>home - the mood datum we are being added to</li>
<li>... - any other arguments that are passed to the mood event</li>
</ul>
<p>Return BLOCK_NEW_MOOD to stop the new mood event from being added
Return ALLOW_NEW_MOOD to allow the new mood event to be added - note this implicitly deletes [src]</p><h3 id="proc/be_replaced"><aside class="declaration">proc </aside>be_replaced<aside>(/<a href="datum.html">datum</a>/<a href="datum/mood.html">mood</a>/home, /<a href="datum.html">datum</a>/<a href="datum/mood_event.html">mood_event</a>/new_event, ...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L146"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 146"></a></aside></h3><p>Called when we get added to a mood datum, but a mood of a different type is in our category</p>
<ul>
<li>home - the mood datum we are being added to</li>
<li>new_event - the new mood event that is being added</li>
<li>... - any other arguments that are passed to the mood event</li>
</ul>
<p>Return BLOCK_NEW_MOOD to stop the new mood event from being added
Return ALLOW_NEW_MOOD to allow the new mood event to be added - note this implicitly deletes [src]</p><h3 id="proc/can_effect_mob"><aside class="declaration">proc </aside>can_effect_mob<aside>(/<a href="datum.html">datum</a>/<a href="datum/mood.html">mood</a>/home, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/who, ...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L47"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 47"></a></aside></h3><p>Called when this datum is created, checks if the passed mob can experience this mood event</p>
<ul>
<li>home - the mood datum we are being added to</li>
<li>who - the mob to check</li>
<li>... - any other arguments that are passed to the mood event</li>
</ul>
<p>Return TRUE if the mob can experience this mood event
Return FALSE if the mob should be unaffected</p><h3 id="proc/on_add"><aside class="declaration">proc </aside>on_add<aside>(/<a href="datum.html">datum</a>/<a href="datum/mood.html">mood</a>/home, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/who, /list/mood_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L76"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 76"></a></aside></h3><p>Wrapper for the mood event being added to a mob</p>
<ul>
<li>home - the mood datum we are being added to</li>
<li>who - the mob to add the mood event to</li>
<li>mood_args - any other arguments that are passed to the mood event</li>
</ul><h3 id="proc/remove_effects"><aside class="declaration">proc </aside>remove_effects<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mood_events/_mood_event.dm#L118"><img src="git.png" width="16" height="16" title="code/datums/mood_events/_mood_event.dm 118"></a></aside></h3><p>Called when the event is cleared from a mob</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>