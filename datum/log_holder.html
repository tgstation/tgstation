<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/log_holder - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/log_holder.html#var">Var Details</a> - <a href="datum/log_holder.html#proc">Proc Details</a></header><main><h1>log_holder <aside>/<a href="datum.html">datum</a>/<a href="datum/log_holder.html">log_holder</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 5"></a></h1><p>Main datum to manage logging actions</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/log_holder.html#var/category_group_tree">category_group_tree</a></th><td>category nesting tree for ui purposes</td></tr><tr><th><a href="datum/log_holder.html#var/data_cache">data_cache</a></th><td>Cached ui_data</td></tr><tr><th><a href="datum/log_holder.html#var/disabled_categories">disabled_categories</a></th><td>typecache list for categories that exist but are disabled</td></tr><tr><th><a href="datum/log_holder.html#var/human_readable_enabled">human_readable_enabled</a></th><td>Whether or not logging as human readable text is enabled</td></tr><tr><th><a href="datum/log_holder.html#var/last_data_update">last_data_update</a></th><td>Last time the ui_data was updated</td></tr><tr><th><a href="datum/log_holder.html#var/log_categories">log_categories</a></th><td>Associative: category -&gt; datum</td></tr><tr><th><a href="datum/log_holder.html#var/logging_start_timestamp">logging_start_timestamp</a></th><td>When the log_holder first initialized</td></tr><tr><th><a href="datum/log_holder.html#var/round_id">round_id</a></th><td>Round ID, if set, that logging is initialized for</td></tr><tr><th><a href="datum/log_holder.html#var/waiting_log_calls">waiting_log_calls</a></th><td>list of Log args waiting for processing pending log initialization</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/log_holder.html#proc/Log">Log</a></th><td>Adds an entry to the given category, if the category is disabled it will not be logged.
If the category does not exist, we will CRASH and log to the error category.
the data list is optional and will be recursively json serialized.</td></tr><tr><th><a href="datum/log_holder.html#proc/assemble_log_category_tree">assemble_log_category_tree</a></th><td>Iterates over all log category types to assemble them into a tree of main category -&gt; (sub category)[] while also checking for loops and sanity errors</td></tr><tr><th><a href="datum/log_holder.html#proc/get_recovery_file_for">get_recovery_file_for</a></th><td>Gets a recovery file for the given path. Caches the last known recovery path for each path.</td></tr><tr><th><a href="datum/log_holder.html#proc/init_category_file">init_category_file</a></th><td>Sets up the given category's file and header.</td></tr><tr><th><a href="datum/log_holder.html#proc/init_log_category">init_log_category</a></th><td>Initializes the given log category and populates the list of contained categories based on the sub category list</td></tr><tr><th><a href="datum/log_holder.html#proc/init_logging">init_logging</a></th><td>Assembles basic information for logging, creating the log category datums and checking for config flags as required</td></tr><tr><th><a href="datum/log_holder.html#proc/recursive_jsonify">recursive_jsonify</a></th><td>Recursively converts an associative list of datums into their jsonified(list) form</td></tr><tr><th><a href="datum/log_holder.html#proc/shutdown_logging">shutdown_logging</a></th><td>Tells the log_holder to not allow any more logging to be done, and dumps all categories to their json file</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/category_group_tree"><aside class="declaration">var </aside>category_group_tree <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 16"></a></h3><p>category nesting tree for ui purposes</p><h3 id="var/data_cache"><aside class="declaration">var </aside>data_cache <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 25"></a></h3><p>Cached ui_data</p><h3 id="var/disabled_categories"><aside class="declaration">var </aside>disabled_categories <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 14"></a></h3><p>typecache list for categories that exist but are disabled</p><h3 id="var/human_readable_enabled"><aside class="declaration">var </aside>human_readable_enabled <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 22"></a></h3><p>Whether or not logging as human readable text is enabled</p><h3 id="var/last_data_update"><aside class="declaration">var </aside>last_data_update <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L28"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 28"></a></h3><p>Last time the ui_data was updated</p><h3 id="var/log_categories"><aside class="declaration">var </aside>log_categories <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/log_category.html">log_category</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 12"></a></h3><p>Associative: category -&gt; datum</p><h3 id="var/logging_start_timestamp"><aside class="declaration">var </aside>logging_start_timestamp <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 9"></a></h3><p>When the log_holder first initialized</p><h3 id="var/round_id"><aside class="declaration">var </aside>round_id <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 7"></a></h3><p>Round ID, if set, that logging is initialized for</p><h3 id="var/waiting_log_calls"><aside class="declaration">var </aside>waiting_log_calls <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L19"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 19"></a></h3><p>list of Log args waiting for processing pending log initialization</p><h2 id="proc">Proc Details</h2><h3 id="proc/Log"><aside class="declaration">proc </aside>Log<aside>(category, message, /list/data)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L284"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 284"></a></aside></h3><p>Adds an entry to the given category, if the category is disabled it will not be logged.
If the category does not exist, we will CRASH and log to the error category.
the data list is optional and will be recursively json serialized.</p><h3 id="proc/assemble_log_category_tree"><aside class="declaration">proc </aside>assemble_log_category_tree<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L167"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 167"></a></aside></h3><p>Iterates over all log category types to assemble them into a tree of main category -&gt; (sub category)[] while also checking for loops and sanity errors</p><h3 id="proc/get_recovery_file_for"><aside class="declaration">proc </aside>get_recovery_file_for<aside>(path)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L210"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 210"></a></aside></h3><p>Gets a recovery file for the given path. Caches the last known recovery path for each path.</p><h3 id="proc/init_category_file"><aside class="declaration">proc </aside>init_category_file<aside>(/<a href="datum.html">datum</a>/<a href="datum/log_category.html">log_category</a>/category)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L223"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 223"></a></aside></h3><p>Sets up the given category's file and header.</p><h3 id="proc/init_log_category"><aside class="declaration">proc </aside>init_log_category<aside>(/<a href="datum.html">datum</a>/<a href="datum/log_category.html">log_category</a>/category_type, /list/<a href="datum.html">datum</a>/<a href="datum/log_category.html">log_category</a>/sub_categories)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L243"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 243"></a></aside></h3><p>Initializes the given log category and populates the list of contained categories based on the sub category list</p><h3 id="proc/init_logging"><aside class="declaration">proc </aside>init_logging<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L116"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 116"></a></aside></h3><p>Assembles basic information for logging, creating the log category datums and checking for config flags as required</p><h3 id="proc/recursive_jsonify"><aside class="declaration">proc </aside>recursive_jsonify<aside>(/list/data_list, /list/semvers)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L319"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 319"></a></aside></h3><p>Recursively converts an associative list of datums into their jsonified(list) form</p><h3 id="proc/shutdown_logging"><aside class="declaration">proc </aside>shutdown_logging<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/logging/log_holder.dm#L161"><img src="git.png" width="16" height="16" title="code/modules/logging/log_holder.dm 161"></a></aside></h3><p>Tells the log_holder to not allow any more logging to be done, and dumps all categories to their json file</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>