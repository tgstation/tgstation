<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/hook_and_move - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/hook_and_move.html#var">Var Details</a> - <a href="datum/hook_and_move.html#proc">Proc Details</a></header><main><h1>hook_and_move <aside>/<a href="datum.html">datum</a>/<a href="datum/hook_and_move.html">hook_and_move</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L93"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 93"></a></h1><p>Lightweight datum that just handles moving a target for the hook.
For the love of God, do not use this outside this file.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/hook_and_move.html#var/destination_ref">destination_ref</a></th><td>Weakref of the destination that the victim is heading towards.</td></tr><tr><th><a href="datum/hook_and_move.html#var/firer_ref">firer_ref</a></th><td>Weakref to the firer of the hook</td></tr><tr><th><a href="datum/hook_and_move.html#var/firer_ref_string">firer_ref_string</a></th><td>String to the REF() of the dude that fired us so we can ensure we always cleanup our traits</td></tr><tr><th><a href="datum/hook_and_move.html#var/knockdown_time">knockdown_time</a></th><td>How long we knockdown the victim for.</td></tr><tr><th><a href="datum/hook_and_move.html#var/last_movement">last_movement</a></th><td>The last time our movement fired.</td></tr><tr><th><a href="datum/hook_and_move.html#var/prevent_movement_traits">prevent_movement_traits</a></th><td>List of traits that prevent the user from moving. More restrictive than attempting to fire the hook by design.</td></tr><tr><th><a href="datum/hook_and_move.html#var/return_chain">return_chain</a></th><td>The chain beam we currently own.</td></tr><tr><th><a href="datum/hook_and_move.html#var/steps_per_tick">steps_per_tick</a></th><td>How many steps we force the victim to take per tick</td></tr><tr><th><a href="datum/hook_and_move.html#var/victim_ref">victim_ref</a></th><td>Weakref to the victim we are dragging</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/hook_and_move.html#proc/attempt_movement">attempt_movement</a></th><td>Attempts to move the victim towards the destination. Returns TRUE if we do a successful movement, FALSE otherwise.
second_attempt is a boolean to prevent infinite recursion.
If this whole series of events wasn't reliant on SSfastprocess firing as fast as it does, it would have been more useful to make this a move loop datum. But, we need the speed.</td></tr><tr><th><a href="datum/hook_and_move.html#proc/begin_pulling">begin_pulling</a></th><td>Uses fastprocessing to move our victim to the destination at a rather fast speed.</td></tr><tr><th><a href="datum/hook_and_move.html#proc/end_movement">end_movement</a></th><td>Cancels processing and removes the trait from the victim.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/destination_ref"><aside class="declaration">var </aside>destination_ref <aside>– /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L97"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 97"></a></h3><p>Weakref of the destination that the victim is heading towards.</p><h3 id="var/firer_ref"><aside class="declaration">var </aside>firer_ref <aside>– /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L99"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 99"></a></h3><p>Weakref to the firer of the hook</p><h3 id="var/firer_ref_string"><aside class="declaration">var </aside>firer_ref_string <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L101"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 101"></a></h3><p>String to the REF() of the dude that fired us so we can ensure we always cleanup our traits</p><h3 id="var/knockdown_time"><aside class="declaration">var </aside>knockdown_time <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L111"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 111"></a></h3><p>How long we knockdown the victim for.</p><h3 id="var/last_movement"><aside class="declaration">var </aside>last_movement <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L104"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 104"></a></h3><p>The last time our movement fired.</p><h3 id="var/prevent_movement_traits"><aside class="declaration">var </aside>prevent_movement_traits <aside>– /static/list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L114"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 114"></a></h3><p>List of traits that prevent the user from moving. More restrictive than attempting to fire the hook by design.</p><h3 id="var/return_chain"><aside class="declaration">var </aside>return_chain <aside>– /<a href="datum.html">datum</a>/<a href="datum/beam.html">beam</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L106"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 106"></a></h3><p>The chain beam we currently own.</p><h3 id="var/steps_per_tick"><aside class="declaration">var </aside>steps_per_tick <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L109"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 109"></a></h3><p>How many steps we force the victim to take per tick</p><h3 id="var/victim_ref"><aside class="declaration">var </aside>victim_ref <aside>– /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L95"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 95"></a></h3><p>Weakref to the victim we are dragging</p><h2 id="proc">Proc Details</h2><h3 id="proc/attempt_movement"><aside class="declaration">proc </aside>attempt_movement<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/subject, /<a href="atom.html">atom</a>/target, second_attempt)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L171"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 171"></a></aside></h3><p>Attempts to move the victim towards the destination. Returns TRUE if we do a successful movement, FALSE otherwise.
second_attempt is a boolean to prevent infinite recursion.
If this whole series of events wasn't reliant on SSfastprocess firing as fast as it does, it would have been more useful to make this a move loop datum. But, we need the speed.</p><h3 id="proc/begin_pulling"><aside class="declaration">proc </aside>begin_pulling<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/firer, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/victim, /<a href="atom.html">atom</a>/destination)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L125"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 125"></a></aside></h3><p>Uses fastprocessing to move our victim to the destination at a rather fast speed.</p><h3 id="proc/end_movement"><aside class="declaration">proc </aside>end_movement<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/projectiles/guns/special/meat_hook.dm#L142"><img src="git.png" width="16" height="16" title="code/modules/projectiles/guns/special/meat_hook.dm 142"></a></aside></h3><p>Cancels processing and removes the trait from the victim.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>