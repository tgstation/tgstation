<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/alarm_listener - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/alarm_listener.html#var">Var Details</a> - <a href="datum/alarm_listener.html#proc">Proc Details</a></header><main><h1>alarm_listener <aside>/<a href="datum.html">datum</a>/<a href="datum/alarm_listener.html">alarm_listener</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L98"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 98"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/alarm_listener.html#var/accepting_alarm_changes">accepting_alarm_changes</a></th><td>Should we allow alarm changes to go through or not</td></tr><tr><th><a href="datum/alarm_listener.html#var/alarms">alarms</a></th><td>List of alarm type -&gt; list of area name -&gt; list(area, ref to area's cameras, list(sources))</td></tr><tr><th><a href="datum/alarm_listener.html#var/allowed_areas">allowed_areas</a></th><td>List of allowed areas. if this is null it's ignored</td></tr><tr><th><a href="datum/alarm_listener.html#var/allowed_z_levels">allowed_z_levels</a></th><td>List of valid source z levels, ignored if null</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/alarm_listener.html#proc/New">New</a></th><td>Accepts a list of alarm types to pay attention to, a list of valid z levels, and a list of valid areas. areas and zlevels are ignored if null</td></tr><tr><th><a href="datum/alarm_listener.html#proc/add_alarm">add_alarm</a></th><td>Adds an alarm to our alarms list, you shouldn't be calling this manually
It should all be handled by the signal listening we do, unless you want to only send an alarm to one listener</td></tr><tr><th><a href="datum/alarm_listener.html#proc/allow_alarm_changes">allow_alarm_changes</a></th><td>Does what it says on the tin, exists for signal hooking</td></tr><tr><th><a href="datum/alarm_listener.html#proc/clear_alarm">clear_alarm</a></th><td>Removes an alarm to our alarms list, you probably shouldn't be calling this manually
It should all be handled by the signal listening we do, unless you want to only remove an alarm to one listener</td></tr><tr><th><a href="datum/alarm_listener.html#proc/clear_camera_ref">clear_camera_ref</a></th><td>Used to manually clear camera refs if one is ref'd directly</td></tr><tr><th><a href="datum/alarm_listener.html#proc/prevent_alarm_changes">prevent_alarm_changes</a></th><td>Does what it says on the tin, exists for signal hooking</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/accepting_alarm_changes"><aside class="declaration">var </aside>accepting_alarm_changes <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L107"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 107"></a></h3><p>Should we allow alarm changes to go through or not</p><h3 id="var/alarms"><aside class="declaration">var </aside>alarms <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L105"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 105"></a></h3><p>List of alarm type -&gt; list of area name -&gt; list(area, ref to area's cameras, list(sources))</p><h3 id="var/allowed_areas"><aside class="declaration">var </aside>allowed_areas <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L102"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 102"></a></h3><p>List of allowed areas. if this is null it's ignored</p><h3 id="var/allowed_z_levels"><aside class="declaration">var </aside>allowed_z_levels <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L100"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 100"></a></h3><p>List of valid source z levels, ignored if null</p><h2 id="proc">Proc Details</h2><h3 id="proc/New">New<aside>(alarms_to_listen_for, allowed_z_levels, allowed_areas)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L110"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 110"></a></aside></h3><p>Accepts a list of alarm types to pay attention to, a list of valid z levels, and a list of valid areas. areas and zlevels are ignored if null</p><h3 id="proc/add_alarm"><aside class="declaration">proc </aside>add_alarm<aside>(/<a href="datum.html">datum</a>/source, /<a href="datum.html">datum</a>/<a href="datum/alarm_handler.html">alarm_handler</a>/handler, alarm_type, /<a href="area.html">area</a>/source_area, source_z, optional_camera)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L121"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 121"></a></aside></h3><p>Adds an alarm to our alarms list, you shouldn't be calling this manually
It should all be handled by the signal listening we do, unless you want to only send an alarm to one listener</p><h3 id="proc/allow_alarm_changes"><aside class="declaration">proc </aside>allow_alarm_changes<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L191"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 191"></a></aside></h3><p>Does what it says on the tin, exists for signal hooking</p><h3 id="proc/clear_alarm"><aside class="declaration">proc </aside>clear_alarm<aside>(/<a href="datum.html">datum</a>/source, /<a href="datum.html">datum</a>/<a href="datum/alarm_handler.html">alarm_handler</a>/handler, alarm_type, /<a href="area.html">area</a>/source_area)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L157"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 157"></a></aside></h3><p>Removes an alarm to our alarms list, you probably shouldn't be calling this manually
It should all be handled by the signal listening we do, unless you want to only remove an alarm to one listener</p><h3 id="proc/clear_camera_ref"><aside class="declaration">proc </aside>clear_camera_ref<aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/camera.html">camera</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L196"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 196"></a></aside></h3><p>Used to manually clear camera refs if one is ref'd directly</p><h3 id="proc/prevent_alarm_changes"><aside class="declaration">proc </aside>prevent_alarm_changes<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/alarm.dm#L186"><img src="git.png" width="16" height="16" title="code/datums/alarm.dm 186"></a></aside></h3><p>Does what it says on the tin, exists for signal hooking</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>