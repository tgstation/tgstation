<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/active_bet - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/active_bet.html#var">Var Details</a> - <a href="datum/active_bet.html#proc">Proc Details</a></header><main><h1>active_bet <aside>/<a href="datum.html">datum</a>/<a href="datum/active_bet.html">active_bet</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L137"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 137"></a></h1><p>The active bet that our app will create &amp; use, handles following who owns the bet,
who is betting, and also takes care of paying out at the end.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/active_bet.html#var/bet_owner">bet_owner</a></th><td>The person owning the bet, who will choose which option has won.</td></tr><tr><th><a href="datum/active_bet.html#var/description">description</a></th><td>The description of the bet</td></tr><tr><th><a href="datum/active_bet.html#var/locked">locked</a></th><td>Boolean on whether the bet is locked from getting new betters, or current ones from taking their money out.</td></tr><tr><th><a href="datum/active_bet.html#var/name">name</a></th><td>The name of the bet</td></tr><tr><th><a href="datum/active_bet.html#var/newscaster_message">newscaster_message</a></th><td>The message we sent to the newscaster, which we'll then reply to once the betting is over.</td></tr><tr><th><a href="datum/active_bet.html#var/options">options</a></th><td></td></tr><tr><th><a href="datum/active_bet.html#var/total_amount_bet">total_amount_bet</a></th><td>Total amount of money that has been bet.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/active_bet.html#proc/advertise_bet">advertise_bet</a></th><td>Place a feed article advertising our bet.</td></tr><tr><th><a href="datum/active_bet.html#proc/bet_money">bet_money</a></th><td>Puts a bank account's money bet on a given option.</td></tr><tr><th><a href="datum/active_bet.html#proc/cancel_bet">cancel_bet</a></th><td>Cancels your bet, removing your bet and refunding your money.</td></tr><tr><th><a href="datum/active_bet.html#proc/get_bets">get_bets</a></th><td>Returns how many bets there is per option</td></tr><tr><th><a href="datum/active_bet.html#proc/payout">payout</a></th><td>Pays out the loser's money equally to all the winners, or refunds it all if no winning option was given.</td></tr><tr><th><a href="datum/active_bet.html#proc/reply_to_feed">reply_to_feed</a></th><td>Reply to our previously placed advertisement feed article.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/bet_owner"><aside class="declaration">var </aside>bet_owner <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L139"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 139"></a></h3><p>The person owning the bet, who will choose which option has won.</p><h3 id="var/description"><aside class="declaration">var </aside>description <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L143"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 143"></a></h3><p>The description of the bet</p><h3 id="var/locked"><aside class="declaration">var </aside>locked <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L145"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 145"></a></h3><p>Boolean on whether the bet is locked from getting new betters, or current ones from taking their money out.</p><h3 id="var/name"><aside class="declaration">var </aside>name <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L141"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 141"></a></h3><p>The name of the bet</p><h3 id="var/newscaster_message"><aside class="declaration">var </aside>newscaster_message <aside>– /<a href="datum.html">datum</a>/<a href="datum/feed_message.html">feed_message</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L162"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 162"></a></h3><p>The message we sent to the newscaster, which we'll then reply to once the betting is over.</p><h3 id="var/options"><aside class="declaration">var </aside>options <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L159"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 159"></a></h3><ul>
<li>Assoc list of options, with each option having a list of people betting and the amount they've bet.
options = list(
OPTION_A = list(
PERSON_1_ACCOUNT = bet_amount,
PERSON_2_ACCOUNT = bet_amount,
),
OPTION_B = list(
PERSON_3_ACCOUNT = bet_amount,
),
)</li>
</ul><h3 id="var/total_amount_bet"><aside class="declaration">var </aside>total_amount_bet <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L147"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 147"></a></h3><p>Total amount of money that has been bet.</p><h2 id="proc">Proc Details</h2><h3 id="proc/advertise_bet"><aside class="declaration">proc </aside>advertise_bet<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L181"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 181"></a></aside></h3><p>Place a feed article advertising our bet.</p><h3 id="proc/bet_money"><aside class="declaration">proc </aside>bet_money<aside>(/<a href="datum.html">datum</a>/<a href="datum/bank_account.html">bank_account</a>/better, money_betting, option_betting)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L240"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 240"></a></aside></h3><p>Puts a bank account's money bet on a given option.</p><h3 id="proc/cancel_bet"><aside class="declaration">proc </aside>cancel_bet<aside>(/<a href="datum.html">datum</a>/<a href="datum/bank_account.html">bank_account</a>/better)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L284"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 284"></a></aside></h3><p>Cancels your bet, removing your bet and refunding your money.</p><h3 id="proc/get_bets"><aside class="declaration">proc </aside>get_bets<aside>(/<a href="datum.html">datum</a>/<a href="datum/bank_account.html">bank_account</a>/user_account)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L200"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 200"></a></aside></h3><p>Returns how many bets there is per option</p><h3 id="proc/payout"><aside class="declaration">proc </aside>payout<aside>(winning_option)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L214"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 214"></a></aside></h3><p>Pays out the loser's money equally to all the winners, or refunds it all if no winning option was given.</p><h3 id="proc/reply_to_feed"><aside class="declaration">proc </aside>reply_to_feed<aside>(winning_option)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/modular_computers/file_system/programs/betting.dm#L190"><img src="git.png" width="16" height="16" title="code/modules/modular_computers/file_system/programs/betting.dm 190"></a></aside></h3><p>Reply to our previously placed advertisement feed article.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>