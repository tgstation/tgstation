<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/poll_option - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/poll_option.html#var">Var Details</a> - <a href="datum/poll_option.html#proc">Proc Details</a></header><main><h1>poll_option <aside>/<a href="datum.html">datum</a>/<a href="datum/poll_option.html">poll_option</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 49"></a></h1><p>Datum which holds details of a poll option loaded from the database.</p>
<p>Used to minimize the need for querying this data every time it's needed.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/poll_option.html#var/default_percentage_calc">default_percentage_calc</a></th><td>Hint for statbus, not used by the game; If this option should be included by default when calculating the resulting percentages of all options for this poll</td></tr><tr><th><a href="datum/poll_option.html#var/desc_max">desc_max</a></th><td>Optional for rating polls, description shown next to the maximum value</td></tr><tr><th><a href="datum/poll_option.html#var/desc_mid">desc_mid</a></th><td>Optional for rating polls, description shown next to the rounded whole middle value</td></tr><tr><th><a href="datum/poll_option.html#var/desc_min">desc_min</a></th><td>Optional for rating polls, description shown next to the minimum value</td></tr><tr><th><a href="datum/poll_option.html#var/max_val">max_val</a></th><td>For rating polls, the maximum selectable value allowed; Supported value range is -2147483648 to 2147483647</td></tr><tr><th><a href="datum/poll_option.html#var/min_val">min_val</a></th><td>For rating polls, the minimum selectable value allowed; Supported value range is -2147483648 to 2147483647</td></tr><tr><th><a href="datum/poll_option.html#var/option_id">option_id</a></th><td>Table id of this option, will be null until poll has been created.</td></tr><tr><th><a href="datum/poll_option.html#var/parent_poll">parent_poll</a></th><td>Reference to the poll this option belongs to</td></tr><tr><th><a href="datum/poll_option.html#var/text">text</a></th><td>Description/name of this option</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/poll_option.html#proc/delete_option">delete_option</a></th><td>Sets a poll option and its votes as deleted in the database then deletes its datum.</td></tr><tr><th><a href="datum/poll_option.html#proc/save_option">save_option</a></th><td>Inserts or updates a poll option to the database.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/default_percentage_calc"><aside class="declaration">var </aside>default_percentage_calc <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L67"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 67"></a></h3><p>Hint for statbus, not used by the game; If this option should be included by default when calculating the resulting percentages of all options for this poll</p><h3 id="var/desc_max"><aside class="declaration">var </aside>desc_max <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L65"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 65"></a></h3><p>Optional for rating polls, description shown next to the maximum value</p><h3 id="var/desc_mid"><aside class="declaration">var </aside>desc_mid <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L63"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 63"></a></h3><p>Optional for rating polls, description shown next to the rounded whole middle value</p><h3 id="var/desc_min"><aside class="declaration">var </aside>desc_min <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L61"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 61"></a></h3><p>Optional for rating polls, description shown next to the minimum value</p><h3 id="var/max_val"><aside class="declaration">var </aside>max_val <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L59"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 59"></a></h3><p>For rating polls, the maximum selectable value allowed; Supported value range is -2147483648 to 2147483647</p><h3 id="var/min_val"><aside class="declaration">var </aside>min_val <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L57"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 57"></a></h3><p>For rating polls, the minimum selectable value allowed; Supported value range is -2147483648 to 2147483647</p><h3 id="var/option_id"><aside class="declaration">var </aside>option_id <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L53"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 53"></a></h3><p>Table id of this option, will be null until poll has been created.</p><h3 id="var/parent_poll"><aside class="declaration">var </aside>parent_poll <aside>– /<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L51"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 51"></a></h3><p>Reference to the poll this option belongs to</p><h3 id="var/text"><aside class="declaration">var </aside>text <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L55"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 55"></a></h3><p>Description/name of this option</p><h2 id="proc">Proc Details</h2><h3 id="proc/delete_option"><aside class="declaration">proc </aside>delete_option<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L674"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 674"></a></aside></h3><p>Sets a poll option and its votes as deleted in the database then deletes its datum.</p><h3 id="proc/save_option"><aside class="declaration">proc </aside>save_option<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/admin/poll_management.dm#L640"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 640"></a></aside></h3><p>Inserts or updates a poll option to the database.</p>
<p>Uses INSERT ON DUPLICATE KEY UPDATE to handle both inserting and updating at once.
The list of columns and values is built dynamically to avoid excess data being sent when not a rating type poll.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>