<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/adventure - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/adventure.html#var">Var Details</a> - <a href="datum/adventure.html#proc">Proc Details</a></header><main><h1>adventure <aside>/<a href="datum.html">datum</a>/<a href="datum/adventure.html">adventure</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L160"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 160"></a></h1><p>text adventure instance, holds data about nodes/choices/etc and of current play state.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/adventure.html#var/band_modifiers">band_modifiers</a></th><td>Modifiers to band scan values</td></tr><tr><th><a href="datum/adventure.html#var/current_node">current_node</a></th><td>Current active adventure node</td></tr><tr><th><a href="datum/adventure.html#var/deep_scan_description">deep_scan_description</a></th><td>Opional description shown after site deep scan</td></tr><tr><th><a href="datum/adventure.html#var/delayed_action">delayed_action</a></th><td>Delayed state properties. If not null, means adventure is in delayed action state and will contain list(delay_time,delay_message)</td></tr><tr><th><a href="datum/adventure.html#var/loot_categories">loot_categories</a></th><td>Loot table ids used as reward for finishing the adventure successfully.</td></tr><tr><th><a href="datum/adventure.html#var/name">name</a></th><td>Adventure name, this organization only, not visible to users</td></tr><tr><th><a href="datum/adventure.html#var/nodes">nodes</a></th><td>Nodes for this adventure, represent single scene.</td></tr><tr><th><a href="datum/adventure.html#var/previous_node_id">previous_node_id</a></th><td>Last other node than this one. Used by GO_BACK_NODE</td></tr><tr><th><a href="datum/adventure.html#var/qualities">qualities</a></th><td>Assoc list of quality name = value</td></tr><tr><th><a href="datum/adventure.html#var/required_site_traits">required_site_traits</a></th><td>Required site traits for the adventure to appear</td></tr><tr><th><a href="datum/adventure.html#var/starting_node">starting_node</a></th><td>Node the adventure will start at</td></tr><tr><th><a href="datum/adventure.html#var/starting_qualities">starting_qualities</a></th><td>List of starting quality values, these will be set before first node is encountered.</td></tr><tr><th><a href="datum/adventure.html#var/trigger_loop_safety">trigger_loop_safety</a></th><td>Keeps track firing of triggers until stop state to prevent loops</td></tr><tr><th><a href="datum/adventure.html#var/triggers">triggers</a></th><td>Triggers for this adventure, checked after quality changes to cause instantenous results</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/adventure.html#proc/apply_adventure_effect">apply_adventure_effect</a></th><td>Applies changes encoded in effect data and processes triggers, returns TRUE if the change forced node change.</td></tr><tr><th><a href="datum/adventure.html#proc/check_requirement_group">check_requirement_group</a></th><td>Recursively validates group requirements.</td></tr><tr><th><a href="datum/adventure.html#proc/check_requirements">check_requirements</a></th><td>Checks if current qualities satisfy passed in requirements</td></tr><tr><th><a href="datum/adventure.html#proc/end_adventure">end_adventure</a></th><td>Finish adventure</td></tr><tr><th><a href="datum/adventure.html#proc/handle_special_nodes">handle_special_nodes</a></th><td>Handles special node ID's</td></tr><tr><th><a href="datum/adventure.html#proc/process_adventure_value">process_adventure_value</a></th><td>Extracts raw value from special value objects</td></tr><tr><th><a href="datum/adventure.html#proc/validate">validate</a></th><td>Basic sanity checks to ensure broken adventures are not used.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/band_modifiers"><aside class="declaration">var </aside>band_modifiers <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L168"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 168"></a></h3><p>Modifiers to band scan values</p><h3 id="var/current_node"><aside class="declaration">var </aside>current_node <aside>– /<a href="datum.html">datum</a>/<a href="datum/adventure_node.html">adventure_node</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L184"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 184"></a></h3><p>Current active adventure node</p><h3 id="var/deep_scan_description"><aside class="declaration">var </aside>deep_scan_description <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L180"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 180"></a></h3><p>Opional description shown after site deep scan</p><h3 id="var/delayed_action"><aside class="declaration">var </aside>delayed_action <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L190"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 190"></a></h3><p>Delayed state properties. If not null, means adventure is in delayed action state and will contain list(delay_time,delay_message)</p><h3 id="var/loot_categories"><aside class="declaration">var </aside>loot_categories <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L170"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 170"></a></h3><p>Loot table ids used as reward for finishing the adventure successfully.</p><h3 id="var/name"><aside class="declaration">var </aside>name <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L162"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 162"></a></h3><p>Adventure name, this organization only, not visible to users</p><h3 id="var/nodes"><aside class="declaration">var </aside>nodes <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L172"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 172"></a></h3><p>Nodes for this adventure, represent single scene.</p><h3 id="var/previous_node_id"><aside class="declaration">var </aside>previous_node_id <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L186"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 186"></a></h3><p>Last other node than this one. Used by GO_BACK_NODE</p><h3 id="var/qualities"><aside class="declaration">var </aside>qualities <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L188"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 188"></a></h3><p>Assoc list of quality name = value</p><h3 id="var/required_site_traits"><aside class="declaration">var </aside>required_site_traits <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L166"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 166"></a></h3><p>Required site traits for the adventure to appear</p><h3 id="var/starting_node"><aside class="declaration">var </aside>starting_node <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L164"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 164"></a></h3><p>Node the adventure will start at</p><h3 id="var/starting_qualities"><aside class="declaration">var </aside>starting_qualities <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L176"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 176"></a></h3><p>List of starting quality values, these will be set before first node is encountered.</p><h3 id="var/trigger_loop_safety"><aside class="declaration">var </aside>trigger_loop_safety <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L178"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 178"></a></h3><p>Keeps track firing of triggers until stop state to prevent loops</p><h3 id="var/triggers"><aside class="declaration">var </aside>triggers <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L174"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 174"></a></h3><p>Triggers for this adventure, checked after quality changes to cause instantenous results</p><h2 id="proc">Proc Details</h2><h3 id="proc/apply_adventure_effect"><aside class="declaration">proc </aside>apply_adventure_effect<aside>(/list/effect_data, process_triggers)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L325"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 325"></a></aside></h3><p>Applies changes encoded in effect data and processes triggers, returns TRUE if the change forced node change.</p><h3 id="proc/check_requirement_group"><aside class="declaration">proc </aside>check_requirement_group<aside>(raw_group_data)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L391"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 391"></a></aside></h3><p>Recursively validates group requirements.</p><h3 id="proc/check_requirements"><aside class="declaration">proc </aside>check_requirements<aside>(raw_requirements)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L376"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 376"></a></aside></h3><p>Checks if current qualities satisfy passed in requirements</p><h3 id="proc/end_adventure"><aside class="declaration">proc </aside>end_adventure<aside>(result)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L207"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 207"></a></aside></h3><p>Finish adventure</p><h3 id="proc/handle_special_nodes"><aside class="declaration">proc </aside>handle_special_nodes<aside>(node_id)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L228"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 228"></a></aside></h3><p>Handles special node ID's</p><h3 id="proc/process_adventure_value"><aside class="declaration">proc </aside>process_adventure_value<aside>(raw_value)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L364"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 364"></a></aside></h3><p>Extracts raw value from special value objects</p><h3 id="proc/validate"><aside class="declaration">proc </aside>validate<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/explorer_drone/adventure.dm#L193"><img src="git.png" width="16" height="16" title="code/modules/explorer_drone/adventure.dm 193"></a></aside></h3><p>Basic sanity checks to ensure broken adventures are not used.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>