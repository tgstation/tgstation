<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/cell_tracker - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/cell_tracker.html#var">Var Details</a> - <a href="datum/cell_tracker.html#proc">Proc Details</a></header><main><h1>cell_tracker <aside>/<a href="datum.html">datum</a>/<a href="datum/cell_tracker.html">cell_tracker</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 12"></a></h1><p>Spatial gridmap, cell tracking</p>
<p>This datum exists to make the large, repeated &quot;everything in some range&quot; pattern faster
Rather then just refreshing against everything, we track all the cells in range of the passed in &quot;window&quot;
This lets us do entered/left logic, and make ordinarially quite expensive logic much cheaper</p>
<p>Note: This system should not be used for things who have strict requirements about what is NOT in their processed entries
It should instead only be used for logic that only really cares about limiting how much gets &quot;entered&quot; in any one call
Because we apply this limitation, we can do things to make our code much less prone to unneeded work</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/cell_tracker.html#var/inner_window_x_radius">inner_window_x_radius</a></th><td>The height (y radius) of our inner window</td></tr><tr><th><a href="datum/cell_tracker.html#var/inner_window_y_radius">inner_window_y_radius</a></th><td>The width (x radius) of our inner window</td></tr><tr><th><a href="datum/cell_tracker.html#var/outer_window_x_radius">outer_window_x_radius</a></th><td>The height (y radius) of our outer window</td></tr><tr><th><a href="datum/cell_tracker.html#var/outer_window_y_radius">outer_window_y_radius</a></th><td>The width (x radius) of our outer window</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/cell_tracker.html#proc/New">New</a></th><td>Accepts a width and height to use for this tracker
Also accepts the ratio to use between inner and outer window. Optional, defaults to 2</td></tr><tr><th><a href="datum/cell_tracker.html#proc/recalculate_cells">recalculate_cells</a></th><td>Recalculates our member list, returns a list in the form list(new members, old members) for reaction
Accepts the turf to use as our &quot;center&quot;</td></tr><tr><th><a href="datum/cell_tracker.html#proc/recalculate_type_members">recalculate_type_members</a></th><td>Returns a list of newly and formerly joined spatial grid managed objects of type [type] in the form list(new, old)
Takes the center of our window as input</td></tr><tr><th><a href="datum/cell_tracker.html#proc/set_bounds">set_bounds</a></th><td>Takes a width and height, and uses them to set the inner window, and interpolate the outer window</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/inner_window_x_radius"><aside class="declaration">var </aside>inner_window_x_radius <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 17"></a></h3><p>The height (y radius) of our inner window</p><h3 id="var/inner_window_y_radius"><aside class="declaration">var </aside>inner_window_y_radius <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L19"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 19"></a></h3><p>The width (x radius) of our inner window</p><h3 id="var/outer_window_x_radius"><aside class="declaration">var </aside>outer_window_x_radius <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 25"></a></h3><p>The height (y radius) of our outer window</p><h3 id="var/outer_window_y_radius"><aside class="declaration">var </aside>outer_window_y_radius <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 27"></a></h3><p>The width (x radius) of our outer window</p><h2 id="proc">Proc Details</h2><h3 id="proc/New">New<aside>(width, height, inner_outer_ratio)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 31"></a></aside></h3><p>Accepts a width and height to use for this tracker
Also accepts the ratio to use between inner and outer window. Optional, defaults to 2</p><h3 id="proc/recalculate_cells"><aside class="declaration">proc </aside>recalculate_cells<aside>(/<a href="turf.html">turf</a>/center)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L82"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 82"></a></aside></h3><p>Recalculates our member list, returns a list in the form list(new members, old members) for reaction
Accepts the turf to use as our &quot;center&quot;</p><h3 id="proc/recalculate_type_members"><aside class="declaration">proc </aside>recalculate_type_members<aside>(/<a href="turf.html">turf</a>/center, type)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L55"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 55"></a></aside></h3><p>Returns a list of newly and formerly joined spatial grid managed objects of type [type] in the form list(new, old)
Takes the center of our window as input</p><h3 id="proc/set_bounds"><aside class="declaration">proc </aside>set_bounds<aside>(width, height, ratio)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/spatial_grid/cell_tracker.dm#L43"><img src="git.png" width="16" height="16" title="code/modules/spatial_grid/cell_tracker.dm 43"></a></aside></h3><p>Takes a width and height, and uses them to set the inner window, and interpolate the outer window</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>