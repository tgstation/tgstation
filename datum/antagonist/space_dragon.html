<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/antagonist/space_dragon - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/antagonist/space_dragon.html#var">Var Details</a> - <a href="datum/antagonist/space_dragon.html#proc">Proc Details</a></header><main><h1>space_dragon <aside>/<a href="datum.html">datum</a>/<a href="datum/antagonist.html">antagonist</a>/<a href="datum/antagonist/space_dragon.html">space_dragon</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L1"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/ai_to_spawn">ai_to_spawn</a></th><td>What AI mobs to spawn from this dragon's rifts</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/carp">carp</a></th><td>All space carps created by this antagonist space dragon</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/chosen_rift_areas">chosen_rift_areas</a></th><td>What areas are we allowed to place rifts in?</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/maxRiftTimer">maxRiftTimer</a></th><td>Maximum amount of time which can pass without a rift before Space Dragon despawns.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/minion_to_spawn">minion_to_spawn</a></th><td>What mob to spawn from ghosts using this dragon's rifts</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/objective_complete">objective_complete</a></th><td>Whether or not Space Dragon has completed their objective, and thus triggered the ending sequence.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/riftTimer">riftTimer</a></th><td>Current time since the the last rift was activated.  If set to -1, does not increment.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/rift_ability">rift_ability</a></th><td>The innate ability to summon rifts</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/rift_list">rift_list</a></th><td>A list of all of the rifts created by Space Dragon.  Used for setting them all to infinite carp spawn when Space Dragon wins, and removing them when Space Dragon dies.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/rifts_charged">rifts_charged</a></th><td>How many rifts have been successfully charged</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#var/wavespeak">wavespeak</a></th><td>Wavespeak mind linker, to allow telepathy between dragon and carps</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/antagonist/space_dragon.html#proc/destroy_rifts">destroy_rifts</a></th><td>Destroys all of Space Dragon's current rifts.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#proc/permanant_empower">permanant_empower</a></th><td>Gives Space Dragon their the rift speed buff permanently and fully heals the user.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#proc/rift_checks">rift_checks</a></th><td>Checks to see if we need to do anything with the current state of the dragon's rifts.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#proc/rift_depower">rift_depower</a></th><td>Removes Space Dragon's rift speed buff.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#proc/rift_empower">rift_empower</a></th><td>Handles Space Dragon's temporary empowerment after boosting a rift.</td></tr><tr><th><a href="datum/antagonist/space_dragon.html#proc/victory">victory</a></th><td>Sets up Space Dragon's victory for completing the objectives.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/ai_to_spawn"><aside class="declaration">var </aside>ai_to_spawn <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L26"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 26"></a></h3><p>What AI mobs to spawn from this dragon's rifts</p><h3 id="var/carp"><aside class="declaration">var </aside>carp <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L10"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 10"></a></h3><p>All space carps created by this antagonist space dragon</p><h3 id="var/chosen_rift_areas"><aside class="declaration">var </aside>chosen_rift_areas <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L30"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 30"></a></h3><p>What areas are we allowed to place rifts in?</p><h3 id="var/maxRiftTimer"><aside class="declaration">var </aside>maxRiftTimer <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 16"></a></h3><p>Maximum amount of time which can pass without a rift before Space Dragon despawns.</p><h3 id="var/minion_to_spawn"><aside class="declaration">var </aside>minion_to_spawn <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L24"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 24"></a></h3><p>What mob to spawn from ghosts using this dragon's rifts</p><h3 id="var/objective_complete"><aside class="declaration">var </aside>objective_complete <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 22"></a></h3><p>Whether or not Space Dragon has completed their objective, and thus triggered the ending sequence.</p><h3 id="var/riftTimer"><aside class="declaration">var </aside>riftTimer <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 14"></a></h3><p>Current time since the the last rift was activated.  If set to -1, does not increment.</p><h3 id="var/rift_ability"><aside class="declaration">var </aside>rift_ability <aside>– /<a href="datum.html">datum</a>/<a href="datum/action.html">action</a>/<a href="datum/action/innate.html">innate</a>/summon_rift</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 12"></a></h3><p>The innate ability to summon rifts</p><h3 id="var/rift_list"><aside class="declaration">var </aside>rift_list <aside>– /list/<a href="obj.html">obj</a>/<a href="obj/structure.html">structure</a>/<a href="obj/structure/carp_rift.html">carp_rift</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 18"></a></h3><p>A list of all of the rifts created by Space Dragon.  Used for setting them all to infinite carp spawn when Space Dragon wins, and removing them when Space Dragon dies.</p><h3 id="var/rifts_charged"><aside class="declaration">var </aside>rifts_charged <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L20"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 20"></a></h3><p>How many rifts have been successfully charged</p><h3 id="var/wavespeak"><aside class="declaration">var </aside>wavespeak <aside>– /<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/mind_linker.html">mind_linker</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L28"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 28"></a></h3><p>Wavespeak mind linker, to allow telepathy between dragon and carps</p><h2 id="proc">Proc Details</h2><h3 id="proc/destroy_rifts"><aside class="declaration">proc </aside>destroy_rifts<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L154"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 154"></a></aside></h3><p>Destroys all of Space Dragon's current rifts.</p>
<p>QDeletes all the current rifts after removing their references to other objects.
Currently, the only reference they have is to the Dragon which created them, so we clear that before deleting them.
Currently used when Space Dragon dies or one of his rifts is destroyed.</p><h3 id="proc/permanant_empower"><aside class="declaration">proc </aside>permanant_empower<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L195"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 195"></a></aside></h3><p>Gives Space Dragon their the rift speed buff permanently and fully heals the user.</p>
<p>Gives Space Dragon the enraged speed buff from charging rifts permanently.
Only happens in circumstances where Space Dragon completes their objective.
Also gives them a full heal.</p><h3 id="proc/rift_checks"><aside class="declaration">proc </aside>rift_checks<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L130"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 130"></a></aside></h3><p>Checks to see if we need to do anything with the current state of the dragon's rifts.</p>
<p>A simple update check which sees if we need to do anything based on the current state of the dragon's rifts.</p><h3 id="proc/rift_depower"><aside class="declaration">proc </aside>rift_depower<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L219"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 219"></a></aside></h3><p>Removes Space Dragon's rift speed buff.</p>
<p>Removes Space Dragon's speed buff from charging a rift.  This is only called
in rift_empower, which uses a timer to call this after 30 seconds.  Also
removes the red glow from Space Dragon which is synonymous with the speed buff.</p><h3 id="proc/rift_empower"><aside class="declaration">proc </aside>rift_empower<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L206"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 206"></a></aside></h3><p>Handles Space Dragon's temporary empowerment after boosting a rift.</p>
<p>Empowers and depowers Space Dragon after a successful rift charge.
Empowered, Space Dragon regains all his health and becomes temporarily faster for 30 seconds, along with being tinted red.</p><h3 id="proc/victory"><aside class="declaration">proc </aside>victory<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/antagonists/space_dragon/space_dragon.dm#L176"><img src="git.png" width="16" height="16" title="code/modules/antagonists/space_dragon/space_dragon.dm 176"></a></aside></h3><p>Sets up Space Dragon's victory for completing the objectives.</p>
<p>Triggers when Space Dragon completes his objective.
Calls the shuttle with a coefficient of 3, making it impossible to recall.
Sets all of his rifts to allow for infinite sentient carp spawns
Also plays appropriate sounds and CENTCOM messages.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>