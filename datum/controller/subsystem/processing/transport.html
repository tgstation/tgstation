<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/processing/transport - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/processing/transport.html#var">Var Details</a> - <a href="datum/controller/subsystem/processing/transport.html#proc">Proc Details</a></header><main><h1>transport <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/processing/transport.html">processing/transport</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#var/can_fire">can_fire</a></th><td>only used on maps with trams, so only enabled by such.</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#var/max_cheap_moves">max_cheap_moves</a></th><td>how many times the tram can move costing less than half max_time milliseconds before we speed it back up again.
is only used if the tram has been slowed down for exceeding max_time</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#var/max_exceeding_moves">max_exceeding_moves</a></th><td>how many times the tram can move costing over max_time milliseconds before it gets slowed down</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#var/max_time">max_time</a></th><td>how much time a tram can take per movement before we notify admins and slow down the tram. in milliseconds</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#var/transports_by_type">transports_by_type</a></th><td>associative list of the form: list(lift_id = list(all transport_controller datums attached to lifts of that type))</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#proc/detailed_destination_list">detailed_destination_list</a></th><td>Give a list of destinations to the tram controls</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#proc/dispatch_transport">dispatch_transport</a></th><td>Dispatches the transport on a validated trip</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#proc/hello">hello</a></th><td>Registers the subsystem to listen for incoming requests from paired devices</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#proc/incoming_request">incoming_request</a></th><td>Performs the request received from a registered transport device</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#proc/pre_departure">pre_departure</a></th><td>Pre-departure checks for the tram</td></tr><tr><th><a href="datum/controller/subsystem/processing/transport.html#proc/validate_and_dispatch">validate_and_dispatch</a></th><td>Operational checks, then start moving</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/can_fire"><aside class="parent"><a title="/datum/controller/subsystem" href="datum/controller/subsystem.html#var/can_fire">↑</a></aside>can_fire <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L5"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 5"></a></h3><p>only used on maps with trams, so only enabled by such.</p><h3 id="var/max_cheap_moves"><aside class="declaration">var </aside>max_cheap_moves <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L20"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 20"></a></h3><p>how many times the tram can move costing less than half max_time milliseconds before we speed it back up again.
is only used if the tram has been slowed down for exceeding max_time</p><h3 id="var/max_exceeding_moves"><aside class="declaration">var </aside>max_exceeding_moves <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L17"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 17"></a></h3><p>how many times the tram can move costing over max_time milliseconds before it gets slowed down</p><h3 id="var/max_time"><aside class="declaration">var </aside>max_time <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L15"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 15"></a></h3><p>how much time a tram can take per movement before we notify admins and slow down the tram. in milliseconds</p><h3 id="var/transports_by_type"><aside class="declaration">var </aside>transports_by_type <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L8"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 8"></a></h3><p>associative list of the form: list(lift_id = list(all transport_controller datums attached to lifts of that type))</p><h2 id="proc">Proc Details</h2><h3 id="proc/detailed_destination_list"><aside class="declaration">proc </aside>detailed_destination_list<aside>(specific_transport_id)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L225"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 225"></a></aside></h3><p>Give a list of destinations to the tram controls</p><h3 id="proc/dispatch_transport"><aside class="declaration">proc </aside>dispatch_transport<aside>(/<a href="datum.html">datum</a>/<a href="datum/transport_controller/linear.html">transport_controller/linear</a>/<a href="datum/transport_controller/linear/tram.html">tram</a>/transport_controller, destination, request_flags)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L149"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 149"></a></aside></h3><p>Dispatches the transport on a validated trip</p>
<p>The subsystem at this point has confirmed a valid trip
Start the transport, wake up machinery running on
the subsystem (signals, etc.)</p>
<p>Make tram go, basically.</p>
<p>Arguments: transport_controller: the transport controller datum we're giving orders to
destination: destination we're sending it to
request_flags: additional flags for the request (ie: bypass doors, emagged request)</p><h3 id="proc/hello"><aside class="declaration">proc </aside>hello<aside>(/<a href="atom.html">atom</a>/new_unit, unit_name, id_tag)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L33"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 33"></a></aside></h3><p>Registers the subsystem to listen for incoming requests from paired devices</p>
<p>When a new device (such as a button, tram, signal etc) comes online
it calls this proc with the subsystem enabling two-way communication using
signals.</p>
<p>Arguments: new_unit: the starting point to find a beacon
unit_name: the friendly name of this device
id_tag: a unique identifier for this device, set on init</p><h3 id="proc/incoming_request"><aside class="declaration">proc </aside>incoming_request<aside>(/<a href="obj.html">obj</a>/source, transport_id, platform, options)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L56"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 56"></a></aside></h3><p>Performs the request received from a registered transport device</p>
<p>Currently the only supported request type is tram dispatch
so there's no var for what type of request it is</p>
<p>The subsystem will validate and process, then send a success
or fail response to the device that made the request,
with info relevant to the request such as destination
or error details (if the request is rejected/fails)</p>
<p>Arguments: source: the device sending the request
transport_id: the transport this request is for, such as tram line 1 or 2
platform: the requested destination to dispatch the tram
options: additional flags for the request (ie: bypass doors, emagged request)</p><h3 id="proc/pre_departure"><aside class="declaration">proc </aside>pre_departure<aside>(/<a href="datum.html">datum</a>/<a href="datum/transport_controller/linear.html">transport_controller/linear</a>/<a href="datum/transport_controller/linear/tram.html">tram</a>/transport_controller, request_flags)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L170"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 170"></a></aside></h3><p>Pre-departure checks for the tram</p>
<p>We do things slighly different based on the request_flags such as
door crushing, emag related things</p>
<p>Arguments: transport_controller: the transport controller datum we're giving orders to
request_flags: additional flags for the request (ie: bypass doors, emagged request)</p><h3 id="proc/validate_and_dispatch"><aside class="declaration">proc </aside>validate_and_dispatch<aside>(/<a href="datum.html">datum</a>/<a href="datum/transport_controller/linear.html">transport_controller/linear</a>/<a href="datum/transport_controller/linear/tram.html">tram</a>/transport_controller, attempt)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/transport.dm#L200"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/transport.dm 200"></a></aside></h3><p>Operational checks, then start moving</p>
<p>Some check failures aren't worth halting the tram for, like no blocking the doors forever
Crush them instead!</p>
<p>Arguments: transport_controller: the transport controller datum we're giving orders to
attempt: how many attempts to start moving we've made</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>