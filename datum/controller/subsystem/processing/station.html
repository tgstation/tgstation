<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/processing/station - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/processing/station.html#var">Var Details</a> - <a href="datum/controller/subsystem/processing/station.html#proc">Proc Details</a></header><main><h1>station <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/processing/station.html">processing/station</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#var/announcer">announcer</a></th><td>Currently active announcer. Starts as a type but gets initialized after traits are selected</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#var/antag_protected_roles">antag_protected_roles</a></th><td>A list of trait roles that should be protected from antag</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#var/antag_restricted_roles">antag_restricted_roles</a></th><td>A list of trait roles that should never be able to roll antag</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#var/goals_by_type">goals_by_type</a></th><td>Assosciative list of station goal type -&gt; goal instance</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#var/selectable_traits_by_types">selectable_traits_by_types</a></th><td>Assoc list of trait type || assoc list of traits with weighted value. Used for picking traits from a specific category.</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#var/station_traits">station_traits</a></th><td>A list of currently active station traits</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#proc/SetupTraits">SetupTraits</a></th><td>Rolls for the amount of traits and adds them to the traits list</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#proc/display_lobby_traits">display_lobby_traits</a></th><td>Update station trait lobby buttons for clients who joined before we initialised this subsystem</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#proc/generate_station_goals">generate_station_goals</a></th><td>This gets called by SSdynamic during initial gamemode setup.
This is done because for a greenshift we want all goals to be generated</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#proc/get_station_goal">get_station_goal</a></th><td>Returns a specific station goal by type</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#proc/get_station_goals">get_station_goals</a></th><td>Returns all station goals that are currently active</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#proc/pick_traits">pick_traits</a></th><td>Picks traits of a specific category (e.g. bad or good), initializes them, adds them to the list of traits,
then removes them from possible traits as to not roll twice and subtracts their cost from the budget.
All until the whole budget is spent or no more traits can be picked with it.</td></tr><tr><th><a href="datum/controller/subsystem/processing/station.html#proc/setup_trait">setup_trait</a></th><td>Creates a given trait of a specific type, while also removing any blacklisted ones from the future pool.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/announcer"><aside class="declaration">var </aside>announcer <aside>– /<a href="datum.html">datum</a>/<a href="datum/centcom_announcer.html">centcom_announcer</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L12"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 12"></a></h3><p>Currently active announcer. Starts as a type but gets initialized after traits are selected</p><h3 id="var/antag_protected_roles"><aside class="declaration">var </aside>antag_protected_roles <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L14"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 14"></a></h3><p>A list of trait roles that should be protected from antag</p><h3 id="var/antag_restricted_roles"><aside class="declaration">var </aside>antag_restricted_roles <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L16"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 16"></a></h3><p>A list of trait roles that should never be able to roll antag</p><h3 id="var/goals_by_type"><aside class="declaration">var </aside>goals_by_type <aside>– /list/<a href="datum.html">datum</a>/station_goal</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L19"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 19"></a></h3><p>Assosciative list of station goal type -&gt; goal instance</p><h3 id="var/selectable_traits_by_types"><aside class="declaration">var </aside>selectable_traits_by_types <aside>– /alist</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L10"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 10"></a></h3><p>Assoc list of trait type || assoc list of traits with weighted value. Used for picking traits from a specific category.</p><h3 id="var/station_traits"><aside class="declaration">var </aside>station_traits <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L8"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 8"></a></h3><p>A list of currently active station traits</p><h2 id="proc">Proc Details</h2><h3 id="proc/SetupTraits"><aside class="declaration">proc </aside>SetupTraits<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L74"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 74"></a></aside></h3><p>Rolls for the amount of traits and adds them to the traits list</p><h3 id="proc/display_lobby_traits"><aside class="declaration">proc </aside>display_lobby_traits<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L175"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 175"></a></aside></h3><p>Update station trait lobby buttons for clients who joined before we initialised this subsystem</p><h3 id="proc/generate_station_goals"><aside class="declaration">proc </aside>generate_station_goals<aside>(goal_budget)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L45"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 45"></a></aside></h3><p>This gets called by SSdynamic during initial gamemode setup.
This is done because for a greenshift we want all goals to be generated</p><h3 id="proc/get_station_goal"><aside class="declaration">proc </aside>get_station_goal<aside>(goal_type)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L70"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 70"></a></aside></h3><p>Returns a specific station goal by type</p><h3 id="proc/get_station_goals"><aside class="declaration">proc </aside>get_station_goals<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L63"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 63"></a></aside></h3><p>Returns all station goals that are currently active</p><h3 id="proc/pick_traits"><aside class="declaration">proc </aside>pick_traits<aside>(trait_sign, budget)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L142"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 142"></a></aside></h3><p>Picks traits of a specific category (e.g. bad or good), initializes them, adds them to the list of traits,
then removes them from possible traits as to not roll twice and subtracts their cost from the budget.
All until the whole budget is spent or no more traits can be picked with it.</p><h3 id="proc/setup_trait"><aside class="declaration">proc </aside>setup_trait<aside>(/<a href="datum.html">datum</a>/<a href="datum/station_trait.html">station_trait</a>/trait_type)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/processing/station.dm#L162"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/processing/station.dm 162"></a></aside></h3><p>Creates a given trait of a specific type, while also removing any blacklisted ones from the future pool.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>