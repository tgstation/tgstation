<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/materials - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/materials.html#var">Var Details</a> - <a href="datum/controller/subsystem/materials.html#proc">Proc Details</a></header><main><h1>materials <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/materials.html">materials</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L7"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 7"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/base_stack_recipes">base_stack_recipes</a></th><td>List of stackcrafting recipes for materials using base recipes</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/dimensional_themes">dimensional_themes</a></th><td>A list of dimensional themes used by the dimensional anomaly and other things, most of which require materials to function.</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/flat_materials">flat_materials</a></th><td>Flat list of materials</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/material_combos">material_combos</a></th><td>A cache of all material combinations that have been used</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/materials">materials</a></th><td>Dictionary of material.id || material ref</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/materials_by_type">materials_by_type</a></th><td>Dictionary of type || list of material refs</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/properties">properties</a></th><td>An ID -&gt; instance list of material properties</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/requirements">requirements</a></th><td>A typepath -&gt; instance list of material requirements</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/rigid_stack_recipes">rigid_stack_recipes</a></th><td>List of stackcrafting recipes for materials using rigid recipes</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/get_id_from_args">get_id_from_args</a></th><td>I'm not going to lie, this was swiped from <a href="datum/controller/subsystem/processing/dcs.html" title="/datum/controller/subsystem/processing/dcs">SSdcs</a>.
Credit does to ninjanomnom</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/get_material">get_material</a></th><td>Fetches a cached material singleton when passed sufficient arguments.
Arguments:</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/get_material_set_cache">get_material_set_cache</a></th><td>Returns a list to be used as an object's custom_materials. Lists will be cached and re-used based on the parameters.</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/get_materials_by_flag">get_materials_by_flag</a></th><td>Fetches all materials that match a flag, or that don't have a flag if the passed flag is negative</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/get_materials_by_req">get_materials_by_req</a></th><td>Returns all materials that fit a requirement datum</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/initialize_material">initialize_material</a></th><td></td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/initialize_materials">initialize_materials</a></th><td>Ran on initialize, populated the materials and material dictionaries with their appropriate vars (See these variables for more info)</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/base_stack_recipes"><aside class="declaration">var </aside>base_stack_recipes <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L19"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 19"></a></h3><p>List of stackcrafting recipes for materials using base recipes</p><h3 id="var/dimensional_themes"><aside class="declaration">var </aside>dimensional_themes <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/dimension_theme.html">dimension_theme</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L33"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 33"></a></h3><p>A list of dimensional themes used by the dimensional anomaly and other things, most of which require materials to function.</p><h3 id="var/flat_materials"><aside class="declaration">var </aside>flat_materials <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L13"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 13"></a></h3><p>Flat list of materials</p><h3 id="var/material_combos"><aside class="declaration">var </aside>material_combos <aside>– /list/list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L17"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 17"></a></h3><p>A cache of all material combinations that have been used</p><h3 id="var/materials"><aside class="declaration">var </aside>materials <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L11"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 11"></a></h3><p>Dictionary of material.id || material ref</p><h3 id="var/materials_by_type"><aside class="declaration">var </aside>materials_by_type <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L15"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 15"></a></h3><p>Dictionary of type || list of material refs</p><h3 id="var/properties"><aside class="declaration">var </aside>properties <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/material_property.html">material_property</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L35"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 35"></a></h3><p>An ID -&gt; instance list of material properties</p><h3 id="var/requirements"><aside class="declaration">var </aside>requirements <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/material_requirement.html">material_requirement</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L37"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 37"></a></h3><p>A typepath -&gt; instance list of material requirements</p><h3 id="var/rigid_stack_recipes"><aside class="declaration">var </aside>rigid_stack_recipes <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L28"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 28"></a></h3><p>List of stackcrafting recipes for materials using rigid recipes</p><h2 id="proc">Proc Details</h2><h3 id="proc/get_id_from_args"><aside class="declaration">proc </aside>get_id_from_args<aside>(/<a href="datum.html">datum</a>/<a href="datum/material.html">material</a>/mat_type, ...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L151"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 151"></a></aside></h3><p>I'm not going to lie, this was swiped from <a href="datum/controller/subsystem/processing/dcs.html" title="/datum/controller/subsystem/processing/dcs">SSdcs</a>.
Credit does to ninjanomnom</p>
<p>Generates an id for bespoke <del>elements</del> materials when given the argument list
Generating the id here is a bit complex because we need to support named arguments
Named arguments can appear in any order and we need them to appear after ordered arguments
We assume that no one will pass in a named argument with a value of null</p><h3 id="proc/get_material"><aside class="declaration">proc </aside>get_material<aside>(/<a href="datum.html">datum</a>/<a href="datum/material.html">material</a>/material_type, ...) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/material.html">material</a> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L90"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 90"></a></aside></h3><p>Fetches a cached material singleton when passed sufficient arguments.
Arguments:</p>
<ul>
<li>The first argument is a material datum, text string, or material type.</li>
<li><a href="datum/material.html" title="/datum/material">Material datums</a> are assumed to be references to the cached datum and are returned</li>
<li>Text is assumed to be the text ID of a material and the corresponding material is fetched from the cache</li>
<li>A material type is checked for bespokeness:
<ul>
<li>If the material type is not bespoke the type is assumed to be the id for a material and the corresponding material is loaded from the cache.</li>
<li>If the material type is bespoke a text ID is generated from the arguments list and used to load a material datum from the cache.</li>
</ul>
</li>
<li>The following elements are used to generate bespoke IDs</li>
</ul><h3 id="proc/get_material_set_cache"><aside class="declaration">proc </aside>get_material_set_cache<aside>(/list/materials_declaration, multiplier)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L176"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 176"></a></aside></h3><p>Returns a list to be used as an object's custom_materials. Lists will be cached and re-used based on the parameters.</p><h3 id="proc/get_materials_by_flag"><aside class="declaration">proc </aside>get_materials_by_flag<aside>(mat_flag)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L118"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 118"></a></aside></h3><p>Fetches all materials that match a flag, or that don't have a flag if the passed flag is negative</p><h3 id="proc/get_materials_by_req"><aside class="declaration">proc </aside>get_materials_by_req<aside>(/<a href="datum.html">datum</a>/<a href="datum/material_requirement.html">material_requirement</a>/requirement)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L196"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 196"></a></aside></h3><p>Returns all materials that fit a requirement datum</p><h3 id="proc/initialize_material"><aside class="declaration">proc </aside>initialize_material<aside>(/<a href="datum.html">datum</a>/<a href="datum/material.html">material</a>/mat_type, ...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L63"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 63"></a></aside></h3><ul>
<li>Creates and caches a material datum.</li>
<li>The first argument is the type of material to initialize, the rest are passed to the material's init</li>
</ul><h3 id="proc/initialize_materials"><aside class="declaration">proc </aside>initialize_materials<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/materials.dm#L40"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 40"></a></aside></h3><p>Ran on initialize, populated the materials and material dictionaries with their appropriate vars (See these variables for more info)</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>