<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/materials - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/materials.html#var">Var Details</a> - <a href="datum/controller/subsystem/materials.html#proc">Proc Details</a></header><main><h1>materials <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/materials.html">materials</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L7"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 7"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/base_stack_recipes">base_stack_recipes</a></th><td>List of stackcrafting recipes for materials using base recipes</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/dimensional_themes">dimensional_themes</a></th><td>A list of dimensional themes used by the dimensional anomaly and other things, most of which require materials to function.</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/material_combos">material_combos</a></th><td>A cache of all material combinations that have been used</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/materialids_by_category">materialids_by_category</a></th><td>Dictionary of category || list of material ids, mostly used by rnd machines like autolathes.</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/materialids_by_type">materialids_by_type</a></th><td>Dictionary of type || list of material ids</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/materials">materials</a></th><td>Dictionary of material.id || material ref</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/materials_by_category">materials_by_category</a></th><td>Dictionary of category || list of material refs</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/materials_by_type">materials_by_type</a></th><td>Dictionary of type || list of material refs</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#var/rigid_stack_recipes">rigid_stack_recipes</a></th><td>List of stackcrafting recipes for materials using rigid recipes</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/FindOrCreateMaterialCombo">FindOrCreateMaterialCombo</a></th><td>Returns a list to be used as an object's custom_materials. Lists will be cached and re-used based on the parameters.</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/GetIdFromArguments">GetIdFromArguments</a></th><td></td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/InitializeMaterial">InitializeMaterial</a></th><td></td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/InitializeMaterials">InitializeMaterials</a></th><td>Ran on initialize, populated the materials and materials_by_category dictionaries with their appropriate vars (See these variables for more info)</td></tr><tr><th><a href="datum/controller/subsystem/materials.html#proc/_GetMaterialRef">_GetMaterialRef</a></th><td></td></tr></table><h2 id="var">Var Details</h2><h3 id="var/base_stack_recipes"><aside class="declaration">var </aside>base_stack_recipes <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L23"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 23"></a></h3><p>List of stackcrafting recipes for materials using base recipes</p><h3 id="var/dimensional_themes"><aside class="declaration">var </aside>dimensional_themes <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/dimension_theme.html">dimension_theme</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L37"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 37"></a></h3><p>A list of dimensional themes used by the dimensional anomaly and other things, most of which require materials to function.</p><h3 id="var/material_combos"><aside class="declaration">var </aside>material_combos <aside>– /list/list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L21"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 21"></a></h3><p>A cache of all material combinations that have been used</p><h3 id="var/materialids_by_category"><aside class="declaration">var </aside>materialids_by_category <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L19"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 19"></a></h3><p>Dictionary of category || list of material ids, mostly used by rnd machines like autolathes.</p><h3 id="var/materialids_by_type"><aside class="declaration">var </aside>materialids_by_type <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L15"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 15"></a></h3><p>Dictionary of type || list of material ids</p><h3 id="var/materials"><aside class="declaration">var </aside>materials <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L11"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 11"></a></h3><p>Dictionary of material.id || material ref</p><h3 id="var/materials_by_category"><aside class="declaration">var </aside>materials_by_category <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L17"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 17"></a></h3><p>Dictionary of category || list of material refs</p><h3 id="var/materials_by_type"><aside class="declaration">var </aside>materials_by_type <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L13"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 13"></a></h3><p>Dictionary of type || list of material refs</p><h3 id="var/rigid_stack_recipes"><aside class="declaration">var </aside>rigid_stack_recipes <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L32"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 32"></a></h3><p>List of stackcrafting recipes for materials using rigid recipes</p><h2 id="proc">Proc Details</h2><h3 id="proc/FindOrCreateMaterialCombo"><aside class="declaration">proc </aside>FindOrCreateMaterialCombo<aside>(/list/materials_declaration, multiplier)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L153"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 153"></a></aside></h3><p>Returns a list to be used as an object's custom_materials. Lists will be cached and re-used based on the parameters.</p><h3 id="proc/GetIdFromArguments"><aside class="declaration">proc </aside>GetIdFromArguments<aside>(/list/arguments)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L127"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 127"></a></aside></h3><ul>
<li>
<p>I'm not going to lie, this was swiped from <a href="datum/controller/subsystem/processing/dcs.html" title="/datum/controller/subsystem/processing/dcs">SSdcs</a>.</p>
</li>
<li>
<p>Credit does to ninjanomnom</p>
</li>
<li>
<p>Generates an id for bespoke <del>elements</del> materials when given the argument list</p>
</li>
<li>
<p>Generating the id here is a bit complex because we need to support named arguments</p>
</li>
<li>
<p>Named arguments can appear in any order and we need them to appear after ordered arguments</p>
</li>
<li>
<p>We assume that no one will pass in a named argument with a value of null</p>
</li>
</ul><h3 id="proc/InitializeMaterial"><aside class="declaration">proc </aside>InitializeMaterial<aside>(/list/arguments)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L61"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 61"></a></aside></h3><ul>
<li>
<p>Creates and caches a material datum.</p>
</li>
<li>
<p>Arguments:</p>
</li>
<li>
<ul>
<li><a href="https://www.byond.com/docs/ref/#/list" title="/list">arguments</a>: The arguments to use to create the material datum</li>
</ul>
</li>
<li>
<ul>
<li>The first element is the type of material to initialize.</li>
</ul>
</li>
</ul><h3 id="proc/InitializeMaterials"><aside class="declaration">proc </aside>InitializeMaterials<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L40"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 40"></a></aside></h3><p>Ran on initialize, populated the materials and materials_by_category dictionaries with their appropriate vars (See these variables for more info)</p><h3 id="proc/_GetMaterialRef"><aside class="declaration">proc </aside>_GetMaterialRef<aside>(/list/arguments)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/controllers/subsystem/materials.dm#L93"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/materials.dm 93"></a></aside></h3><ul>
<li>
<p>Fetches a cached material singleton when passed sufficient arguments.</p>
</li>
<li>
<p>Arguments:</p>
</li>
<li>
<ul>
<li><a href="https://www.byond.com/docs/ref/#/list" title="/list">arguments</a>: The list of arguments used to fetch the material ref.</li>
</ul>
</li>
<li>
<ul>
<li>The first element is a material datum, text string, or material type.</li>
</ul>
</li>
<li>
<pre><code>- [Material datums][/datum/material] are assumed to be references to the cached datum and are returned
</code></pre>
</li>
<li>
<pre><code>- Text is assumed to be the text ID of a material and the corresponding material is fetched from the cache
</code></pre>
</li>
<li>
<pre><code>- A material type is checked for bespokeness:
</code></pre>
</li>
<li>
<pre><code>  - If the material type is not bespoke the type is assumed to be the id for a material and the corresponding material is loaded from the cache.
</code></pre>
</li>
<li>
<pre><code>  - If the material type is bespoke a text ID is generated from the arguments list and used to load a material datum from the cache.
</code></pre>
</li>
<li>
<ul>
<li>The following elements are used to generate bespoke IDs</li>
</ul>
</li>
</ul></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>