<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/polling - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/polling.html#var">Var Details</a> - <a href="datum/controller/subsystem/polling.html#proc">Proc Details</a></header><main><h1>polling <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/polling.html">polling</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/polling.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/polling.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/polling.html#var/currently_polling">currently_polling</a></th><td>List of polls currently ongoing, to be checked on next fire()</td></tr><tr><th><a href="datum/controller/subsystem/polling.html#var/total_polls">total_polls</a></th><td>Number of polls performed since the start</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/polling.html#proc/duplicate_message_check">duplicate_message_check</a></th><td>Is there a multiple of the given event type running right now?</td></tr><tr><th><a href="datum/controller/subsystem/polling.html#proc/poll_candidates">poll_candidates</a></th><td>Starts a poll.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/currently_polling"><aside class="declaration">var </aside>currently_polling <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/candidate_poll.html">candidate_poll</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/polling.dm#L7"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/polling.dm 7"></a></h3><p>List of polls currently ongoing, to be checked on next fire()</p><h3 id="var/total_polls"><aside class="declaration">var </aside>total_polls <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/polling.dm#L9"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/polling.dm 9"></a></h3><p>Number of polls performed since the start</p><h2 id="proc">Proc Details</h2><h3 id="proc/duplicate_message_check"><aside class="declaration">proc </aside>duplicate_message_check<aside>(/<a href="datum.html">datum</a>/<a href="datum/candidate_poll.html">candidate_poll</a>/poll_to_check)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/polling.dm#L338"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/polling.dm 338"></a></aside></h3><p>Is there a multiple of the given event type running right now?</p><h3 id="proc/poll_candidates"><aside class="declaration">proc </aside>poll_candidates<aside>(question, role, check_jobban, poll_time, ignore_category, flash_window, /list/group, alert_pic, jump_target, role_name_text, /list/custom_response_messages, start_signed_up, amount_to_pick, chat_text_border_icon, announce_chosen)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/polling.dm#L41"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/polling.dm 41"></a></aside></h3><p>Starts a poll.</p>
<p>Arguments</p>
<ul>
<li>question: Optional, The question to ask the candidates. If null, a default question will be used. (&quot;Do you want to play as role?&quot;)</li>
<li>role: Optional, An antag role (IE, ROLE_TRAITOR) to pass, it won't show to any candidates who don't have it in their preferences.</li>
<li>check_jobban: Optional, What jobban role / flag to check, it won't show to any candidates who have this jobban.</li>
<li>poll_time: How long the poll will last.</li>
<li>ignore_category: Optional, A poll category. If a candidate has this category in their ignore list, they won't be polled.</li>
<li>flash_window: If TRUE, the candidate's window will flash when they're polled.</li>
<li>list/group: A list of candidates to poll.</li>
<li>alert_pic: Optional, An /atom or an /image to display on the poll alert.</li>
<li>jump_target: An /atom to teleport/jump to, if alert_pic is an /atom defaults to that.</li>
<li>role_name_text: Optional, A string to display in logging / the (default) question. If null, the role name will be used.</li>
<li>list/custom_response_messages: Optional, A list of strings to use as responses to the poll. If null, the default responses will be used. see __DEFINES/polls.dm for valid keys to use.</li>
<li>start_signed_up: If TRUE, all candidates will start signed up for the poll, making it opt-out rather than opt-in.</li>
<li>amount_to_pick: Lets you pick candidates and return a single mob or list of mobs that were chosen.</li>
<li>chat_text_border_icon: Object or path to make an icon of to decorate the chat announcement.</li>
<li>announce_chosen: Whether we should announce the chosen candidates in chat. This is ignored unless amount_to_pick is greater than 0.</li>
</ul>
<p>Returns a list of all mobs who signed up for the poll, OR, in the case that amount_to_pick is equal to 1 the singular mob/null if no available candidates.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>