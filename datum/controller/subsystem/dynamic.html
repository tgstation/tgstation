<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/dynamic - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/dynamic.html#var">Var Details</a> - <a href="datum/controller/subsystem/dynamic.html#proc">Proc Details</a></header><main><h1>dynamic <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/dynamic.html">dynamic</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/admin_disabled_rulesets">admin_disabled_rulesets</a></th><td>List of ruleset typepaths that admins have explicitly disabled</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/admin_forcing_next_heavy">admin_forcing_next_heavy</a></th><td>Set to TRUE by admin panels if they want to max out the chance of a heavy ruleset spawning</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/admin_forcing_next_latejoin">admin_forcing_next_latejoin</a></th><td>Set to TRUE by admin panels if they want to max out the chance of a latejoin ruleset spawning</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/admin_forcing_next_light">admin_forcing_next_light</a></th><td>Set to TRUE by admin panels if they want to max out the chance of a light ruleset spawning</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/antag_events_enabled">antag_events_enabled</a></th><td>Whether random events that spawn antagonists or modify dynamic are enabled</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/base_rulesets_to_spawn">base_rulesets_to_spawn</a></th><td>Tracks the number of rulesets to spawn at game start (for admin reference)</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/current_tier">current_tier</a></th><td>Reference to a dynamic tier datum, the tier picked for this round</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/dynamic_config">dynamic_config</a></th><td>The config for dynamic loaded from the toml file</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/executed_rulesets">executed_rulesets</a></th><td>List of rulesets that have been executed this round</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/failed_latejoins">failed_latejoins</a></th><td>Tracks how many time we fail to spawn a latejoin (to up the odds next time)</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/heavy_ruleset_start">heavy_ruleset_start</a></th><td>Cooldown for when we are allowed to spawn heavy rulesets</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/latejoin_cooldown">latejoin_cooldown</a></th><td>Cooldown between latejoin ruleset executions</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/latejoin_ruleset_start">latejoin_ruleset_start</a></th><td>Cooldown for when we are allowed to spawn latejoin rulesets</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/light_ruleset_start">light_ruleset_start</a></th><td>Cooldown for when we are allowed to spawn light rulesets</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/midround_admin_cancel">midround_admin_cancel</a></th><td>Set to TRUE by hrefs if admins cancel a midround</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/midround_admin_cancel_period">midround_admin_cancel_period</a></th><td>Cooldown between &quot;we're going to spawn a midround&quot; and &quot;we're actually spawning a midround&quot;, to give admins a chance to cancel</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/midround_admin_reroll">midround_admin_reroll</a></th><td>Set to TRUE by hrefs if admins reroll a midround</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/midround_cooldown">midround_cooldown</a></th><td>Cooldown between midround ruleset executions</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/queued_rulesets">queued_rulesets</a></th><td>List of rulesets that have been set up to run, but not yet executed</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/rulesets_to_spawn">rulesets_to_spawn</a></th><td>Tracks how many of each ruleset category is yet to be spawned</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#var/unreported_rulesets">unreported_rulesets</a></th><td>Rulesets in this list will be excluded from the roundend report</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/force_extended">force_extended</a></th><td>Helper to clear all queued rulesets and stop any other rulesets from naturally spawning</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/force_run_midround">force_run_midround</a></th><td>Attempt to run a midround ruleset of the given type</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/get_config_value">get_config_value</a></th><td>Used to get a config entry for some variable on some typepath
Can be passed a default value.</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/get_latejoin_chance">get_latejoin_chance</a></th><td>Gets the chance of a latejoin ruleset being selected</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/get_latejoin_rulesets">get_latejoin_rulesets</a></th><td>Gets a weighted list of latejoin rulesets</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/get_midround_chance">get_midround_chance</a></th><td>Gets the chance of a midround ruleset being selected</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/get_midround_rulesets">get_midround_rulesets</a></th><td>Gets a weighted list of midround rulesets</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/get_roundstart_rulesets">get_roundstart_rulesets</a></th><td>Gets a weighted list of roundstart rulesets</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/get_ruleset_cooldown">get_ruleset_cooldown</a></th><td>Get the cooldown between attempts to spawn a ruleset of the given type</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/on_latejoin">on_latejoin</a></th><td>Called when someone latejoins
(This could be a signal in the future)</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/pick_roundstart_rulesets">pick_roundstart_rulesets</a></th><td>Picks as many roundstart rulesets as we are allowed to spawn, returns them</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/pick_tier">pick_tier</a></th><td>Picks what tier we are going to use for this round and sets up all the corresponding variables and ranges</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/queue_ruleset">queue_ruleset</a></th><td>Queues a ruleset to run on roundstart or next latejoin which fulfills all requirements</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/select_roundstart_antagonists">select_roundstart_antagonists</a></th><td>Selects which rulesets are to run at roundstart, and sets them up</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/set_tier">set_tier</a></th><td>Sets the tier to the typepath passed in</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/try_spawn_latejoin">try_spawn_latejoin</a></th><td>Invoked by SSdynamic to try to spawn a latejoin ruleset
Respects ranges and thresholds</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/try_spawn_midround">try_spawn_midround</a></th><td>Invoked by SSdynamic to try to spawn a random midround ruleset
Respects ranges and thresholds</td></tr><tr><th><a href="datum/controller/subsystem/dynamic.html#proc/unqueue_ruleset">unqueue_ruleset</a></th><td>Unqueues a ruleset because it has executed</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/admin_disabled_rulesets"><aside class="declaration">var </aside>admin_disabled_rulesets <aside>– /tmp/list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L20"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 20"></a></h3><p>List of ruleset typepaths that admins have explicitly disabled</p><h3 id="var/admin_forcing_next_heavy"><aside class="declaration">var </aside>admin_forcing_next_heavy <aside>– /tmp</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L16"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 16"></a></h3><p>Set to TRUE by admin panels if they want to max out the chance of a heavy ruleset spawning</p><h3 id="var/admin_forcing_next_latejoin"><aside class="declaration">var </aside>admin_forcing_next_latejoin <aside>– /tmp</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L18"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 18"></a></h3><p>Set to TRUE by admin panels if they want to max out the chance of a latejoin ruleset spawning</p><h3 id="var/admin_forcing_next_light"><aside class="declaration">var </aside>admin_forcing_next_light <aside>– /tmp</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L14"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 14"></a></h3><p>Set to TRUE by admin panels if they want to max out the chance of a light ruleset spawning</p><h3 id="var/antag_events_enabled"><aside class="declaration">var </aside>antag_events_enabled <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L60"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 60"></a></h3><p>Whether random events that spawn antagonists or modify dynamic are enabled</p><h3 id="var/base_rulesets_to_spawn"><aside class="declaration">var </aside>base_rulesets_to_spawn <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L35"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 35"></a></h3><p>Tracks the number of rulesets to spawn at game start (for admin reference)</p><h3 id="var/current_tier"><aside class="declaration">var </aside>current_tier <aside>– /<a href="datum.html">datum</a>/<a href="datum/dynamic_tier.html">dynamic_tier</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L24"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 24"></a></h3><p>Reference to a dynamic tier datum, the tier picked for this round</p><h3 id="var/dynamic_config"><aside class="declaration">var </aside>dynamic_config <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L26"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 26"></a></h3><p>The config for dynamic loaded from the toml file</p><h3 id="var/executed_rulesets"><aside class="declaration">var </aside>executed_rulesets <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/dynamic_ruleset.html">dynamic_ruleset</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L54"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 54"></a></h3><p>List of rulesets that have been executed this round</p><h3 id="var/failed_latejoins"><aside class="declaration">var </aside>failed_latejoins <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L48"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 48"></a></h3><p>Tracks how many time we fail to spawn a latejoin (to up the odds next time)</p><h3 id="var/heavy_ruleset_start"><aside class="declaration">var </aside>heavy_ruleset_start <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L44"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 44"></a></h3><p>Cooldown for when we are allowed to spawn heavy rulesets</p><h3 id="var/latejoin_cooldown"><aside class="declaration">var </aside>latejoin_cooldown <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L52"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 52"></a></h3><p>Cooldown between latejoin ruleset executions</p><h3 id="var/latejoin_ruleset_start"><aside class="declaration">var </aside>latejoin_ruleset_start <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L46"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 46"></a></h3><p>Cooldown for when we are allowed to spawn latejoin rulesets</p><h3 id="var/light_ruleset_start"><aside class="declaration">var </aside>light_ruleset_start <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L42"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 42"></a></h3><p>Cooldown for when we are allowed to spawn light rulesets</p><h3 id="var/midround_admin_cancel"><aside class="declaration">var </aside>midround_admin_cancel <aside>– /tmp</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L10"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 10"></a></h3><p>Set to TRUE by hrefs if admins cancel a midround</p><h3 id="var/midround_admin_cancel_period"><aside class="declaration">var </aside>midround_admin_cancel_period <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L8"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 8"></a></h3><p>Cooldown between &quot;we're going to spawn a midround&quot; and &quot;we're actually spawning a midround&quot;, to give admins a chance to cancel</p><h3 id="var/midround_admin_reroll"><aside class="declaration">var </aside>midround_admin_reroll <aside>– /tmp</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L12"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 12"></a></h3><p>Set to TRUE by hrefs if admins reroll a midround</p><h3 id="var/midround_cooldown"><aside class="declaration">var </aside>midround_cooldown <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L50"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 50"></a></h3><p>Cooldown between midround ruleset executions</p><h3 id="var/queued_rulesets"><aside class="declaration">var </aside>queued_rulesets <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/dynamic_ruleset.html">dynamic_ruleset</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L56"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 56"></a></h3><p>List of rulesets that have been set up to run, but not yet executed</p><h3 id="var/rulesets_to_spawn"><aside class="declaration">var </aside>rulesets_to_spawn <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L28"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 28"></a></h3><p>Tracks how many of each ruleset category is yet to be spawned</p><h3 id="var/unreported_rulesets"><aside class="declaration">var </aside>unreported_rulesets <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/dynamic_ruleset.html">dynamic_ruleset</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L58"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 58"></a></h3><p>Rulesets in this list will be excluded from the roundend report</p><h2 id="proc">Proc Details</h2><h3 id="proc/force_extended"><aside class="declaration">proc </aside>force_extended<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L638"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 638"></a></aside></h3><p>Helper to clear all queued rulesets and stop any other rulesets from naturally spawning</p><h3 id="proc/force_run_midround"><aside class="declaration">proc </aside>force_run_midround<aside>(midround_typepath, forced_max_cap, alert_admins_on_fail, /<a href="mob.html">mob</a>/admin)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L417"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 417"></a></aside></h3><p>Attempt to run a midround ruleset of the given type</p>
<ul>
<li>midround_type - The type of midround ruleset to force</li>
<li>forced_max_cap - Rather than using the ruleset's max antag cap, use this value
As an example, this allows you to only spawn 1 traitor rather than the ruleset's default of 3
Can't be set to 0 (why are you forcing a ruleset that spawns 0 antags?)</li>
<li>alert_admins_on_fail - If TRUE, alert admins if the ruleset fails to prepare/execute</li>
<li>mob/admin - The admin who is forcing the ruleset, used for configuring the ruleset if possible</li>
</ul><h3 id="proc/get_config_value"><aside class="declaration">proc </aside>get_config_value<aside>(/<a href="datum.html">datum</a>/some_typepath, var_name, default_value)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L81"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 81"></a></aside></h3><p>Used to get a config entry for some variable on some typepath
Can be passed a default value.</p><h3 id="proc/get_latejoin_chance"><aside class="declaration">proc </aside>get_latejoin_chance<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L589"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 589"></a></aside></h3><p>Gets the chance of a latejoin ruleset being selected</p><h3 id="proc/get_latejoin_rulesets"><aside class="declaration">proc </aside>get_latejoin_rulesets<aside>(player_count)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L519"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 519"></a></aside></h3><p>Gets a weighted list of latejoin rulesets</p><h3 id="proc/get_midround_chance"><aside class="declaration">proc </aside>get_midround_chance<aside>(range)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L567"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 567"></a></aside></h3><p>Gets the chance of a midround ruleset being selected</p><h3 id="proc/get_midround_rulesets"><aside class="declaration">proc </aside>get_midround_rulesets<aside>(player_count, midround_type)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L395"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 395"></a></aside></h3><p>Gets a weighted list of midround rulesets</p><h3 id="proc/get_roundstart_rulesets"><aside class="declaration">proc </aside>get_roundstart_rulesets<aside>(/list/antag_candidates)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L246"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 246"></a></aside></h3><p>Gets a weighted list of roundstart rulesets</p><h3 id="proc/get_ruleset_cooldown"><aside class="declaration">proc </aside>get_ruleset_cooldown<aside>(range)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L555"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 555"></a></aside></h3><p>Get the cooldown between attempts to spawn a ruleset of the given type</p><h3 id="proc/on_latejoin"><aside class="declaration">proc </aside>on_latejoin<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/latejoiner)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L452"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 452"></a></aside></h3><p>Called when someone latejoins
(This could be a signal in the future)</p><h3 id="proc/pick_roundstart_rulesets"><aside class="declaration">proc </aside>pick_roundstart_rulesets<aside>(/list/antag_candidates)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L257"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 257"></a></aside></h3><p>Picks as many roundstart rulesets as we are allowed to spawn, returns them</p><h3 id="proc/pick_tier"><aside class="declaration">proc </aside>pick_tier<aside>(roundstart_population)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L202"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 202"></a></aside></h3><p>Picks what tier we are going to use for this round and sets up all the corresponding variables and ranges</p><h3 id="proc/queue_ruleset"><aside class="declaration">proc </aside>queue_ruleset<aside>(ruleset_typepath)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L537"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 537"></a></aside></h3><p>Queues a ruleset to run on roundstart or next latejoin which fulfills all requirements</p>
<p>For example, if you queue a latejoin revolutionary, it'll only run when population gets large enough and there are enough heads of staff
For all latejoins until then, it will simply do nothing</p>
<ul>
<li>latejoin_type - The type of latejoin ruleset to force</li>
</ul><h3 id="proc/select_roundstart_antagonists"><aside class="declaration">proc </aside>select_roundstart_antagonists<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L107"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 107"></a></aside></h3><p>Selects which rulesets are to run at roundstart, and sets them up</p>
<p>Note: This proc can sleep (due to lazyloading of templates)!</p><h3 id="proc/set_tier"><aside class="declaration">proc </aside>set_tier<aside>(picked_tier, population)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L185"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 185"></a></aside></h3><p>Sets the tier to the typepath passed in</p><h3 id="proc/try_spawn_latejoin"><aside class="declaration">proc </aside>try_spawn_latejoin<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/latejoiner)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L478"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 478"></a></aside></h3><p>Invoked by SSdynamic to try to spawn a latejoin ruleset
Respects ranges and thresholds</p>
<p>Returns TRUE if a ruleset was spawned, FALSE otherwise</p><h3 id="proc/try_spawn_midround"><aside class="declaration">proc </aside>try_spawn_midround<aside>(range)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L327"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 327"></a></aside></h3><p>Invoked by SSdynamic to try to spawn a random midround ruleset
Respects ranges and thresholds</p>
<p>Prioritizes light midround rulesets first, then heavy midround rulesets</p>
<p>Returns TRUE if a ruleset was spawned, FALSE otherwise</p><h3 id="proc/unqueue_ruleset"><aside class="declaration">proc </aside>unqueue_ruleset<aside>(/<a href="datum.html">datum</a>/<a href="datum/dynamic_ruleset.html">dynamic_ruleset</a>/ruleset)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/dynamic/dynamic.dm#L546"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/dynamic/dynamic.dm 546"></a></aside></h3><p>Unqueues a ruleset because it has executed</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>