<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/lootpanel - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/lootpanel.html#var">Var Details</a> - <a href="datum/lootpanel.html#proc">Proc Details</a></header><main><h1>lootpanel <aside>/<a href="datum.html">datum</a>/<a href="datum/lootpanel.html">lootpanel</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/_lootpanel.dm#L6"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/_lootpanel.dm 6"></a></h1><h2 id="loot-panel">Loot panel</h2>
<p>A datum that stores info containing the contents of a turf.
Handles opening the lootpanel UI and searching the turf for items.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/lootpanel.html#var/contents">contents</a></th><td>The list of all search objects indexed.</td></tr><tr><th><a href="datum/lootpanel.html#var/notified">notified</a></th><td>We've been notified about client version</td></tr><tr><th><a href="datum/lootpanel.html#var/owner">owner</a></th><td>The owner of the panel</td></tr><tr><th><a href="datum/lootpanel.html#var/source_turf">source_turf</a></th><td>The turf being searched</td></tr><tr><th><a href="datum/lootpanel.html#var/to_image">to_image</a></th><td>The list of search_objects needing processed</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/lootpanel.html#proc/add_to_index">add_to_index</a></th><td>Adds the item to contents and to_image (if needed)</td></tr><tr><th><a href="datum/lootpanel.html#proc/get_contents">get_contents</a></th><td>UI helper for converting the associative list to a list of lists</td></tr><tr><th><a href="datum/lootpanel.html#proc/grab">grab</a></th><td>Clicks an object from the contents. Validates the object and the user</td></tr><tr><th><a href="datum/lootpanel.html#proc/on_searchable_deleted">on_searchable_deleted</a></th><td>On contents change, either reset or update</td></tr><tr><th><a href="datum/lootpanel.html#proc/open">open</a></th><td>Helper to open the panel</td></tr><tr><th><a href="datum/lootpanel.html#proc/populate_contents">populate_contents</a></th><td>Used to populate contents and start generating if needed</td></tr><tr><th><a href="datum/lootpanel.html#proc/process_images">process_images</a></th><td>Called by SSlooting whenever this datum is added to its backlog.
Iterates over to_image list to create icons, then removes them.
Returns boolean - whether this proc has finished the queue or not.</td></tr><tr><th><a href="datum/lootpanel.html#proc/reset_contents">reset_contents</a></th><td>For: Resetting to empty. Ignores the searchable qdel event</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/contents"><aside class="declaration">var </aside>contents <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/search_object.html">search_object</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/_lootpanel.dm#L10"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/_lootpanel.dm 10"></a></h3><p>The list of all search objects indexed.</p><h3 id="var/notified"><aside class="declaration">var </aside>notified <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/_lootpanel.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/_lootpanel.dm 14"></a></h3><p>We've been notified about client version</p><h3 id="var/owner"><aside class="declaration">var </aside>owner <aside>– /<a href="client.html">client</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/_lootpanel.dm#L8"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/_lootpanel.dm 8"></a></h3><p>The owner of the panel</p><h3 id="var/source_turf"><aside class="declaration">var </aside>source_turf <aside>– /<a href="turf.html">turf</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/_lootpanel.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/_lootpanel.dm 16"></a></h3><p>The turf being searched</p><h3 id="var/to_image"><aside class="declaration">var </aside>to_image <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/search_object.html">search_object</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/_lootpanel.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/_lootpanel.dm 12"></a></h3><p>The list of search_objects needing processed</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_to_index"><aside class="declaration">proc </aside>add_to_index<aside>(/<a href="datum.html">datum</a>/<a href="datum/search_object.html">search_object</a>/index)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/contents.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/contents.dm 2"></a></aside></h3><p>Adds the item to contents and to_image (if needed)</p><h3 id="proc/get_contents"><aside class="declaration">proc </aside>get_contents<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/ui.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/ui.dm 2"></a></aside></h3><p>UI helper for converting the associative list to a list of lists</p><h3 id="proc/grab"><aside class="declaration">proc </aside>grab<aside>(/<a href="mob.html">mob</a>/user, /list/params)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/ui.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/ui.dm 18"></a></aside></h3><p>Clicks an object from the contents. Validates the object and the user</p><h3 id="proc/on_searchable_deleted"><aside class="declaration">proc </aside>on_searchable_deleted<aside>(/<a href="datum.html">datum</a>/<a href="datum/search_object.html">search_object</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/handlers.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/handlers.dm 2"></a></aside></h3><p>On contents change, either reset or update</p><h3 id="proc/open"><aside class="declaration">proc </aside>open<aside>(/<a href="turf.html">turf</a>/tile)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/misc.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/misc.dm 2"></a></aside></h3><p>Helper to open the panel</p><h3 id="proc/populate_contents"><aside class="declaration">proc </aside>populate_contents<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/contents.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/contents.dm 11"></a></aside></h3><p>Used to populate contents and start generating if needed</p><h3 id="proc/process_images"><aside class="declaration">proc </aside>process_images<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/misc.dm#L34"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/misc.dm 34"></a></aside></h3><p>Called by SSlooting whenever this datum is added to its backlog.
Iterates over to_image list to create icons, then removes them.
Returns boolean - whether this proc has finished the queue or not.</p><h3 id="proc/reset_contents"><aside class="declaration">proc </aside>reset_contents<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/lootpanel/contents.dm#L64"><img src="git.png" width="16" height="16" title="code/modules/lootpanel/contents.dm 64"></a></aside></h3><p>For: Resetting to empty. Ignores the searchable qdel event</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>