<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/status_effect - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/status_effect.html#var">Var Details</a> - <a href="datum/status_effect.html#proc">Proc Details</a></header><main><h1>status_effect <aside>/<a href="datum.html">datum</a>/<a href="datum/status_effect.html">status_effect</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L3"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 3"></a></h1><p>Status effects are used to apply temporary or permanent effects to mobs.
This file contains their code, plus code for applying and removing them.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/status_effect.html#var/alert_type">alert_type</a></th><td>The typepath to the alert thrown by the status effect when created.
Status effect &quot;name&quot;s and &quot;description&quot;s are shown to the owner here.</td></tr><tr><th><a href="datum/status_effect.html#var/duration">duration</a></th><td>When set initially / in on_creation, this is how long the status effect lasts in deciseconds.
While processing, this becomes the world.time when the status effect will expire.
-1 = infinite duration.</td></tr><tr><th><a href="datum/status_effect.html#var/heal_flag_necessary">heal_flag_necessary</a></th><td>If remove_on_fullheal is TRUE, what flag do we need to be removed?</td></tr><tr><th><a href="datum/status_effect.html#var/id">id</a></th><td>The ID of the effect. ID is used in adding and removing effects to check for duplicates, among other things.</td></tr><tr><th><a href="datum/status_effect.html#var/linked_alert">linked_alert</a></th><td>The alert itself, created in [proc/on_creation] (if alert_type is specified).</td></tr><tr><th><a href="datum/status_effect.html#var/on_remove_on_mob_delete">on_remove_on_mob_delete</a></th><td>If TRUE, we call [proc/on_remove] when owner is deleted. Otherwise, we call [proc/be_replaced].</td></tr><tr><th><a href="datum/status_effect.html#var/owner">owner</a></th><td>The mob affected by the status effect.</td></tr><tr><th><a href="datum/status_effect.html#var/particle_effect">particle_effect</a></th><td>A particle effect, for things like embers - Should be set on update_particles()</td></tr><tr><th><a href="datum/status_effect.html#var/processing_speed">processing_speed</a></th><td>Used to define if the status effect should be using SSfastprocess or SSprocessing</td></tr><tr><th><a href="datum/status_effect.html#var/remove_on_fullheal">remove_on_fullheal</a></th><td>Do we self-terminate when a fullheal is called?</td></tr><tr><th><a href="datum/status_effect.html#var/show_duration">show_duration</a></th><td>If TRUE, and we have an alert, we will show a duration on the alert</td></tr><tr><th><a href="datum/status_effect.html#var/status_type">status_type</a></th><td>How many of the effect can be on one mob, and/or what happens when you try to add a duplicate.</td></tr><tr><th><a href="datum/status_effect.html#var/tick_interval">tick_interval</a></th><td>When set initially / in on_creation, this is how long between [proc/tick] calls in deciseconds.
Note that this cannot be faster than the processing subsystem you choose to fire the effect on. (See: [var/processing_speed])
While processing, this becomes the world.time when the next tick will occur.
-1 = will prevent ticks, and if duration is also unlimited (-1), stop processing wholesale.</td></tr><tr><th><a href="datum/status_effect.html#var/tick_interval_lowerbound">tick_interval_lowerbound</a></th><td>If our tick intervals are set to be a dynamic value within a range, the lowerbound of said range</td></tr><tr><th><a href="datum/status_effect.html#var/tick_interval_upperbound">tick_interval_upperbound</a></th><td>If our tick intervals are set to be a dynamic value within a range, the upperbound of said range</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/status_effect.html#proc/be_replaced">be_replaced</a></th><td>Called instead of on_remove when a status effect
of status_type STATUS_EFFECT_REPLACE is replaced by itself,
or when a status effect with on_remove_on_mob_delete
set to FALSE has its mob deleted</td></tr><tr><th><a href="datum/status_effect.html#proc/before_remove">before_remove</a></th><td>Called before being fully removed (before on_remove)
Returning FALSE will cancel removal</td></tr><tr><th><a href="datum/status_effect.html#proc/get_examine_text">get_examine_text</a></th><td>Gets and formats examine text associated with our status effect.
Return 'null' to have no examine text appear (default behavior).</td></tr><tr><th><a href="datum/status_effect.html#proc/nextmove_adjust">nextmove_adjust</a></th><td>Adds nextmove adjustment additiviely to the owner while applied</td></tr><tr><th><a href="datum/status_effect.html#proc/nextmove_modifier">nextmove_modifier</a></th><td>Adds nextmove modifier multiplicatively to the owner while applied</td></tr><tr><th><a href="datum/status_effect.html#proc/on_apply">on_apply</a></th><td>Called whenever the effect is applied in on_created
Returning FALSE will cause it to delete itself during creation instead.</td></tr><tr><th><a href="datum/status_effect.html#proc/on_creation">on_creation</a></th><td>Called from New() with any supplied status effect arguments.
Not guaranteed to exist by the end.
Returning FALSE from on_apply will stop on_creation and self-delete the effect.</td></tr><tr><th><a href="datum/status_effect.html#proc/on_remove">on_remove</a></th><td>Called whenever the buff expires or is removed (qdeleted)
Note that at the point this is called, it is out of the
owner's status_effects list, but owner is not yet null</td></tr><tr><th><a href="datum/status_effect.html#proc/refresh">refresh</a></th><td>Called when a status effect of status_type STATUS_EFFECT_REFRESH
has its duration refreshed in apply_status_effect - is passed New() args</td></tr><tr><th><a href="datum/status_effect.html#proc/remove_duration">remove_duration</a></th><td>Remove [seconds] of duration from the status effect, qdeling / ending if we eclipse the current world time.</td></tr><tr><th><a href="datum/status_effect.html#proc/remove_effect_on_heal">remove_effect_on_heal</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_POST_FULLY_HEAL" title="COMSIG_LIVING_POST_FULLY_HEAL">COMSIG_LIVING_POST_FULLY_HEAL</a> to remove us on fullheal</td></tr><tr><th><a href="datum/status_effect.html#proc/tick">tick</a></th><td>Called every tick from process().
This is only called of tick_interval is not -1.</td></tr><tr><th><a href="datum/status_effect.html#proc/update_particles">update_particles</a></th><td>Updates the particles for the status effects
Should be handled by subtypes!</td></tr><tr><th><a href="datum/status_effect.html#proc/update_shown_duration">update_shown_duration</a></th><td>Updates the status effect alert's maptext (if possible)</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/alert_type"><aside class="declaration">var </aside>alert_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L27"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 27"></a></h3><p>The typepath to the alert thrown by the status effect when created.
Status effect &quot;name&quot;s and &quot;description&quot;s are shown to the owner here.</p><h3 id="var/duration"><aside class="declaration">var </aside>duration <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L9"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 9"></a></h3><p>When set initially / in on_creation, this is how long the status effect lasts in deciseconds.
While processing, this becomes the world.time when the status effect will expire.
-1 = infinite duration.</p><h3 id="var/heal_flag_necessary"><aside class="declaration">var </aside>heal_flag_necessary <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L37"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 37"></a></h3><p>If remove_on_fullheal is TRUE, what flag do we need to be removed?</p><h3 id="var/id"><aside class="declaration">var </aside>id <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L5"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 5"></a></h3><p>The ID of the effect. ID is used in adding and removing effects to check for duplicates, among other things.</p><h3 id="var/linked_alert"><aside class="declaration">var </aside>linked_alert <aside>– /final/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/screen.html">screen</a>/<a href="atom/movable/screen/alert.html">alert</a>/<a href="atom/movable/screen/alert/status_effect.html">status_effect</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L29"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 29"></a></h3><p>The alert itself, created in [proc/on_creation] (if alert_type is specified).</p><h3 id="var/on_remove_on_mob_delete"><aside class="declaration">var </aside>on_remove_on_mob_delete <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 24"></a></h3><p>If TRUE, we call [proc/on_remove] when owner is deleted. Otherwise, we call [proc/be_replaced].</p><h3 id="var/owner"><aside class="declaration">var </aside>owner <aside>– /final/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 20"></a></h3><p>The mob affected by the status effect.</p><h3 id="var/particle_effect"><aside class="declaration">var </aside>particle_effect <aside>– /final/<a href="obj.html">obj</a>/<a href="obj/effect/abstract/particle_holder.html">effect/abstract/particle_holder</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L39"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 39"></a></h3><p>A particle effect, for things like embers - Should be set on update_particles()</p><h3 id="var/processing_speed"><aside class="declaration">var </aside>processing_speed <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L33"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 33"></a></h3><p>Used to define if the status effect should be using SSfastprocess or SSprocessing</p><h3 id="var/remove_on_fullheal"><aside class="declaration">var </aside>remove_on_fullheal <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L35"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 35"></a></h3><p>Do we self-terminate when a fullheal is called?</p><h3 id="var/show_duration"><aside class="declaration">var </aside>show_duration <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L31"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 31"></a></h3><p>If TRUE, and we have an alert, we will show a duration on the alert</p><h3 id="var/status_type"><aside class="declaration">var </aside>status_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 22"></a></h3><p>How many of the effect can be on one mob, and/or what happens when you try to add a duplicate.</p><h3 id="var/tick_interval"><aside class="declaration">var </aside>tick_interval <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L14"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 14"></a></h3><p>When set initially / in on_creation, this is how long between [proc/tick] calls in deciseconds.
Note that this cannot be faster than the processing subsystem you choose to fire the effect on. (See: [var/processing_speed])
While processing, this becomes the world.time when the next tick will occur.
-1 = will prevent ticks, and if duration is also unlimited (-1), stop processing wholesale.</p><h3 id="var/tick_interval_lowerbound"><aside class="declaration">var </aside>tick_interval_lowerbound <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L16"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 16"></a></h3><p>If our tick intervals are set to be a dynamic value within a range, the lowerbound of said range</p><h3 id="var/tick_interval_upperbound"><aside class="declaration">var </aside>tick_interval_upperbound <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 18"></a></h3><p>If our tick intervals are set to be a dynamic value within a range, the upperbound of said range</p><h2 id="proc">Proc Details</h2><h3 id="proc/be_replaced"><aside class="declaration">proc </aside>be_replaced<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L173"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 173"></a></aside></h3><p>Called instead of on_remove when a status effect
of status_type STATUS_EFFECT_REPLACE is replaced by itself,
or when a status effect with on_remove_on_mob_delete
set to FALSE has its mob deleted</p><h3 id="proc/before_remove"><aside class="declaration">proc </aside>before_remove<aside>(...)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L182"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 182"></a></aside></h3><p>Called before being fully removed (before on_remove)
Returning FALSE will cancel removal</p><h3 id="proc/get_examine_text"><aside class="declaration">proc </aside>get_examine_text<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L147"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 147"></a></aside></h3><p>Gets and formats examine text associated with our status effect.
Return 'null' to have no examine text appear (default behavior).</p><h3 id="proc/nextmove_adjust"><aside class="declaration">proc </aside>nextmove_adjust<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L198"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 198"></a></aside></h3><p>Adds nextmove adjustment additiviely to the owner while applied</p><h3 id="proc/nextmove_modifier"><aside class="declaration">proc </aside>nextmove_modifier<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L194"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 194"></a></aside></h3><p>Adds nextmove modifier multiplicatively to the owner while applied</p><h3 id="proc/on_apply"><aside class="declaration">proc </aside>on_apply<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L142"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 142"></a></aside></h3><p>Called whenever the effect is applied in on_created
Returning FALSE will cause it to delete itself during creation instead.</p><h3 id="proc/on_creation"><aside class="declaration">proc </aside>on_creation<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/new_owner, ...)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L47"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 47"></a></aside></h3><p>Called from New() with any supplied status effect arguments.
Not guaranteed to exist by the end.
Returning FALSE from on_apply will stop on_creation and self-delete the effect.</p><h3 id="proc/on_remove"><aside class="declaration">proc </aside>on_remove<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L166"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 166"></a></aside></h3><p>Called whenever the buff expires or is removed (qdeleted)
Note that at the point this is called, it is out of the
owner's status_effects list, but owner is not yet null</p><h3 id="proc/refresh"><aside class="declaration">proc </aside>refresh<aside>(effect, ...)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L187"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 187"></a></aside></h3><p>Called when a status effect of status_type STATUS_EFFECT_REFRESH
has its duration refreshed in apply_status_effect - is passed New() args</p><h3 id="proc/remove_duration"><aside class="declaration">proc </aside>remove_duration<aside>(seconds)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L212"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 212"></a></aside></h3><p>Remove [seconds] of duration from the status effect, qdeling / ending if we eclipse the current world time.</p><h3 id="proc/remove_effect_on_heal"><aside class="declaration">proc </aside>remove_effect_on_heal<aside>(/<a href="datum.html">datum</a>/source, heal_flags)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L202"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 202"></a></aside></h3><p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_POST_FULLY_HEAL" title="COMSIG_LIVING_POST_FULLY_HEAL">COMSIG_LIVING_POST_FULLY_HEAL</a> to remove us on fullheal</p><h3 id="proc/tick"><aside class="declaration">proc </aside>tick<aside>(seconds_between_ticks)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L160"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 160"></a></aside></h3><p>Called every tick from process().
This is only called of tick_interval is not -1.</p>
<p>Note that every tick =/= every processing cycle.</p>
<ul>
<li>seconds_between_ticks = This is how many SECONDS that elapse between ticks.
This is a constant value based upon the initial tick interval set on the status effect.
It is similar to seconds_per_tick, from processing itself, but adjusted to the status effect's tick interval.</li>
</ul><h3 id="proc/update_particles"><aside class="declaration">proc </aside>update_particles<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L228"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 228"></a></aside></h3><p>Updates the particles for the status effects
Should be handled by subtypes!</p><h3 id="proc/update_shown_duration"><aside class="declaration">proc </aside>update_shown_duration<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/status_effects/_status_effect.dm#L106"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 106"></a></aside></h3><p>Updates the status effect alert's maptext (if possible)</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>