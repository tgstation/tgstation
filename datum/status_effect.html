<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/status_effect - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/status_effect.html#var">Var Details</a> - <a href="datum/status_effect.html#proc">Proc Details</a></header><main><h1>status_effect <aside>/<a href="datum.html">datum</a>/<a href="datum/status_effect.html">status_effect</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L3"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 3"></a></h1><p>Status effects are used to apply temporary or permanent effects to mobs.
This file contains their code, plus code for applying and removing them.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/status_effect.html#var/alert_type">alert_type</a></th><td>The typepath to the alert thrown by the status effect when created.
Status effect &quot;name&quot;s and &quot;description&quot;s are shown to the owner here.</td></tr><tr><th><a href="datum/status_effect.html#var/duration">duration</a></th><td>This is how long the status effect lasts in deciseconds.
You can put STATUS_EFFECT_PERMANENT (or INFINITY) here for infinite duration.</td></tr><tr><th><a href="datum/status_effect.html#var/heal_flag_necessary">heal_flag_necessary</a></th><td>If remove_on_fullheal is TRUE, what flag do we need to be removed?</td></tr><tr><th><a href="datum/status_effect.html#var/id">id</a></th><td>The ID of the effect. ID is used in adding and removing effects to check for duplicates, among other things.</td></tr><tr><th><a href="datum/status_effect.html#var/linked_alert">linked_alert</a></th><td>The alert itself, created in [proc/on_creation] (if alert_type is specified).</td></tr><tr><th><a href="datum/status_effect.html#var/on_remove_on_mob_delete">on_remove_on_mob_delete</a></th><td>If TRUE, we call [proc/on_remove] when owner is deleted. Otherwise, we call [proc/be_replaced].</td></tr><tr><th><a href="datum/status_effect.html#var/owner">owner</a></th><td>The mob affected by the status effect.</td></tr><tr><th><a href="datum/status_effect.html#var/particle_effect">particle_effect</a></th><td>A particle effect, for things like embers - Should be set on update_particles()</td></tr><tr><th><a href="datum/status_effect.html#var/processing_speed">processing_speed</a></th><td>Used to define if the status effect should be using SSfastprocess or SSprocessing</td></tr><tr><th><a href="datum/status_effect.html#var/remove_on_fullheal">remove_on_fullheal</a></th><td>Do we self-terminate when a fullheal is called?</td></tr><tr><th><a href="datum/status_effect.html#var/show_duration">show_duration</a></th><td>If TRUE, and we have an alert, we will show a duration on the alert</td></tr><tr><th><a href="datum/status_effect.html#var/status_type">status_type</a></th><td>How many of the effect can be on one mob, and/or what happens when you try to add a duplicate.</td></tr><tr><th><a href="datum/status_effect.html#var/tick_interval">tick_interval</a></th><td>This is how long between [proc/tick] calls in deciseconds.
This has to be a multiple of the [var/wait] of the subsystem this status effect is running on, which is based on [var/processing_speed].
Putting STATUS_EFFECT_NO_TICK here will stop [proc/tick] calls, and if [var/duration] is STATUS_EFFECT_PERMANENT, it stops processing entirely.
Putting STATUS_EFFECT_AUTO_TICK here will make every subsystem tick call [proc/tick], making the tick interval depend entirely on [var/processing_speed]</td></tr><tr><th><a href="datum/status_effect.html#var/time_until_next_tick">time_until_next_tick</a></th><td>The time until the next [proc/tick] call, gets set to [var/tick_interval] after every [proc/tick] call and decrements on every [proc/process] call.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/status_effect.html#proc/be_replaced">be_replaced</a></th><td>Called instead of on_remove when a status effect
of status_type STATUS_EFFECT_REPLACE is replaced by itself,
or when a status effect with on_remove_on_mob_delete
set to FALSE has its mob deleted</td></tr><tr><th><a href="datum/status_effect.html#proc/before_remove">before_remove</a></th><td>Called before being fully removed (before on_remove)
Returning FALSE will cancel removal</td></tr><tr><th><a href="datum/status_effect.html#proc/get_examine_text">get_examine_text</a></th><td>Gets and formats examine text associated with our status effect.
Return 'null' to have no examine text appear (default behavior).</td></tr><tr><th><a href="datum/status_effect.html#proc/nextmove_adjust">nextmove_adjust</a></th><td>Adds nextmove adjustment additiviely to the owner while applied</td></tr><tr><th><a href="datum/status_effect.html#proc/nextmove_modifier">nextmove_modifier</a></th><td>Adds nextmove modifier multiplicatively to the owner while applied</td></tr><tr><th><a href="datum/status_effect.html#proc/on_apply">on_apply</a></th><td>Called whenever the effect is applied in on_created
Returning FALSE will cause it to delete itself during creation instead.</td></tr><tr><th><a href="datum/status_effect.html#proc/on_creation">on_creation</a></th><td>Called from New() with any supplied status effect arguments.
Not guaranteed to exist by the end.
Returning FALSE from on_apply will stop on_creation and self-delete the effect.</td></tr><tr><th><a href="datum/status_effect.html#proc/on_remove">on_remove</a></th><td>Called whenever the buff expires or is removed (qdeleted)
Note that at the point this is called, it is out of the
owner's status_effects list, but owner is not yet null</td></tr><tr><th><a href="datum/status_effect.html#proc/refresh">refresh</a></th><td>Called when a status effect of status_type STATUS_EFFECT_REFRESH
has its duration refreshed in apply_status_effect - is passed New() args</td></tr><tr><th><a href="datum/status_effect.html#proc/remove_duration">remove_duration</a></th><td>Removes [seconds] of duration from the status effect.
Returns whether or not the status effect was qdeleted due to running out of duration.</td></tr><tr><th><a href="datum/status_effect.html#proc/remove_effect_on_heal">remove_effect_on_heal</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_POST_FULLY_HEAL" title="COMSIG_LIVING_POST_FULLY_HEAL">COMSIG_LIVING_POST_FULLY_HEAL</a> to remove us on fullheal</td></tr><tr><th><a href="datum/status_effect.html#proc/tick">tick</a></th><td>Called every tick from process().
This is only called of tick_interval is not -1.</td></tr><tr><th><a href="datum/status_effect.html#proc/update_particles">update_particles</a></th><td>Updates the particles for the status effects
Should be handled by subtypes!</td></tr><tr><th><a href="datum/status_effect.html#proc/update_shown_duration">update_shown_duration</a></th><td>Updates the status effect alert's maptext (if possible)</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/alert_type"><aside class="declaration">var </aside>alert_type <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 24"></a></h3><p>The typepath to the alert thrown by the status effect when created.
Status effect &quot;name&quot;s and &quot;description&quot;s are shown to the owner here.</p><h3 id="var/duration"><aside class="declaration">var </aside>duration <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L8"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 8"></a></h3><p>This is how long the status effect lasts in deciseconds.
You can put STATUS_EFFECT_PERMANENT (or INFINITY) here for infinite duration.</p><h3 id="var/heal_flag_necessary"><aside class="declaration">var </aside>heal_flag_necessary <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L34"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 34"></a></h3><p>If remove_on_fullheal is TRUE, what flag do we need to be removed?</p><h3 id="var/id"><aside class="declaration">var </aside>id <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L5"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 5"></a></h3><p>The ID of the effect. ID is used in adding and removing effects to check for duplicates, among other things.</p><h3 id="var/linked_alert"><aside class="declaration">var </aside>linked_alert <aside>– /final/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/screen.html">screen</a>/<a href="atom/movable/screen/alert.html">alert</a>/<a href="atom/movable/screen/alert/status_effect.html">status_effect</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L26"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 26"></a></h3><p>The alert itself, created in [proc/on_creation] (if alert_type is specified).</p><h3 id="var/on_remove_on_mob_delete"><aside class="declaration">var </aside>on_remove_on_mob_delete <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 21"></a></h3><p>If TRUE, we call [proc/on_remove] when owner is deleted. Otherwise, we call [proc/be_replaced].</p><h3 id="var/owner"><aside class="declaration">var </aside>owner <aside>– /final/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L17"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 17"></a></h3><p>The mob affected by the status effect.</p><h3 id="var/particle_effect"><aside class="declaration">var </aside>particle_effect <aside>– /final/<a href="obj.html">obj</a>/<a href="obj/effect/abstract/particle_holder.html">effect/abstract/particle_holder</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L36"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 36"></a></h3><p>A particle effect, for things like embers - Should be set on update_particles()</p><h3 id="var/processing_speed"><aside class="declaration">var </aside>processing_speed <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L30"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 30"></a></h3><p>Used to define if the status effect should be using SSfastprocess or SSprocessing</p><h3 id="var/remove_on_fullheal"><aside class="declaration">var </aside>remove_on_fullheal <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L32"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 32"></a></h3><p>Do we self-terminate when a fullheal is called?</p><h3 id="var/show_duration"><aside class="declaration">var </aside>show_duration <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L28"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 28"></a></h3><p>If TRUE, and we have an alert, we will show a duration on the alert</p><h3 id="var/status_type"><aside class="declaration">var </aside>status_type <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L19"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 19"></a></h3><p>How many of the effect can be on one mob, and/or what happens when you try to add a duplicate.</p><h3 id="var/tick_interval"><aside class="declaration">var </aside>tick_interval <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L13"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 13"></a></h3><p>This is how long between [proc/tick] calls in deciseconds.
This has to be a multiple of the [var/wait] of the subsystem this status effect is running on, which is based on [var/processing_speed].
Putting STATUS_EFFECT_NO_TICK here will stop [proc/tick] calls, and if [var/duration] is STATUS_EFFECT_PERMANENT, it stops processing entirely.
Putting STATUS_EFFECT_AUTO_TICK here will make every subsystem tick call [proc/tick], making the tick interval depend entirely on [var/processing_speed]</p><h3 id="var/time_until_next_tick"><aside class="declaration">var </aside>time_until_next_tick <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L15"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 15"></a></h3><p>The time until the next [proc/tick] call, gets set to [var/tick_interval] after every [proc/tick] call and decrements on every [proc/process] call.</p><h2 id="proc">Proc Details</h2><h3 id="proc/be_replaced"><aside class="declaration">proc </aside>be_replaced<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L173"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 173"></a></aside></h3><p>Called instead of on_remove when a status effect
of status_type STATUS_EFFECT_REPLACE is replaced by itself,
or when a status effect with on_remove_on_mob_delete
set to FALSE has its mob deleted</p><h3 id="proc/before_remove"><aside class="declaration">proc </aside>before_remove<aside>(...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L182"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 182"></a></aside></h3><p>Called before being fully removed (before on_remove)
Returning FALSE will cancel removal</p><h3 id="proc/get_examine_text"><aside class="declaration">proc </aside>get_examine_text<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L147"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 147"></a></aside></h3><p>Gets and formats examine text associated with our status effect.
Return 'null' to have no examine text appear (default behavior).</p><h3 id="proc/nextmove_adjust"><aside class="declaration">proc </aside>nextmove_adjust<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L195"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 195"></a></aside></h3><p>Adds nextmove adjustment additiviely to the owner while applied</p><h3 id="proc/nextmove_modifier"><aside class="declaration">proc </aside>nextmove_modifier<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L191"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 191"></a></aside></h3><p>Adds nextmove modifier multiplicatively to the owner while applied</p><h3 id="proc/on_apply"><aside class="declaration">proc </aside>on_apply<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L142"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 142"></a></aside></h3><p>Called whenever the effect is applied in on_created
Returning FALSE will cause it to delete itself during creation instead.</p><h3 id="proc/on_creation"><aside class="declaration">proc </aside>on_creation<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/new_owner, ...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L44"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 44"></a></aside></h3><p>Called from New() with any supplied status effect arguments.
Not guaranteed to exist by the end.
Returning FALSE from on_apply will stop on_creation and self-delete the effect.</p><h3 id="proc/on_remove"><aside class="declaration">proc </aside>on_remove<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L166"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 166"></a></aside></h3><p>Called whenever the buff expires or is removed (qdeleted)
Note that at the point this is called, it is out of the
owner's status_effects list, but owner is not yet null</p><h3 id="proc/refresh"><aside class="declaration">proc </aside>refresh<aside>(effect, ...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L187"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 187"></a></aside></h3><p>Called when a status effect of status_type STATUS_EFFECT_REFRESH
has its duration refreshed in apply_status_effect - is passed New() args</p><h3 id="proc/remove_duration"><aside class="declaration">proc </aside>remove_duration<aside>(seconds)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L210"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 210"></a></aside></h3><p>Removes [seconds] of duration from the status effect.
Returns whether or not the status effect was qdeleted due to running out of duration.</p><h3 id="proc/remove_effect_on_heal"><aside class="declaration">proc </aside>remove_effect_on_heal<aside>(/<a href="datum.html">datum</a>/source, heal_flags)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L199"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 199"></a></aside></h3><p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_POST_FULLY_HEAL" title="COMSIG_LIVING_POST_FULLY_HEAL">COMSIG_LIVING_POST_FULLY_HEAL</a> to remove us on fullheal</p><h3 id="proc/tick"><aside class="declaration">proc </aside>tick<aside>(seconds_between_ticks)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L160"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 160"></a></aside></h3><p>Called every tick from process().
This is only called of tick_interval is not -1.</p>
<p>Note that every tick =/= every processing cycle.</p>
<ul>
<li>seconds_between_ticks = This is how many SECONDS that elapse between ticks.
This is a constant value based upon the initial tick interval set on the status effect.
It is similar to seconds_per_tick, from processing itself, but adjusted to the status effect's tick interval.</li>
</ul><h3 id="proc/update_particles"><aside class="declaration">proc </aside>update_particles<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L226"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 226"></a></aside></h3><p>Updates the particles for the status effects
Should be handled by subtypes!</p><h3 id="proc/update_shown_duration"><aside class="declaration">proc </aside>update_shown_duration<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/_status_effect.dm#L102"><img src="git.png" width="16" height="16" title="code/datums/status_effects/_status_effect.dm 102"></a></aside></h3><p>Updates the status effect alert's maptext (if possible)</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>