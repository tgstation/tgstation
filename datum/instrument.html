<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/instrument - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/instrument.html#var">Var Details</a> - <a href="datum/instrument.html#proc">Proc Details</a></header><main><h1>Instrument Datums <aside>/<a href="datum.html">datum</a>/<a href="datum/instrument.html">instrument</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L19"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 19"></a></h1><p>Instrument datums hold the data for any given instrument, as well as data on how to play it and what bounds there are to playing it.</p>
<p>The datums themselves are kept in SSinstruments in a list by their unique ID. The reason it uses ID instead of typepath is to support the runtime creation of instruments.
Since songs cache them while playing, there isn't realistic issues regarding performance from accessing.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/instrument.html#var/HIGHEST_KEY">HIGHEST_KEY</a></th><td>Don't touch this</td></tr><tr><th><a href="datum/instrument.html#var/LOWEST_KEY">LOWEST_KEY</a></th><td>Don't touch this x2</td></tr><tr><th><a href="datum/instrument.html#var/abstract_type">abstract_type</a></th><td>Used for categorization subtypes</td></tr><tr><th><a href="datum/instrument.html#var/admin_only">admin_only</a></th><td>Oh no - For truly troll instruments.</td></tr><tr><th><a href="datum/instrument.html#var/category">category</a></th><td>Category</td></tr><tr><th><a href="datum/instrument.html#var/id">id</a></th><td>Uniquely identifies this instrument so runtime changes are possible as opposed to paths. If this is unset, things will use path instead.</td></tr><tr><th><a href="datum/instrument.html#var/instrument_flags">instrument_flags</a></th><td>See __DEFINES/flags/instruments.dm</td></tr><tr><th><a href="datum/instrument.html#var/legacy_instrument_ext">legacy_instrument_ext</a></th><td>For legacy instruments, our file extension</td></tr><tr><th><a href="datum/instrument.html#var/legacy_instrument_path">legacy_instrument_path</a></th><td>For legacy instruments, the path to our notes</td></tr><tr><th><a href="datum/instrument.html#var/name">name</a></th><td>Name of the instrument</td></tr><tr><th><a href="datum/instrument.html#var/real_samples">real_samples</a></th><td>Write here however many samples, follow this syntax: &quot;%note num%&quot;='%sample file%' eg. &quot;27&quot;='synthesizer/e2.ogg'. Key must never be lower than 0 and higher than 127</td></tr><tr><th><a href="datum/instrument.html#var/samples">samples</a></th><td>assoc list key = /datum/instrument_key. do not fill this yourself!</td></tr><tr><th><a href="datum/instrument.html#var/songs_using">songs_using</a></th><td>What songs are using us</td></tr><tr><th><a href="datum/instrument.html#var/volume_multiplier">volume_multiplier</a></th><td>Volume multiplier. Synthesized instruments are quite loud and I don't like to cut off potential detail via editing. (someone correct me if this isn't a thing)</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/instrument.html#proc/Initialize">Initialize</a></th><td>Initializes the instrument, calculating its samples if necessary.</td></tr><tr><th><a href="datum/instrument.html#proc/calculate_samples">calculate_samples</a></th><td>For synthesized instruments, this is how the instrument generates the &quot;keys&quot; that a <a href="datum/song.html" title="/datum/song">/datum/song</a> uses to play notes.
Calculating them on the fly would be unperformant, so we do it during init and keep it all cached in a list.</td></tr><tr><th><a href="datum/instrument.html#proc/ready">ready</a></th><td>Checks if this instrument is ready to play.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/HIGHEST_KEY"><aside class="declaration">var </aside>HIGHEST_KEY <aside>– /static</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 41"></a></h3><p>Don't touch this</p><h3 id="var/LOWEST_KEY"><aside class="declaration">var </aside>LOWEST_KEY <aside>– /static</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L43"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 43"></a></h3><p>Don't touch this x2</p><h3 id="var/abstract_type"><aside class="parent"><a title="/datum" href="datum.html#var/abstract_type">↑</a></aside>abstract_type <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 21"></a></h3><p>Used for categorization subtypes</p><h3 id="var/admin_only"><aside class="declaration">var </aside>admin_only <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L45"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 45"></a></h3><p>Oh no - For truly troll instruments.</p><h3 id="var/category"><aside class="declaration">var </aside>category <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 27"></a></h3><p>Category</p><h3 id="var/id"><aside class="declaration">var </aside>id <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 25"></a></h3><p>Uniquely identifies this instrument so runtime changes are possible as opposed to paths. If this is unset, things will use path instead.</p><h3 id="var/instrument_flags"><aside class="declaration">var </aside>instrument_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 33"></a></h3><p>See __DEFINES/flags/instruments.dm</p><h3 id="var/legacy_instrument_ext"><aside class="declaration">var </aside>legacy_instrument_ext <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L37"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 37"></a></h3><p>For legacy instruments, our file extension</p><h3 id="var/legacy_instrument_path"><aside class="declaration">var </aside>legacy_instrument_path <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 35"></a></h3><p>For legacy instruments, the path to our notes</p><h3 id="var/name"><aside class="declaration">var </aside>name <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 23"></a></h3><p>Name of the instrument</p><h3 id="var/real_samples"><aside class="declaration">var </aside>real_samples <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 29"></a></h3><p>Write here however many samples, follow this syntax: &quot;%note num%&quot;='%sample file%' eg. &quot;27&quot;='synthesizer/e2.ogg'. Key must never be lower than 0 and higher than 127</p><h3 id="var/samples"><aside class="declaration">var </aside>samples <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 31"></a></h3><p>assoc list key = /datum/instrument_key. do not fill this yourself!</p><h3 id="var/songs_using"><aside class="declaration">var </aside>songs_using <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/song.html">song</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L39"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 39"></a></h3><p>What songs are using us</p><h3 id="var/volume_multiplier"><aside class="declaration">var </aside>volume_multiplier <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L47"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 47"></a></h3><p>Volume multiplier. Synthesized instruments are quite loud and I don't like to cut off potential detail via editing. (someone correct me if this isn't a thing)</p><h2 id="proc">Proc Details</h2><h3 id="proc/Initialize"><aside class="declaration">proc </aside>Initialize<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L56"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 56"></a></aside></h3><p>Initializes the instrument, calculating its samples if necessary.</p><h3 id="proc/calculate_samples"><aside class="declaration">proc </aside>calculate_samples<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L85"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 85"></a></aside></h3><p>For synthesized instruments, this is how the instrument generates the &quot;keys&quot; that a <a href="datum/song.html" title="/datum/song">/datum/song</a> uses to play notes.
Calculating them on the fly would be unperformant, so we do it during init and keep it all cached in a list.</p><h3 id="proc/ready"><aside class="declaration">proc </aside>ready<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/instruments/instrument_data/_instrument_data.dm#L64"><img src="git.png" width="16" height="16" title="code/modules/instruments/instrument_data/_instrument_data.dm 64"></a></aside></h3><p>Checks if this instrument is ready to play.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>