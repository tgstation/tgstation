<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/component/experiment_handler - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/component/experiment_handler.html#var">Var Details</a> - <a href="datum/component/experiment_handler.html#proc">Proc Details</a></header><main><h1>Experiment Handler <aside>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/experiment_handler.html">experiment_handler</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L8"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 8"></a></h1><p>This is the component for interacting with experiments from a connected techweb. It is generic
and should be set-up to automatically work on any class it is attached to without outside code
(Excluding potential callbacks)</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/component/experiment_handler.html#var/allowed_experiments">allowed_experiments</a></th><td>Holds the list of types of experiments that this experiment_handler can interact with</td></tr><tr><th><a href="datum/component/experiment_handler.html#var/blacklisted_experiments">blacklisted_experiments</a></th><td>Holds the list of types of experiments that this experimennt_handler should NOT interact with</td></tr><tr><th><a href="datum/component/experiment_handler.html#var/config_flags">config_flags</a></th><td>Additional configuration flags for how the experiment_handler operates</td></tr><tr><th><a href="datum/component/experiment_handler.html#var/disallowed_traits">disallowed_traits</a></th><td>A set of optional experiment traits (see defines) that are disallowed for any experiments</td></tr><tr><th><a href="datum/component/experiment_handler.html#var/linked_web">linked_web</a></th><td>Holds the currently linked techweb to get experiments from</td></tr><tr><th><a href="datum/component/experiment_handler.html#var/selected_experiment">selected_experiment</a></th><td>Holds the currently selected experiment</td></tr><tr><th><a href="datum/component/experiment_handler.html#var/start_experiment_callback">start_experiment_callback</a></th><td>Callback that, when supplied, can be called from the UI</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/Initialize">Initialize</a></th><td>Initializes a new instance of the experiment_handler component</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/action_experiment">action_experiment</a></th><td>Attempts to perform the selected experiment given some arguments</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/announce_message">announce_message</a></th><td>Announces a message to this experiment handler</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/can_select_experiment">can_select_experiment</a></th><td>Checks if an experiment is valid to be selected by this handler</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/configure_experiment">configure_experiment</a></th><td>Attempts to show the user the experiment configuration panel</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/configure_experiment_click">configure_experiment_click</a></th><td>Attempts to show the user the experiment configuration panel</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/ignored_handheld_experiment_attempt">ignored_handheld_experiment_attempt</a></th><td>Provides feedback when an item isn't related to an experiment, and has fully passed the attack chain</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/is_compatible_experiment">is_compatible_experiment</a></th><td>Checks if an experiment could be selected by the handler if it were available in the linked web.
Basically, it skips the available_experiments check, unlike can_select_experiment.</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/link_experiment">link_experiment</a></th><td>Attempts to link this experiment_handler to a provided experiment</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/link_techweb">link_techweb</a></th><td>Attempts to link this experiment_handler to a provided techweb</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/should_run_handheld_experiment">should_run_handheld_experiment</a></th><td>Checks that an experiment can be run using the provided target, used for preventing the cancellation of the attack chain inappropriately</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/try_run_autopsy_experiment">try_run_autopsy_experiment</a></th><td>Hooks on a successful autopsy experiment</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/try_run_destructive_experiment">try_run_destructive_experiment</a></th><td>Hooks on destructive scans to try and run an experiment (When using a handheld handler)</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/try_run_handheld_experiment">try_run_handheld_experiment</a></th><td>Hooks on attack to try and run an experiment (When using a handheld handler)</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/try_run_handheld_experiment_async">try_run_handheld_experiment_async</a></th><td>This proc exists because Jared Fogle really likes async</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/ui_handle_experiment">ui_handle_experiment</a></th><td>Hook for handling UI interaction via signals</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/unlink_experiment">unlink_experiment</a></th><td>Unlinks this handler from the selected experiment</td></tr><tr><th><a href="datum/component/experiment_handler.html#proc/unlink_techweb">unlink_techweb</a></th><td>Unlinks this handler from the selected techweb</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/allowed_experiments"><aside class="declaration">var </aside>allowed_experiments <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 14"></a></h3><p>Holds the list of types of experiments that this experiment_handler can interact with</p><h3 id="var/blacklisted_experiments"><aside class="declaration">var </aside>blacklisted_experiments <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 16"></a></h3><p>Holds the list of types of experiments that this experimennt_handler should NOT interact with</p><h3 id="var/config_flags"><aside class="declaration">var </aside>config_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L20"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 20"></a></h3><p>Additional configuration flags for how the experiment_handler operates</p><h3 id="var/disallowed_traits"><aside class="declaration">var </aside>disallowed_traits <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 18"></a></h3><p>A set of optional experiment traits (see defines) that are disallowed for any experiments</p><h3 id="var/linked_web"><aside class="declaration">var </aside>linked_web <aside>– /<a href="datum.html">datum</a>/<a href="datum/techweb.html">techweb</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L10"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 10"></a></h3><p>Holds the currently linked techweb to get experiments from</p><h3 id="var/selected_experiment"><aside class="declaration">var </aside>selected_experiment <aside>– /<a href="datum.html">datum</a>/<a href="datum/experiment.html">experiment</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 12"></a></h3><p>Holds the currently selected experiment</p><h3 id="var/start_experiment_callback"><aside class="declaration">var </aside>start_experiment_callback <aside>– /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 22"></a></h3><p>Callback that, when supplied, can be called from the UI</p><h2 id="proc">Proc Details</h2><h3 id="proc/Initialize"><aside class="parent"><a title="/datum/component" href="datum/component.html#proc/Initialize">↑</a></aside>Initialize<aside>(allowed_experiments, blacklisted_experiments, config_mode, disallowed_traits, config_flags, /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a>/start_experiment_callback, /list/experiment_signals)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 35"></a></aside></h3><p>Initializes a new instance of the experiment_handler component</p>
<p>Arguments:</p>
<ul>
<li>allowed_experiments - The list of /datum/experiment types that can be performed with this component</li>
<li>blacklisted_experiments - The list of /datum/experiment types that explicitly cannot be performed with this component</li>
<li>config_mode - The define that determines how the experiment_handler should display the configuration UI</li>
<li>disallowed_traits - Flags that control what experiment traits are blacklisted by this experiment handler</li>
<li>config_flags - Flags that control the operational behaviour of the experiment handler, see experiment defines</li>
<li>start_experiment_callback - When provided adds a UI button to use this callback to the start the experiment</li>
</ul><h3 id="proc/action_experiment"><aside class="declaration">proc </aside>action_experiment<aside>(/<a href="datum.html">datum</a>/source, ...)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L179"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 179"></a></aside></h3><p>Attempts to perform the selected experiment given some arguments</p><h3 id="proc/announce_message"><aside class="declaration">proc </aside>announce_message<aside>(message)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L172"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 172"></a></aside></h3><p>Announces a message to this experiment handler</p>
<p>Arguments:</p>
<ul>
<li>message - The message to announce</li>
</ul><h3 id="proc/can_select_experiment"><aside class="declaration">proc </aside>can_select_experiment<aside>(/<a href="datum.html">datum</a>/<a href="datum/experiment.html">experiment</a>/experiment)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L280"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 280"></a></aside></h3><p>Checks if an experiment is valid to be selected by this handler</p>
<p>Arguments:</p>
<ul>
<li>experiment - The experiment to check</li>
</ul><h3 id="proc/configure_experiment"><aside class="declaration">proc </aside>configure_experiment<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L217"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 217"></a></aside></h3><p>Attempts to show the user the experiment configuration panel</p>
<p>Arguments:</p>
<ul>
<li>user - The user to show the experiment configuration panel to</li>
</ul><h3 id="proc/configure_experiment_click"><aside class="declaration">proc </aside>configure_experiment_click<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L228"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 228"></a></aside></h3><p>Attempts to show the user the experiment configuration panel</p>
<p>Arguments:</p>
<ul>
<li>user - The user to show the experiment configuration panel to</li>
</ul><h3 id="proc/ignored_handheld_experiment_attempt"><aside class="declaration">proc </aside>ignored_handheld_experiment_attempt<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/target, /<a href="mob.html">mob</a>/user, /list/modifiers)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L92"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 92"></a></aside></h3><p>Provides feedback when an item isn't related to an experiment, and has fully passed the attack chain</p><h3 id="proc/is_compatible_experiment"><aside class="declaration">proc </aside>is_compatible_experiment<aside>(/<a href="datum.html">datum</a>/<a href="datum/experiment.html">experiment</a>/experiment)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L291"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 291"></a></aside></h3><p>Checks if an experiment could be selected by the handler if it were available in the linked web.
Basically, it skips the available_experiments check, unlike can_select_experiment.</p><h3 id="proc/link_experiment"><aside class="declaration">proc </aside>link_experiment<aside>(/<a href="datum.html">datum</a>/<a href="datum/experiment.html">experiment</a>/experiment)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L261"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 261"></a></aside></h3><p>Attempts to link this experiment_handler to a provided experiment</p>
<p>Arguments:</p>
<ul>
<li>experiment - The experiment to attempt to link to</li>
</ul><h3 id="proc/link_techweb"><aside class="declaration">proc </aside>link_techweb<aside>(/<a href="datum.html">datum</a>/<a href="datum/techweb.html">techweb</a>/new_web)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L240"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 240"></a></aside></h3><p>Attempts to link this experiment_handler to a provided techweb</p>
<p>This proc attempts to link the handler to a provided techweb, overriding the existing techweb if relevant</p>
<p>Arguments:</p>
<ul>
<li>new_web - The new techweb to link to</li>
</ul><h3 id="proc/should_run_handheld_experiment"><aside class="declaration">proc </aside>should_run_handheld_experiment<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/target, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L102"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 102"></a></aside></h3><p>Checks that an experiment can be run using the provided target, used for preventing the cancellation of the attack chain inappropriately</p><h3 id="proc/try_run_autopsy_experiment"><aside class="declaration">proc </aside>try_run_autopsy_experiment<aside>(/<a href="obj.html">obj</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L159"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 159"></a></aside></h3><p>Hooks on a successful autopsy experiment</p><h3 id="proc/try_run_destructive_experiment"><aside class="declaration">proc </aside>try_run_destructive_experiment<aside>(/<a href="datum.html">datum</a>/source, /list/scanned_atoms)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L139"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 139"></a></aside></h3><p>Hooks on destructive scans to try and run an experiment (When using a handheld handler)</p><h3 id="proc/try_run_handheld_experiment"><aside class="declaration">proc </aside>try_run_handheld_experiment<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/target, /<a href="mob.html">mob</a>/user, /list/modifiers)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L82"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 82"></a></aside></h3><p>Hooks on attack to try and run an experiment (When using a handheld handler)</p><h3 id="proc/try_run_handheld_experiment_async"><aside class="declaration">proc </aside>try_run_handheld_experiment_async<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/target, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L122"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 122"></a></aside></h3><p>This proc exists because Jared Fogle really likes async</p><h3 id="proc/ui_handle_experiment"><aside class="declaration">proc </aside>ui_handle_experiment<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/user, action)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L205"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 205"></a></aside></h3><p>Hook for handling UI interaction via signals</p><h3 id="proc/unlink_experiment"><aside class="declaration">proc </aside>unlink_experiment<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L270"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 270"></a></aside></h3><p>Unlinks this handler from the selected experiment</p><h3 id="proc/unlink_techweb"><aside class="declaration">proc </aside>unlink_techweb<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/experisci/experiment/handlers/experiment_handler.dm#L250"><img src="git.png" width="16" height="16" title="code/modules/experisci/experiment/handlers/experiment_handler.dm 250"></a></aside></h3><p>Unlinks this handler from the selected techweb</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>