<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/component/anti_magic - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/component/anti_magic.html#var">Var Details</a> - <a href="datum/component/anti_magic.html#proc">Proc Details</a></header><main><h1>anti_magic <aside>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/anti_magic.html">anti_magic</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L2"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 2"></a></h1><p>This provides different types of magic resistance on an object</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/component/anti_magic.html#var/alert_caster_on_equip">alert_caster_on_equip</a></th><td>Whether we should, on equipping, alert the caster that this item can block any of their spells
This changes between true and false on equip and drop, don't set it outright to something</td></tr><tr><th><a href="datum/component/anti_magic.html#var/antimagic_flags">antimagic_flags</a></th><td>A bitflag with the types of magic resistance on the object</td></tr><tr><th><a href="datum/component/anti_magic.html#var/block_magic">block_magic</a></th><td>The callback invoked when we block magic</td></tr><tr><th><a href="datum/component/anti_magic.html#var/charges">charges</a></th><td>The amount of times the object can protect the user from magic
Set to INFINITY to have, well, infinite charges.</td></tr><tr><th><a href="datum/component/anti_magic.html#var/check_blocking">check_blocking</a></th><td>Callback to invoke to see if we can block magic</td></tr><tr><th><a href="datum/component/anti_magic.html#var/expiration">expiration</a></th><td>The callback invoked when twe have been depleted of all charges</td></tr><tr><th><a href="datum/component/anti_magic.html#var/inventory_flags">inventory_flags</a></th><td>The inventory slot the object must be located at in order to activate</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/component/anti_magic.html#proc/Initialize">Initialize</a></th><td>Adds magic resistances to an object</td></tr><tr><th><a href="datum/component/anti_magic.html#proc/restrict_casting_magic">restrict_casting_magic</a></th><td>cannot cast magic with the same type of antimagic present</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/alert_caster_on_equip"><aside class="declaration">var </aside>alert_caster_on_equip <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 18"></a></h3><p>Whether we should, on equipping, alert the caster that this item can block any of their spells
This changes between true and false on equip and drop, don't set it outright to something</p><h3 id="var/antimagic_flags"><aside class="declaration">var </aside>antimagic_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L4"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 4"></a></h3><p>A bitflag with the types of magic resistance on the object</p><h3 id="var/block_magic"><aside class="declaration">var </aside>block_magic <aside>– /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L11"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 11"></a></h3><p>The callback invoked when we block magic</p><h3 id="var/charges"><aside class="declaration">var </aside>charges <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L7"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 7"></a></h3><p>The amount of times the object can protect the user from magic
Set to INFINITY to have, well, infinite charges.</p><h3 id="var/check_blocking"><aside class="declaration">var </aside>check_blocking <aside>– /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L15"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 15"></a></h3><p>Callback to invoke to see if we can block magic</p><h3 id="var/expiration"><aside class="declaration">var </aside>expiration <aside>– /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L13"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 13"></a></h3><p>The callback invoked when twe have been depleted of all charges</p><h3 id="var/inventory_flags"><aside class="declaration">var </aside>inventory_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L9"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 9"></a></h3><p>The inventory slot the object must be located at in order to activate</p><h2 id="proc">Proc Details</h2><h3 id="proc/Initialize"><aside class="parent"><a title="/datum/component" href="datum/component.html#proc/Initialize">↑</a></aside>Initialize<aside>(antimagic_flags, charges, inventory_flags, /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a>/block_magic, /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a>/expiration, /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a>/check_blocking)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L39"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 39"></a></aside></h3><p>Adds magic resistances to an object</p>
<p>Magic resistance will prevent magic from affecting the user if it has the correct resistance
against the type of magic being used</p>
<p>args:</p>
<ul>
<li>antimagic_flags (optional) A bitflag with the types of magic resistance on the object</li>
<li>charges (optional) The amount of times the object can protect the user from magic</li>
<li>inventory_flags (optional) The inventory slot the object must be located at in order to activate</li>
<li>block_magic (optional) The proc that is triggered when an object blocks magic</li>
<li>expiration (optional) The proc that is triggered when the object is depleted of charges</li>
<li>check_blocking (optional) The proc that is triggered to check if we can block magic</li>
</ul>
<p>antimagic bitflags: (see code/__DEFINES/magic.dm)</p>
<ul>
<li>MAGIC_RESISTANCE - Default magic resistance that blocks normal magic (wizard, spells, staffs)</li>
<li>MAGIC_RESISTANCE_MIND - Tinfoil hat magic resistance that blocks mental magic (telepathy, abductors, jelly people)</li>
<li>MAGIC_RESISTANCE_HOLY - Holy magic resistance that blocks unholy magic (revenant, cult, vampire, voice of god)</li>
</ul><h3 id="proc/restrict_casting_magic"><aside class="declaration">proc </aside>restrict_casting_magic<aside>(/<a href="mob.html">mob</a>/user, magic_flags)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/components/anti_magic.dm#L170"><img src="git.png" width="16" height="16" title="code/datums/components/anti_magic.dm 170"></a></aside></h3><p>cannot cast magic with the same type of antimagic present</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>