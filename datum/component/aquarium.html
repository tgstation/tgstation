<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/component/aquarium - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/component/aquarium.html#var">Var Details</a> - <a href="datum/component/aquarium.html#proc">Proc Details</a></header><main><h1>aquarium <aside>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/aquarium.html">aquarium</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L9"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 9"></a></h1><p>The component that manages the aquariums UI, fluid, temperature, the current fish inside the parent object, as well as beauty,
and a few other common aquarium features.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/component/aquarium.html#var/aquarium_modes">aquarium_modes</a></th><td>static list of available aquarium modes</td></tr><tr><th><a href="datum/component/aquarium.html#var/aquarium_zone_max_pw">aquarium_zone_max_pw</a></th><td>The maximum pixel x of the area where vis overlays should be displayed</td></tr><tr><th><a href="datum/component/aquarium.html#var/aquarium_zone_max_pz">aquarium_zone_max_pz</a></th><td>The maximum pixel y of the area where vis overlays should be displayed</td></tr><tr><th><a href="datum/component/aquarium.html#var/aquarium_zone_min_pw">aquarium_zone_min_pw</a></th><td>The minimum pixel x of the area where vis overlays should be displayed</td></tr><tr><th><a href="datum/component/aquarium.html#var/aquarium_zone_min_pz">aquarium_zone_min_pz</a></th><td>The minimum pixel y of the area where vis overlays should be displayed</td></tr><tr><th><a href="datum/component/aquarium.html#var/beauty_by_content">beauty_by_content</a></th><td>A lazy list of key instances and assoc vals representing how much beauty they contribute to the aquarium</td></tr><tr><th><a href="datum/component/aquarium.html#var/current_mode">current_mode</a></th><td>The current aquarium mode, one of either AQUARIUM_MODE_MANUAL, AQUARIUM_MODE_AUTO or AQUARIUM_MODE_SAFE.</td></tr><tr><th><a href="datum/component/aquarium.html#var/default_beauty">default_beauty</a></th><td>The default beauty of the aquarium when empty.</td></tr><tr><th><a href="datum/component/aquarium.html#var/feeding_interval">feeding_interval</a></th><td>While the feed (reagent) storage is not empty, this is the interval which the fish are fed.</td></tr><tr><th><a href="datum/component/aquarium.html#var/fluid_temp">fluid_temp</a></th><td>The current temperature of the fluid of the aquarium</td></tr><tr><th><a href="datum/component/aquarium.html#var/fluid_type">fluid_type</a></th><td>The current type of fluid of the aquarium</td></tr><tr><th><a href="datum/component/aquarium.html#var/fluid_types">fluid_types</a></th><td>static list of available fluid types.</td></tr><tr><th><a href="datum/component/aquarium.html#var/last_feeding">last_feeding</a></th><td>The last time fishes were fed by the acquarium itsef.</td></tr><tr><th><a href="datum/component/aquarium.html#var/max_fluid_temp">max_fluid_temp</a></th><td>The maximum fluid temperature that can be reached by this aquarium</td></tr><tr><th><a href="datum/component/aquarium.html#var/min_fluid_temp">min_fluid_temp</a></th><td>The minimum fluid temperature that can be reached by this aquarium</td></tr><tr><th><a href="datum/component/aquarium.html#var/reagents_size">reagents_size</a></th><td>The size of the reagents holder which will store fish feed.</td></tr><tr><th><a href="datum/component/aquarium.html#var/tracked_fish_by_type">tracked_fish_by_type</a></th><td>list of fishes inside the parent object, sorted by type - does not include things with aquarium visuals that are not fish</td></tr><tr><th><a href="datum/component/aquarium.html#var/used_layers">used_layers</a></th><td>A list of layers that are currently being used for the various overlays of the aquarium (from aquarium_content comp)</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/component/aquarium.html#proc/can_insert">can_insert</a></th><td>Check if an item can be inserted into the aquarium</td></tr><tr><th><a href="datum/component/aquarium.html#proc/check_evolution">check_evolution</a></th><td>Check if an offspring of two fish (or one if self-reproducing) can evolve.</td></tr><tr><th><a href="datum/component/aquarium.html#proc/check_fluid_and_temperature">check_fluid_and_temperature</a></th><td>Toggles a couple flags that determine if the fish is in safe waters so that we won't have to use signals or
access this comp in multiple places just to confirm that.</td></tr><tr><th><a href="datum/component/aquarium.html#proc/get_candidates">get_candidates</a></th><td>Return a list of fish which our fishie can reproduce with (including itself if self-reproducing)</td></tr><tr><th><a href="datum/component/aquarium.html#proc/get_content_beauty">get_content_beauty</a></th><td>update the beauty_by_content of a 'beauty_by_content' key and then recalculate the beauty.</td></tr><tr><th><a href="datum/component/aquarium.html#proc/get_optimal_aquarium_settings">get_optimal_aquarium_settings</a></th><td>Called if the mode is AQUARIUM_MODE_AUTO whenever a fish is added, removed, dies or resurrected.</td></tr><tr><th><a href="datum/component/aquarium.html#proc/on_entered">on_entered</a></th><td>Handles aquarium content insertion</td></tr><tr><th><a href="datum/component/aquarium.html#proc/on_exited">on_exited</a></th><td>Handles aquarium content removal.</td></tr><tr><th><a href="datum/component/aquarium.html#proc/on_fish_status_changed">on_fish_status_changed</a></th><td>Fish beauty changes when they're dead, so we need to update the beauty of the aquarium too.</td></tr><tr><th><a href="datum/component/aquarium.html#proc/on_item_interaction">on_item_interaction</a></th><td>This proc handles feeding the aquarium and inserting aquarium content.</td></tr><tr><th><a href="datum/component/aquarium.html#proc/process">process</a></th><td>Feed the fish at defined intervals until the feed storage is empty.</td></tr><tr><th><a href="datum/component/aquarium.html#proc/remove_visual">remove_visual</a></th><td>Remove a visual overlay from an aquarium_content comp</td></tr><tr><th><a href="datum/component/aquarium.html#proc/set_visual">set_visual</a></th><td>set values for a visual overlay for an aquarium_content comp</td></tr><tr><th><a href="datum/component/aquarium.html#proc/start_autofeed">start_autofeed</a></th><td>Called when the feed storage is no longer empty.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/aquarium_modes"><aside class="declaration">var </aside>aquarium_modes <aside>– /static/list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L56"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 56"></a></h3><p>static list of available aquarium modes</p><h3 id="var/aquarium_zone_max_pw"><aside class="declaration">var </aside>aquarium_zone_max_pw <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L32"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 32"></a></h3><p>The maximum pixel x of the area where vis overlays should be displayed</p><h3 id="var/aquarium_zone_max_pz"><aside class="declaration">var </aside>aquarium_zone_max_pz <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L36"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 36"></a></h3><p>The maximum pixel y of the area where vis overlays should be displayed</p><h3 id="var/aquarium_zone_min_pw"><aside class="declaration">var </aside>aquarium_zone_min_pw <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L30"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 30"></a></h3><p>The minimum pixel x of the area where vis overlays should be displayed</p><h3 id="var/aquarium_zone_min_pz"><aside class="declaration">var </aside>aquarium_zone_min_pz <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L34"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 34"></a></h3><p>The minimum pixel y of the area where vis overlays should be displayed</p><h3 id="var/beauty_by_content"><aside class="declaration">var </aside>beauty_by_content <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 21"></a></h3><p>A lazy list of key instances and assoc vals representing how much beauty they contribute to the aquarium</p><h3 id="var/current_mode"><aside class="declaration">var </aside>current_mode <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L66"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 66"></a></h3><p>The current aquarium mode, one of either AQUARIUM_MODE_MANUAL, AQUARIUM_MODE_AUTO or AQUARIUM_MODE_SAFE.</p><h3 id="var/default_beauty"><aside class="declaration">var </aside>default_beauty <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 24"></a></h3><p>The default beauty of the aquarium when empty.</p><h3 id="var/feeding_interval"><aside class="declaration">var </aside>feeding_interval <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L39"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 39"></a></h3><p>While the feed (reagent) storage is not empty, this is the interval which the fish are fed.</p><h3 id="var/fluid_temp"><aside class="declaration">var </aside>fluid_temp <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 18"></a></h3><p>The current temperature of the fluid of the aquarium</p><h3 id="var/fluid_type"><aside class="declaration">var </aside>fluid_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L16"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 16"></a></h3><p>The current type of fluid of the aquarium</p><h3 id="var/fluid_types"><aside class="declaration">var </aside>fluid_types <aside>– /static/list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L49"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 49"></a></h3><p>static list of available fluid types.</p><h3 id="var/last_feeding"><aside class="declaration">var </aside>last_feeding <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L41"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 41"></a></h3><p>The last time fishes were fed by the acquarium itsef.</p><h3 id="var/max_fluid_temp"><aside class="declaration">var </aside>max_fluid_temp <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L46"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 46"></a></h3><p>The maximum fluid temperature that can be reached by this aquarium</p><h3 id="var/min_fluid_temp"><aside class="declaration">var </aside>min_fluid_temp <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L44"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 44"></a></h3><p>The minimum fluid temperature that can be reached by this aquarium</p><h3 id="var/reagents_size"><aside class="declaration">var </aside>reagents_size <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L63"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 63"></a></h3><p>The size of the reagents holder which will store fish feed.</p><h3 id="var/tracked_fish_by_type"><aside class="declaration">var </aside>tracked_fish_by_type <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L13"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 13"></a></h3><p>list of fishes inside the parent object, sorted by type - does not include things with aquarium visuals that are not fish</p><h3 id="var/used_layers"><aside class="declaration">var </aside>used_layers <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L27"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 27"></a></h3><p>A list of layers that are currently being used for the various overlays of the aquarium (from aquarium_content comp)</p><h2 id="proc">Proc Details</h2><h3 id="proc/can_insert"><aside class="declaration">proc </aside>can_insert<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/item, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L310"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 310"></a></aside></h3><p>Check if an item can be inserted into the aquarium</p><h3 id="proc/check_evolution"><aside class="declaration">proc </aside>check_evolution<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/fish.html">fish</a>/fish, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/fish.html">fish</a>/mate, /<a href="datum.html">datum</a>/<a href="datum/fish_evolution.html">fish_evolution</a>/evolution)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L396"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 396"></a></aside></h3><p>Check if an offspring of two fish (or one if self-reproducing) can evolve.</p><h3 id="proc/check_fluid_and_temperature"><aside class="declaration">proc </aside>check_fluid_and_temperature<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/fish.html">fish</a>/fish)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L412"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 412"></a></aside></h3><p>Toggles a couple flags that determine if the fish is in safe waters so that we won't have to use signals or
access this comp in multiple places just to confirm that.</p><h3 id="proc/get_candidates"><aside class="declaration">proc </aside>get_candidates<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/fish.html">fish</a>/fish, /list/candidates)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L380"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 380"></a></aside></h3><p>Return a list of fish which our fishie can reproduce with (including itself if self-reproducing)</p><h3 id="proc/get_content_beauty"><aside class="declaration">proc </aside>get_content_beauty<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/content)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L345"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 345"></a></aside></h3><p>update the beauty_by_content of a 'beauty_by_content' key and then recalculate the beauty.</p><h3 id="proc/get_optimal_aquarium_settings"><aside class="declaration">proc </aside>get_optimal_aquarium_settings<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L502"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 502"></a></aside></h3><p>Called if the mode is AQUARIUM_MODE_AUTO whenever a fish is added, removed, dies or resurrected.</p>
<p>This tries to find what the best combination of fluid and temperature. is to ensure
the survival of the highest number of fishes. It also can and will activate stasis if over half of
the fish population is at risk of dying. It doesn't care if the fish is big or small, useful
or not. All fish are equal before the impartial eye of AQUARIUM_MODE_AUTO.</p><h3 id="proc/on_entered"><aside class="declaration">proc </aside>on_entered<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/entered)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L327"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 327"></a></aside></h3><p>Handles aquarium content insertion</p><h3 id="proc/on_exited"><aside class="declaration">proc </aside>on_exited<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/gone)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L358"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 358"></a></aside></h3><p>Handles aquarium content removal.</p><h3 id="proc/on_fish_status_changed"><aside class="declaration">proc </aside>on_fish_status_changed<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/fish.html">fish</a>/fish)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L423"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 423"></a></aside></h3><p>Fish beauty changes when they're dead, so we need to update the beauty of the aquarium too.</p><h3 id="proc/on_item_interaction"><aside class="declaration">proc </aside>on_item_interaction<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/item, modifiers)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L225"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 225"></a></aside></h3><p>This proc handles feeding the aquarium and inserting aquarium content.</p><h3 id="proc/process"><aside class="parent"><a title="/datum" href="datum.html#proc/process">↑</a></aside>process<aside>(seconds_per_tick)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L265"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 265"></a></aside></h3><p>Feed the fish at defined intervals until the feed storage is empty.</p><h3 id="proc/remove_visual"><aside class="declaration">proc </aside>remove_visual<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="obj.html">obj</a>/<a href="obj/effect/aquarium.html">effect/aquarium</a>/visual)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L444"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 444"></a></aside></h3><p>Remove a visual overlay from an aquarium_content comp</p><h3 id="proc/set_visual"><aside class="declaration">proc </aside>set_visual<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="obj.html">obj</a>/<a href="obj/effect/aquarium.html">effect/aquarium</a>/visual)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L450"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 450"></a></aside></h3><p>set values for a visual overlay for an aquarium_content comp</p><h3 id="proc/start_autofeed"><aside class="declaration">proc </aside>start_autofeed<aside>(/<a href="datum.html">datum</a>/<a href="datum/reagents.html">reagents</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/aquarium.dm#L259"><img src="git.png" width="16" height="16" title="code/datums/components/aquarium.dm 259"></a></aside></h3><p>Called when the feed storage is no longer empty.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>