<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/component/lock_on_cursor - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/component/lock_on_cursor.html#var">Var Details</a> - <a href="datum/component/lock_on_cursor.html#proc">Proc Details</a></header><main><h1>lock_on_cursor <aside>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/lock_on_cursor.html">lock_on_cursor</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L9"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 9"></a></h1><h3 id="lock-on-cursor-component">Lock on Cursor component</h3>
<p>Finds the nearest targets to your cursor and passes them into a callback, also drawing an icon on top of them.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/can_target_callback">can_target_callback</a></th><td>Callback to call in order to validate a potential target</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/current_ranging_id">current_ranging_id</a></th><td>Ranging ID for some kind of tick check safety calculation</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/immune_weakrefs">immune_weakrefs</a></th><td>Cache of weakrefs to ignore targeting formatted as <code>list(weakref = TRUE)</code></td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/lock_amount">lock_amount</a></th><td>Number of things we can target at once</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/lock_appearance">lock_appearance</a></th><td>Appearance to overlay onto whatever we are targeting</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/lock_cursor_range">lock_cursor_range</a></th><td>Range to search for targets from the cursor position</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/lock_images">lock_images</a></th><td>Current images we are displaying to the client</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/locked_weakrefs">locked_weakrefs</a></th><td>Weakrefs to current locked targets</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/mouse_tracker">mouse_tracker</a></th><td>Full screen overlay which is used to track mouse position</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/on_lock">on_lock</a></th><td>Callback to call when we have decided on our targets, is passed the list of final targets</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#var/target_typecache">target_typecache</a></th><td>Typecache of things we are allowed to target</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/component/lock_on_cursor.html#proc/can_target">can_target</a></th><td>Returns true if target is a valid target</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#proc/clear_invalid_targets">clear_invalid_targets</a></th><td>Removes targets which are out of range or don't exist any more</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#proc/clear_visuals">clear_visuals</a></th><td>Removes target overlays</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#proc/find_targets">find_targets</a></th><td>Replace our targets with new ones</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#proc/get_nearest">get_nearest</a></th><td>Returns the nearest targets to the current cursor position</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#proc/refresh_visuals">refresh_visuals</a></th><td>Reset the overlays on all targets</td></tr><tr><th><a href="datum/component/lock_on_cursor.html#proc/show_visuals">show_visuals</a></th><td>Adds overlays to all targets</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/can_target_callback"><aside class="declaration">var </aside>can_target_callback <aside>– /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L28"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 28"></a></h3><p>Callback to call in order to validate a potential target</p><h3 id="var/current_ranging_id"><aside class="declaration">var </aside>current_ranging_id <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L32"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 32"></a></h3><p>Ranging ID for some kind of tick check safety calculation</p><h3 id="var/immune_weakrefs"><aside class="declaration">var </aside>immune_weakrefs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 18"></a></h3><p>Cache of weakrefs to ignore targeting formatted as <code>list(weakref = TRUE)</code></p><h3 id="var/lock_amount"><aside class="declaration">var </aside>lock_amount <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 20"></a></h3><p>Number of things we can target at once</p><h3 id="var/lock_appearance"><aside class="declaration">var </aside>lock_appearance <aside>– /mutable_appearance</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L12"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 12"></a></h3><p>Appearance to overlay onto whatever we are targeting</p><h3 id="var/lock_cursor_range"><aside class="declaration">var </aside>lock_cursor_range <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 22"></a></h3><p>Range to search for targets from the cursor position</p><h3 id="var/lock_images"><aside class="declaration">var </aside>lock_images <aside>– /list/<a href="image.html">image</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L14"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 14"></a></h3><p>Current images we are displaying to the client</p><h3 id="var/locked_weakrefs"><aside class="declaration">var </aside>locked_weakrefs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 24"></a></h3><p>Weakrefs to current locked targets</p><h3 id="var/mouse_tracker"><aside class="declaration">var </aside>mouse_tracker <aside>– /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/screen.html">screen</a>/<a href="atom/movable/screen/fullscreen/cursor_catcher.html">fullscreen/cursor_catcher</a>/lock_on</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L30"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 30"></a></h3><p>Full screen overlay which is used to track mouse position</p><h3 id="var/on_lock"><aside class="declaration">var </aside>on_lock <aside>– /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L26"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 26"></a></h3><p>Callback to call when we have decided on our targets, is passed the list of final targets</p><h3 id="var/target_typecache"><aside class="declaration">var </aside>target_typecache <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L16"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 16"></a></h3><p>Typecache of things we are allowed to target</p><h2 id="proc">Proc Details</h2><h3 id="proc/can_target"><aside class="declaration">proc </aside>can_target<aside>(/<a href="atom.html">atom</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L141"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 141"></a></aside></h3><p>Returns true if target is a valid target</p><h3 id="proc/clear_invalid_targets"><aside class="declaration">proc </aside>clear_invalid_targets<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L117"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 117"></a></aside></h3><p>Removes targets which are out of range or don't exist any more</p><h3 id="proc/clear_visuals"><aside class="declaration">proc </aside>clear_visuals<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L92"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 92"></a></aside></h3><p>Removes target overlays</p><h3 id="proc/find_targets"><aside class="declaration">proc </aside>find_targets<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L125"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 125"></a></aside></h3><p>Replace our targets with new ones</p><h3 id="proc/get_nearest"><aside class="declaration">proc </aside>get_nearest<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L146"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 146"></a></aside></h3><p>Returns the nearest targets to the current cursor position</p><h3 id="proc/refresh_visuals"><aside class="declaration">proc </aside>refresh_visuals<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L103"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 103"></a></aside></h3><p>Reset the overlays on all targets</p><h3 id="proc/show_visuals"><aside class="declaration">proc </aside>show_visuals<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/lock_on_cursor.dm#L76"><img src="git.png" width="16" height="16" title="code/datums/components/lock_on_cursor.dm 76"></a></aside></h3><p>Adds overlays to all targets</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>