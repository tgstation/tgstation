<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/component/jousting - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/component/jousting.html#var">Var Details</a> - <a href="datum/component/jousting.html#proc">Proc Details</a></header><main><h1>jousting <aside>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/jousting.html">jousting</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L10"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 10"></a></h1><p>##jousting</p>
<p>Given to items, it allows you to charge into people with additional damage and potential knockdown
by being buckled onto something. If the other person is also jousting, can knock eachother down.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/component/jousting.html#var/current_direction">current_direction</a></th><td>The current direction of the jousting.</td></tr><tr><th><a href="datum/component/jousting.html#var/current_holder">current_holder</a></th><td>The current person holding parent.</td></tr><tr><th><a href="datum/component/jousting.html#var/current_tile_charge">current_tile_charge</a></th><td>How many tiles we've charged up thus far</td></tr><tr><th><a href="datum/component/jousting.html#var/damage_boost_per_tile">damage_boost_per_tile</a></th><td>How much of an increase in damage is achieved every tile moved during jousting.</td></tr><tr><th><a href="datum/component/jousting.html#var/knockdown_chance_per_tile">knockdown_chance_per_tile</a></th><td>The boosted chances of a knockdown occuring while jousting.</td></tr><tr><th><a href="datum/component/jousting.html#var/knockdown_time">knockdown_time</a></th><td>How much of an increase in knockdown is achieved every tile moved during jousting, if it knocks down.</td></tr><tr><th><a href="datum/component/jousting.html#var/max_tile_charge">max_tile_charge</a></th><td>The max amount of tiles before you can joust someone.</td></tr><tr><th><a href="datum/component/jousting.html#var/min_tile_charge">min_tile_charge</a></th><td>The min amount of tiles before you can joust someone.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/component/jousting.html#proc/mob_move">mob_move</a></th><td>Called when a mob moves.
Handles checking their direction, changing it if they turned,
and increments how many tiles they've been charging for.
Lastly, refreshes their charge reset timer, giving them a new one instead.</td></tr><tr><th><a href="datum/component/jousting.html#proc/on_equip">on_equip</a></th><td>Called when a mob equips the spear, registers them as the holder and checks their signals for moving.</td></tr><tr><th><a href="datum/component/jousting.html#proc/on_successful_attack">on_successful_attack</a></th><td>Performs the actual attack, handling damage/knockdown depending on how far you've jousted.
We deduct the minimum tile charge from the current tile charge to get what will actually be buffed
So your charge will only get benefits from each extra tile after the minimum (and before the maximum).</td></tr><tr><th><a href="datum/component/jousting.html#proc/reset_charge">reset_charge</a></th><td>reset charge</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/current_direction"><aside class="declaration">var </aside>current_direction <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L14"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 14"></a></h3><p>The current direction of the jousting.</p><h3 id="var/current_holder"><aside class="declaration">var </aside>current_holder <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L12"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 12"></a></h3><p>The current person holding parent.</p><h3 id="var/current_tile_charge"><aside class="declaration">var </aside>current_tile_charge <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L16"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 16"></a></h3><p>How many tiles we've charged up thus far</p><h3 id="var/damage_boost_per_tile"><aside class="declaration">var </aside>damage_boost_per_tile <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L19"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 19"></a></h3><p>How much of an increase in damage is achieved every tile moved during jousting.</p><h3 id="var/knockdown_chance_per_tile"><aside class="declaration">var </aside>knockdown_chance_per_tile <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 21"></a></h3><p>The boosted chances of a knockdown occuring while jousting.</p><h3 id="var/knockdown_time"><aside class="declaration">var </aside>knockdown_time <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L23"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 23"></a></h3><p>How much of an increase in knockdown is achieved every tile moved during jousting, if it knocks down.</p><h3 id="var/max_tile_charge"><aside class="declaration">var </aside>max_tile_charge <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L25"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 25"></a></h3><p>The max amount of tiles before you can joust someone.</p><h3 id="var/min_tile_charge"><aside class="declaration">var </aside>min_tile_charge <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L27"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 27"></a></h3><p>The min amount of tiles before you can joust someone.</p><h2 id="proc">Proc Details</h2><h3 id="proc/mob_move"><aside class="declaration">proc </aside>mob_move<aside>(/<a href="datum.html">datum</a>/source, newloc, dir)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L124"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 124"></a></aside></h3><p>Called when a mob moves.
Handles checking their direction, changing it if they turned,
and increments how many tiles they've been charging for.
Lastly, refreshes their charge reset timer, giving them a new one instead.</p><h3 id="proc/on_equip"><aside class="declaration">proc </aside>on_equip<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/user, slot)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L75"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 75"></a></aside></h3><p>Called when a mob equips the spear, registers them as the holder and checks their signals for moving.</p><h3 id="proc/on_successful_attack"><aside class="declaration">proc </aside>on_successful_attack<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/target, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L97"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 97"></a></aside></h3><p>Performs the actual attack, handling damage/knockdown depending on how far you've jousted.
We deduct the minimum tile charge from the current tile charge to get what will actually be buffed
So your charge will only get benefits from each extra tile after the minimum (and before the maximum).</p><h3 id="proc/reset_charge"><aside class="declaration">proc </aside>reset_charge<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/components/jousting.dm#L145"><img src="git.png" width="16" height="16" title="code/datums/components/jousting.dm 145"></a></aside></h3><p>reset charge</p>
<p>Resets their direction and tile charge back to their initial values.
This is used when someone is no longer jousting and it should cleanup.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>