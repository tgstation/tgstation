<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/memory - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/memory.html#var">Var Details</a> - <a href="datum/memory.html#proc">Proc Details</a></header><main><h1>memory <aside>/<a href="datum.html">datum</a>/<a href="datum/memory.html">memory</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L12"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 12"></a></h1><p>Little tidbits of past events generated by the player doing things.</p>
<p>Can be used in engravings, dreams, and changeling succs.</p>
<p>All of those things are supposed to be taken vaguely -
Engravings crossround and should not include names, dreams and succs are memory goop.
As such, the generated text of the memory is vague.</p>
<p>Don't hold any references in this, it's not necessary.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/memory.html#var/antagonist_name">antagonist_name</a></th><td>The main villain of the memory.</td></tr><tr><th><a href="datum/memory.html#var/deuteragonist_name">deuteragonist_name</a></th><td>The side character of the memory.</td></tr><tr><th><a href="datum/memory.html#var/memorizer">memorizer</a></th><td>Job of the person memorizing the event</td></tr><tr><th><a href="datum/memory.html#var/memorizer_mind">memorizer_mind</a></th><td>Mind of who is memorizing the event</td></tr><tr><th><a href="datum/memory.html#var/memory_flags">memory_flags</a></th><td>Flags of any special behavior for the memory</td></tr><tr><th><a href="datum/memory.html#var/mood_verb">mood_verb</a></th><td>If this memory changes based on mood, this is the verb it uses.</td></tr><tr><th><a href="datum/memory.html#var/name">name</a></th><td>The name of the MEMORY that the user sees.
Something like &quot;The time the Clown did a sweet flip&quot;.</td></tr><tr><th><a href="datum/memory.html#var/protagonist_name">protagonist_name</a></th><td>The main character of the memory.</td></tr><tr><th><a href="datum/memory.html#var/story_value">story_value</a></th><td>The value of the mood in it's worth as a story.
Defines how beautiful art from it can be, and whether or not it stays in persistence.</td></tr><tr><th><a href="datum/memory.html#var/where">where</a></th><td>Where this memory took place.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/memory.html#proc/build_story_character">build_story_character</a></th><td>When passed a &quot;character&quot;, returns the name of the character formatted for stories</td></tr><tr><th><a href="datum/memory.html#proc/generate_memory_name">generate_memory_name</a></th><td>Generates a name for the memory.</td></tr><tr><th><a href="datum/memory.html#proc/generate_story">generate_story</a></th><td>Generates a story based on this memory.</td></tr><tr><th><a href="datum/memory.html#proc/get_happy_moods">get_happy_moods</a></th><td>Used to select a mood verb if the protagonist is happy for memories that do not have <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOMOOD" title="MEMORY_FLAG_NOMOOD">MEMORY_FLAG_NOMOOD</a> set.</td></tr><tr><th><a href="datum/memory.html#proc/get_locations">get_locations</a></th><td>Returns a list of locations for use in stories which do not have <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOLOCATION" title="MEMORY_FLAG_NOLOCATION">MEMORY_FLAG_NOLOCATION</a> set.</td></tr><tr><th><a href="datum/memory.html#proc/get_moods">get_moods</a></th><td>Returns a list of mood phrases for the memory.</td></tr><tr><th><a href="datum/memory.html#proc/get_names">get_names</a></th><td>Returns a list of names for [proc/select_mood_verb] to select from.</td></tr><tr><th><a href="datum/memory.html#proc/get_neutral_moods">get_neutral_moods</a></th><td>Used to select a mood verb if the protagonist is neither happy or sad for memories that do not have <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOMOOD" title="MEMORY_FLAG_NOMOOD">MEMORY_FLAG_NOMOOD</a> set.</td></tr><tr><th><a href="datum/memory.html#proc/get_sad_moods">get_sad_moods</a></th><td>Used to select a mood verb if the protagonist is sad for memories that do not have <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOMOOD" title="MEMORY_FLAG_NOMOOD">MEMORY_FLAG_NOMOOD</a> set.</td></tr><tr><th><a href="datum/memory.html#proc/get_starts">get_starts</a></th><td>Returns a list of story starts for the memory.</td></tr><tr><th><a href="datum/memory.html#proc/quick_copy_memory">quick_copy_memory</a></th><td>Creates a &quot;quick copy&quot; of the memory for another mind,
copying just basic memory information (name, major charactecrs) over.</td></tr><tr><th><a href="datum/memory.html#proc/select_mood_verb">select_mood_verb</a></th><td>Selects a mood related verb for the memory.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/antagonist_name"><aside class="declaration">var </aside>antagonist_name <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L38"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 38"></a></h3><p>The main villain of the memory.</p><h3 id="var/deuteragonist_name"><aside class="declaration">var </aside>deuteragonist_name <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L36"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 36"></a></h3><p>The side character of the memory.</p><h3 id="var/memorizer"><aside class="declaration">var </aside>memorizer <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L17"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 17"></a></h3><p>Job of the person memorizing the event</p><h3 id="var/memorizer_mind"><aside class="declaration">var </aside>memorizer_mind <aside>– /<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L19"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 19"></a></h3><p>Mind of who is memorizing the event</p><h3 id="var/memory_flags"><aside class="declaration">var </aside>memory_flags <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 24"></a></h3><p>Flags of any special behavior for the memory</p><h3 id="var/mood_verb"><aside class="declaration">var </aside>mood_verb <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L26"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 26"></a></h3><p>If this memory changes based on mood, this is the verb it uses.</p><h3 id="var/name"><aside class="declaration">var </aside>name <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L15"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 15"></a></h3><p>The name of the MEMORY that the user sees.
Something like &quot;The time the Clown did a sweet flip&quot;.</p><h3 id="var/protagonist_name"><aside class="declaration">var </aside>protagonist_name <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L34"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 34"></a></h3><p>The main character of the memory.</p><h3 id="var/story_value"><aside class="declaration">var </aside>story_value <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 22"></a></h3><p>The value of the mood in it's worth as a story.
Defines how beautiful art from it can be, and whether or not it stays in persistence.</p><h3 id="var/where"><aside class="declaration">var </aside>where <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L40"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 40"></a></h3><p>Where this memory took place.</p><h2 id="proc">Proc Details</h2><h3 id="proc/build_story_character"><aside class="declaration">proc </aside>build_story_character<aside>(character)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L378"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 378"></a></aside></h3><p>When passed a &quot;character&quot;, returns the name of the character formatted for stories</p>
<p>If character is a string, it will just return it back.</p>
<p>Otherwise, it will try to generate a title based on the mob's assigned role.</p>
<p>If the character has no mind or no assigned role, it'll just return their name.</p><h3 id="proc/generate_memory_name"><aside class="declaration">proc </aside>generate_memory_name<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L97"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 97"></a></aside></h3><p>Generates a name for the memory.</p><h3 id="proc/generate_story"><aside class="declaration">proc </aside>generate_story<aside>(story_type, story_flags)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L242"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 242"></a></aside></h3><p>Generates a story based on this memory.</p>
<p>Arguments</p>
<ul>
<li>story_type - for used in grabbing phrases from memories.json involving specific types of stories.</li>
<li>story_flags - any additional flags involving the story</li>
</ul><h3 id="proc/get_happy_moods"><aside class="declaration">proc </aside>get_happy_moods<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L184"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 184"></a></aside></h3><p>Used to select a mood verb if the protagonist is happy for memories that do not have <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOMOOD" title="MEMORY_FLAG_NOMOOD">MEMORY_FLAG_NOMOOD</a> set.</p><h3 id="proc/get_locations"><aside class="declaration">proc </aside>get_locations<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L229"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 229"></a></aside></h3><p>Returns a list of locations for use in stories which do not have <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOLOCATION" title="MEMORY_FLAG_NOLOCATION">MEMORY_FLAG_NOLOCATION</a> set.</p><h3 id="proc/get_moods"><aside class="declaration">proc </aside>get_moods<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L176"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 176"></a></aside></h3><p>Returns a list of mood phrases for the memory.</p>
<p>Mood phrases are necessary if <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOMOOD" title="MEMORY_FLAG_NOMOOD">MEMORY_FLAG_NOMOOD</a> is not set. They are used in making stories out of memories.
These are phrases that change in their verbage depending on the mood of the PROTAGONIST at the time of the memory.</p>
<p>For example: &quot;The clown grins (this is the mood verb) at the audience.&quot;.
You can use any information tidbits in your names to fill them out.
Mood phrases should be punctated, as they are their own independent clause.
Mood phrases should always include the [mood_verb] var, as well.</p><h3 id="proc/get_names"><aside class="declaration">proc </aside>get_names<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L145"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 145"></a></aside></h3><p>Returns a list of names for [proc/select_mood_verb] to select from.</p>
<p>This is necessary to implement. Names should be at-a-glance summaries of what the memory entails.</p>
<p>For example: &quot;The time the Clown did a sweet flip.&quot;.
You can use any information tidbits in your names to fill them out.
Your names should be puncuated.</p><h3 id="proc/get_neutral_moods"><aside class="declaration">proc </aside>get_neutral_moods<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L199"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 199"></a></aside></h3><p>Used to select a mood verb if the protagonist is neither happy or sad for memories that do not have <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOMOOD" title="MEMORY_FLAG_NOMOOD">MEMORY_FLAG_NOMOOD</a> set.</p><h3 id="proc/get_sad_moods"><aside class="declaration">proc </aside>get_sad_moods<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L215"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 215"></a></aside></h3><p>Used to select a mood verb if the protagonist is sad for memories that do not have <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOMOOD" title="MEMORY_FLAG_NOMOOD">MEMORY_FLAG_NOMOOD</a> set.</p><h3 id="proc/get_starts"><aside class="declaration">proc </aside>get_starts<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L160"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 160"></a></aside></h3><p>Returns a list of story starts for the memory.</p>
<p>Starts are necessary if [MEMORY_FLAG_NOSTORY] is not set. They are used in generating stories out of memories.</p>
<p>For example: &quot;The Clown cracks his hands and honks his horn as he prepares to do a backflip&quot;.
You can use any information tidbits in your names to fill them out.
If the memory is not <a href="code/__DEFINES/memory_defines.html#define/MEMORY_FLAG_NOMOOD" title="MEMORY_FLAG_NOMOOD">MEMORY_FLAG_NOMOOD</a>, your starts should NOT be puncuated, as a mood phrase will follow.
They should also be in the present tense.</p><h3 id="proc/quick_copy_memory"><aside class="declaration">proc </aside>quick_copy_memory<aside>(/<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a>/new_memorizer)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L407"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 407"></a></aside></h3><p>Creates a &quot;quick copy&quot; of the memory for another mind,
copying just basic memory information (name, major charactecrs) over.</p>
<p>The copied memory cannot be used for stories or anything.
They should generally only be used to give a new mind an idea of another mind's memories.</p><h3 id="proc/select_mood_verb"><aside class="declaration">proc </aside>select_mood_verb<aside>(story_mood)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/datums/memory/_memory.dm#L114"><img src="git.png" width="16" height="16" title="code/datums/memory/_memory.dm 114"></a></aside></h3><p>Selects a mood related verb for the memory.</p>
<p>Arguments</p>
<ul>
<li>story_mood - What mood level should we use to select a verb from?</li>
</ul></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>