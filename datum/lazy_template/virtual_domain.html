<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/lazy_template/virtual_domain - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/lazy_template/virtual_domain.html#var">Var Details</a> - <a href="datum/lazy_template/virtual_domain.html#proc">Proc Details</a></header><main><h1>Virtual Domains <aside>/<a href="datum.html">datum</a>/<a href="datum/lazy_template.html">lazy_template</a>/<a href="datum/lazy_template/virtual_domain.html">virtual_domain</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 5"></a></h1><p>Create your own: Read the readme file in the '_maps/virtual_domains' folder.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/announce_to_ghosts">announce_to_ghosts</a></th><td>Whether to tell observers this map is being used</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/chosen_ghosts">chosen_ghosts</a></th><td>Ghosts that will be spawned as, presumably, an antagonist in the map.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/completion_loot">completion_loot</a></th><td>Loot
An assoc list of typepath/amount to spawn on completion. Not weighted - the value is the amount</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/cost">cost</a></th><td>Generic settings / UI
Cost of this map to load</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/custom_spawns">custom_spawns</a></th><td>Spawning
Looks for random landmarks to spawn on.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/desc">desc</a></th><td>The description of the map for the console UI</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/difficulty">difficulty</a></th><td>Affects the ui and ability to scan info.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/disk_reward_spawned">disk_reward_spawned</a></th><td>Has this domain been beaten with high enough score to spawn a tech disk?</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/domain_flags">domain_flags</a></th><td>Any additional flags for this domain</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/filename">filename</a></th><td>The map file to load</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/forced_outfit">forced_outfit</a></th><td>Player customization
Any outfit that you wish to force on avatars. Overrides preferences</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/ghost_mobs">ghost_mobs</a></th><td>Current domain mobs being held by ghosts</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/ghost_spawners">ghost_spawners</a></th><td>List of spawners used for candidates.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/help_text">help_text</a></th><td>Write these to help complete puzzles and other objectives. Viewed in the domain info ability.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/is_modular">is_modular</a></th><td>Modularity
Whether to display this as a modular map</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/keep_custom_spawns">keep_custom_spawns</a></th><td>Set TRUE if you want reusable custom spawners</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/mission_max_candidates">mission_max_candidates</a></th><td>Maximum amount possible of above.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/mission_min_candidates">mission_min_candidates</a></th><td>The domain must have this many ghost candidates willing to join as entities, or else it will not load.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/mob_modules">mob_modules</a></th><td>Byond will look for modular mob segment landmarks then choose from here at random. You can make them unique also.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/modular_unique_mobs">modular_unique_mobs</a></th><td>Forces all mob modules to only load once</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/reward_points">reward_points</a></th><td>Points to reward for completion. Used to purchase new domains and calculate ore rewards.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/secondary_loot">secondary_loot</a></th><td>An assoc list of typepath/amount to spawn from secondary objectives. Not weighted - the value is the total number of items that can be obtained.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/secondary_loot_generated">secondary_loot_generated</a></th><td>Number of secondary loot boxes generated. Resets when the domain is reloaded.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/spawner_role">spawner_role</a></th><td>The role that ghosts will get. Only used for poll text.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#var/start_time">start_time</a></th><td>The start time of the map. Used to calculate time taken</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#proc/add_points">add_points</a></th><td>Sends a point to any loot signals on the map</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#proc/load_advanced_npcs">load_advanced_npcs</a></th><td>Loads the ghost candidates.</td></tr><tr><th><a href="datum/lazy_template/virtual_domain.html#proc/setup_domain">setup_domain</a></th><td>Overridable proc to be called after the map is loaded.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/announce_to_ghosts"><aside class="declaration">var </aside>announce_to_ghosts <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 11"></a></h3><p>Whether to tell observers this map is being used</p><h3 id="var/chosen_ghosts"><aside class="declaration">var </aside>chosen_ghosts <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L80"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 80"></a></h3><p>Ghosts that will be spawned as, presumably, an antagonist in the map.</p><h3 id="var/completion_loot"><aside class="declaration">var </aside>completion_loot <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L48"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 48"></a></h3><p>Loot
An assoc list of typepath/amount to spawn on completion. Not weighted - the value is the amount</p><h3 id="var/cost"><aside class="declaration">var </aside>cost <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 22"></a></h3><p>Generic settings / UI
Cost of this map to load</p><h3 id="var/custom_spawns"><aside class="declaration">var </aside>custom_spawns <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L72"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 72"></a></h3><p>Spawning
Looks for random landmarks to spawn on.</p><h3 id="var/desc"><aside class="declaration">var </aside>desc <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L24"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 24"></a></h3><p>The description of the map for the console UI</p><h3 id="var/difficulty"><aside class="declaration">var </aside>difficulty <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L26"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 26"></a></h3><p>Affects the ui and ability to scan info.</p><h3 id="var/disk_reward_spawned"><aside class="declaration">var </aside>disk_reward_spawned <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L54"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 54"></a></h3><p>Has this domain been beaten with high enough score to spawn a tech disk?</p><h3 id="var/domain_flags"><aside class="declaration">var </aside>domain_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L34"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 34"></a></h3><p>Any additional flags for this domain</p><h3 id="var/filename"><aside class="declaration">var </aside>filename <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 13"></a></h3><p>The map file to load</p><h3 id="var/forced_outfit"><aside class="declaration">var </aside>forced_outfit <aside>– /<a href="datum.html">datum</a>/<a href="datum/outfit.html">outfit</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 41"></a></h3><p>Player customization
Any outfit that you wish to force on avatars. Overrides preferences</p><h3 id="var/ghost_mobs"><aside class="declaration">var </aside>ghost_mobs <aside>– /list/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L84"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 84"></a></h3><p>Current domain mobs being held by ghosts</p><h3 id="var/ghost_spawners"><aside class="declaration">var </aside>ghost_spawners <aside>– /list/<a href="obj.html">obj</a>/<a href="obj/effect/mob_spawn.html">effect/mob_spawn</a>/<a href="obj/effect/mob_spawn/ghost_role.html">ghost_role</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L82"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 82"></a></h3><p>List of spawners used for candidates.</p><h3 id="var/help_text"><aside class="declaration">var </aside>help_text <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L28"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 28"></a></h3><p>Write these to help complete puzzles and other objectives. Viewed in the domain info ability.</p><h3 id="var/is_modular"><aside class="declaration">var </aside>is_modular <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L61"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 61"></a></h3><p>Modularity
Whether to display this as a modular map</p><h3 id="var/keep_custom_spawns"><aside class="declaration">var </aside>keep_custom_spawns <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L74"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 74"></a></h3><p>Set TRUE if you want reusable custom spawners</p><h3 id="var/mission_max_candidates"><aside class="declaration">var </aside>mission_max_candidates <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L78"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 78"></a></h3><p>Maximum amount possible of above.</p><h3 id="var/mission_min_candidates"><aside class="declaration">var </aside>mission_min_candidates <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L76"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 76"></a></h3><p>The domain must have this many ghost candidates willing to join as entities, or else it will not load.</p><h3 id="var/mob_modules"><aside class="declaration">var </aside>mob_modules <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/modular_mob_segment.html">modular_mob_segment</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L63"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 63"></a></h3><p>Byond will look for modular mob segment landmarks then choose from here at random. You can make them unique also.</p><h3 id="var/modular_unique_mobs"><aside class="declaration">var </aside>modular_unique_mobs <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L65"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 65"></a></h3><p>Forces all mob modules to only load once</p><h3 id="var/reward_points"><aside class="declaration">var </aside>reward_points <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L32"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 32"></a></h3><p>Points to reward for completion. Used to purchase new domains and calculate ore rewards.</p><h3 id="var/secondary_loot"><aside class="declaration">var </aside>secondary_loot <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L50"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 50"></a></h3><p>An assoc list of typepath/amount to spawn from secondary objectives. Not weighted - the value is the total number of items that can be obtained.</p><h3 id="var/secondary_loot_generated"><aside class="declaration">var </aside>secondary_loot_generated <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 52"></a></h3><p>Number of secondary loot boxes generated. Resets when the domain is reloaded.</p><h3 id="var/spawner_role"><aside class="declaration">var </aside>spawner_role <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L86"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 86"></a></h3><p>The role that ghosts will get. Only used for poll text.</p><h3 id="var/start_time"><aside class="declaration">var </aside>start_time <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L15"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 15"></a></h3><p>The start time of the map. Used to calculate time taken</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_points"><aside class="declaration">proc </aside>add_points<aside>(points_to_add)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L101"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 101"></a></aside></h3><p>Sends a point to any loot signals on the map</p><h3 id="proc/load_advanced_npcs"><aside class="declaration">proc </aside>load_advanced_npcs<aside>(/list/<a href="mob.html">mob</a>/lucky_ghosts)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L105"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 105"></a></aside></h3><p>Loads the ghost candidates.</p><h3 id="proc/setup_domain"><aside class="declaration">proc </aside>setup_domain<aside>(/list/created_atoms)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/bitrunning/virtual_domain/virtual_domain.dm#L117"><img src="git.png" width="16" height="16" title="code/modules/bitrunning/virtual_domain/virtual_domain.dm 117"></a></aside></h3><p>Overridable proc to be called after the map is loaded.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>