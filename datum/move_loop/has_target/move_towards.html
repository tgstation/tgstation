<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/move_loop/has_target/move_towards - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/move_loop/has_target/move_towards.html#var">Var Details</a> - <a href="datum/move_loop/has_target/move_towards.html#proc">Proc Details</a></header><main><h1>move_towards <aside>/<a href="datum.html">datum</a>/<a href="datum/move_loop.html">move_loop</a>/<a href="datum/move_loop/has_target.html">has_target</a>/<a href="datum/move_loop/has_target/move_towards.html">move_towards</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/movement/movement_types.dm#L588"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/movement/movement_types.dm 588"></a></h1><p>Used as a alternative to walk_towards</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/move_loop/has_target/move_towards.html#var/home">home</a></th><td>Should we try and stay on the path, or is deviation alright</td></tr><tr><th><a href="datum/move_loop/has_target/move_towards.html#var/moving_towards">moving_towards</a></th><td>The turf we want to move into, used for course correction</td></tr><tr><th><a href="datum/move_loop/has_target/move_towards.html#var/x_rate">x_rate</a></th><td>The rate at which we move, between 0 and 1</td></tr><tr><th><a href="datum/move_loop/has_target/move_towards.html#var/x_ticker">x_ticker</a></th><td>When this gets larger then 1 we move a turf</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/move_loop/has_target/move_towards.html#proc/update_slope">update_slope</a></th><td>Recalculates the slope between our object and the target, sets our rates to it</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/home"><aside class="declaration">var </aside>home <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/movement/movement_types.dm#L592"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/movement/movement_types.dm 592"></a></h3><p>Should we try and stay on the path, or is deviation alright</p><h3 id="var/moving_towards"><aside class="declaration">var </aside>moving_towards <aside>– /<a href="turf.html">turf</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/movement/movement_types.dm#L590"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/movement/movement_types.dm 590"></a></h3><p>The turf we want to move into, used for course correction</p><h3 id="var/x_rate"><aside class="declaration">var </aside>x_rate <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/movement/movement_types.dm#L597"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/movement/movement_types.dm 597"></a></h3><p>The rate at which we move, between 0 and 1</p><h3 id="var/x_ticker"><aside class="declaration">var </aside>x_ticker <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/movement/movement_types.dm#L594"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/movement/movement_types.dm 594"></a></h3><p>When this gets larger then 1 we move a turf</p><h2 id="proc">Proc Details</h2><h3 id="proc/update_slope"><aside class="declaration">proc </aside>update_slope<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/controllers/subsystem/movement/movement_types.dm#L676"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/movement/movement_types.dm 676"></a></aside></h3><p>Recalculates the slope between our object and the target, sets our rates to it</p>
<p>The math below is reminiscent of something like y = mx + b
Except we don't need to care about axis, since we do all our movement in steps of 1
Because of that all that matters is we only move one tile at a time
So we take the smaller delta, divide it by the larger one, and get smaller step per large step
Then we set the large step to 1, and we're done. This way we're guaranteed to never move more then a tile at once
And we can have nice lines</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>