<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/preference - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/preference.html#var">Var Details</a> - <a href="datum/preference.html#proc">Proc Details</a></header><main><h1>preference <aside>/<a href="datum.html">datum</a>/<a href="datum/preference.html">preference</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L77"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 77"></a></h1><p>Represents an individual preference.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/preference.html#var/abstract_type">abstract_type</a></th><td>Do not instantiate if type matches this.</td></tr><tr><th><a href="datum/preference.html#var/can_randomize">can_randomize</a></th><td>If set, will be available to randomize, but only if the preference
is for PREFERENCE_CHARACTER.</td></tr><tr><th><a href="datum/preference.html#var/category">category</a></th><td>The category of preference, for use by the PreferencesMenu.
This isn't used for anything other than as a key for UI data.
It is up to the PreferencesMenu UI itself to interpret it.</td></tr><tr><th><a href="datum/preference.html#var/priority">priority</a></th><td>The priority of when to apply this preference.
Used for when you need to rely on another preference.</td></tr><tr><th><a href="datum/preference.html#var/randomize_by_default">randomize_by_default</a></th><td>If randomizable (PREFERENCE_CHARACTER and can_randomize), whether
or not to enable randomization by default.
This doesn't mean it'll always be random, but rather if a player
DOES have random body on, will this already be randomized?</td></tr><tr><th><a href="datum/preference.html#var/relevant_body_markings">relevant_body_markings</a></th><td>If the selected species has this in its /datum/species/body_markings,
will show the feature as selectable.</td></tr><tr><th><a href="datum/preference.html#var/relevant_head_flag">relevant_head_flag</a></th><td>If the selected species has this head_flag by default,
will show the feature as selectable.</td></tr><tr><th><a href="datum/preference.html#var/relevant_inherent_trait">relevant_inherent_trait</a></th><td>If the selected species has this in its /datum/species/inherent_traits,
will show the feature as selectable.</td></tr><tr><th><a href="datum/preference.html#var/relevant_organ">relevant_organ</a></th><td>If the selected species has this in its /datum/species/var/external_organs,
will show the feature as selectable.</td></tr><tr><th><a href="datum/preference.html#var/savefile_identifier">savefile_identifier</a></th><td>What savefile should this preference be read from?
Valid values are PREFERENCE_CHARACTER and PREFERENCE_PLAYER.
See the documentation in <a href="code/__DEFINES/preferences.html" title="code/__DEFINES/preferences.dm">code/__DEFINES/preferences.dm</a>.</td></tr><tr><th><a href="datum/preference.html#var/savefile_key">savefile_key</a></th><td>The key inside the savefile to use.
This is also sent to the UI.
Once you pick this, don't change it.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/preference.html#proc/apply_to_client">apply_to_client</a></th><td>Apply this preference onto the given client.
Called when the savefile_identifier == PREFERENCE_PLAYER.</td></tr><tr><th><a href="datum/preference.html#proc/apply_to_client_updated">apply_to_client_updated</a></th><td>Fired when the preference is updated.
Calls apply_to_client by default, but can be overridden.</td></tr><tr><th><a href="datum/preference.html#proc/apply_to_human">apply_to_human</a></th><td>Apply this preference onto the given human.
Must be overriden by subtypes.
Called when the savefile_identifier == PREFERENCE_CHARACTER.</td></tr><tr><th><a href="datum/preference.html#proc/compile_constant_data">compile_constant_data</a></th><td>Returns data compiled into the preferences JSON asset</td></tr><tr><th><a href="datum/preference.html#proc/compile_ui_data">compile_ui_data</a></th><td>Returns data to be sent to users in the menu</td></tr><tr><th><a href="datum/preference.html#proc/create_default_value">create_default_value</a></th><td>Produce a default, potentially random value for when no value for this
preference is found in the savefile.
Either this or create_informed_default_value must be overriden by subtypes.</td></tr><tr><th><a href="datum/preference.html#proc/create_informed_default_value">create_informed_default_value</a></th><td>Produce a default, potentially random value for when no value for this
preference is found in the savefile.
Unlike create_default_value(), will provide the preferences object if you
need to use it.
If not overriden, will call create_default_value() instead.</td></tr><tr><th><a href="datum/preference.html#proc/create_random_value">create_random_value</a></th><td>Produce a random value for the purposes of character randomization.
Will just create a default value by default.</td></tr><tr><th><a href="datum/preference.html#proc/current_species_has_savekey">current_species_has_savekey</a></th><td>Checks the species currently selected by the passed preferences object to see if it has this preference's key as a feature.</td></tr><tr><th><a href="datum/preference.html#proc/deserialize">deserialize</a></th><td>Called on the saved input when retrieving.
Also called by the value sent from the user through UI. Do not trust it.
Input is the value inside the savefile, output is to tell other code
what the value is.
This is useful either for more optimal data saving or for migrating
older data.
Must be overridden by subtypes.
Can return null if no value was found.</td></tr><tr><th><a href="datum/preference.html#proc/get_spritesheet_key">get_spritesheet_key</a></th><td>Returns the key that will be used in the spritesheet for a given value.</td></tr><tr><th><a href="datum/preference.html#proc/has_relevant_feature">has_relevant_feature</a></th><td>Checks if this preference is relevant and thus visible to the passed preferences object.</td></tr><tr><th><a href="datum/preference.html#proc/included_in_randomization_flags">included_in_randomization_flags</a></th><td>Given randomization flags, will return whether or not this preference should be randomized.</td></tr><tr><th><a href="datum/preference.html#proc/is_accessible">is_accessible</a></th><td>Returns whether or not this preference is accessible.
If FALSE, will not show in the UI and will not be editable (by update_preference).</td></tr><tr><th><a href="datum/preference.html#proc/is_randomizable">is_randomizable</a></th><td>Returns whether or not a preference can be randomized.</td></tr><tr><th><a href="datum/preference.html#proc/is_valid">is_valid</a></th><td>Checks that a given value is valid.
Must be overriden by subtypes.
Any type can be passed through.</td></tr><tr><th><a href="datum/preference.html#proc/read">read</a></th><td>Given a savefile, return either the saved data or an acceptable default.
This will write to the savefile if a value was not found with the new value.</td></tr><tr><th><a href="datum/preference.html#proc/serialize">serialize</a></th><td>Called on the input while saving.
Input is the current value, output is what to save in the savefile.</td></tr><tr><th><a href="datum/preference.html#proc/should_show_on_page">should_show_on_page</a></th><td>Returns whether or not, given the PREFERENCE_TAB_*, this preference should
appear.</td></tr><tr><th><a href="datum/preference.html#proc/write">write</a></th><td>Given a savefile, writes the inputted value.
Returns TRUE for a successful application.
Return FALSE if it is invalid.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/abstract_type"><aside class="parent"><a title="/datum" href="datum.html#var/abstract_type">↑</a></aside>abstract_type <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L79"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 79"></a></h3><p>Do not instantiate if type matches this.</p><h3 id="var/can_randomize"><aside class="declaration">var </aside>can_randomize <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L102"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 102"></a></h3><p>If set, will be available to randomize, but only if the preference
is for PREFERENCE_CHARACTER.</p><h3 id="var/category"><aside class="declaration">var </aside>category <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L89"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 89"></a></h3><p>The category of preference, for use by the PreferencesMenu.
This isn't used for anything other than as a key for UI data.
It is up to the PreferencesMenu UI itself to interpret it.</p><h3 id="var/priority"><aside class="declaration">var </aside>priority <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L98"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 98"></a></h3><p>The priority of when to apply this preference.
Used for when you need to rely on another preference.</p><h3 id="var/randomize_by_default"><aside class="declaration">var </aside>randomize_by_default <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L108"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 108"></a></h3><p>If randomizable (PREFERENCE_CHARACTER and can_randomize), whether
or not to enable randomization by default.
This doesn't mean it'll always be random, but rather if a player
DOES have random body on, will this already be randomized?</p><h3 id="var/relevant_body_markings"><aside class="declaration">var </aside>relevant_body_markings <aside>– /<a href="datum.html">datum</a>/<a href="datum/bodypart_overlay.html">bodypart_overlay</a>/<a href="datum/bodypart_overlay/simple.html">simple</a>/<a href="datum/bodypart_overlay/simple/body_marking.html">body_marking</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L112"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 112"></a></h3><p>If the selected species has this in its /datum/species/body_markings,
will show the feature as selectable.</p><h3 id="var/relevant_head_flag"><aside class="declaration">var </aside>relevant_head_flag <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L124"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 124"></a></h3><p>If the selected species has this head_flag by default,
will show the feature as selectable.</p><h3 id="var/relevant_inherent_trait"><aside class="declaration">var </aside>relevant_inherent_trait <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L116"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 116"></a></h3><p>If the selected species has this in its /datum/species/inherent_traits,
will show the feature as selectable.</p><h3 id="var/relevant_organ"><aside class="declaration">var </aside>relevant_organ <aside>– /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/organ.html">organ</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L120"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 120"></a></h3><p>If the selected species has this in its /datum/species/var/external_organs,
will show the feature as selectable.</p><h3 id="var/savefile_identifier"><aside class="declaration">var </aside>savefile_identifier <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L94"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 94"></a></h3><p>What savefile should this preference be read from?
Valid values are PREFERENCE_CHARACTER and PREFERENCE_PLAYER.
See the documentation in <a href="code/__DEFINES/preferences.html" title="code/__DEFINES/preferences.dm">code/__DEFINES/preferences.dm</a>.</p><h3 id="var/savefile_key"><aside class="declaration">var </aside>savefile_key <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L84"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 84"></a></h3><p>The key inside the savefile to use.
This is also sent to the UI.
Once you pick this, don't change it.</p><h2 id="proc">Proc Details</h2><h3 id="proc/apply_to_client"><aside class="declaration">proc </aside>apply_to_client<aside>(/<a href="client.html">client</a>/client, value)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L202"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 202"></a></aside></h3><p>Apply this preference onto the given client.
Called when the savefile_identifier == PREFERENCE_PLAYER.</p><h3 id="proc/apply_to_client_updated"><aside class="declaration">proc </aside>apply_to_client_updated<aside>(/<a href="client.html">client</a>/client, value)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L209"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 209"></a></aside></h3><p>Fired when the preference is updated.
Calls apply_to_client by default, but can be overridden.</p><h3 id="proc/apply_to_human"><aside class="declaration">proc </aside>apply_to_human<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/target, value)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L216"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 216"></a></aside></h3><p>Apply this preference onto the given human.
Must be overriden by subtypes.
Called when the savefile_identifier == PREFERENCE_CHARACTER.</p><h3 id="proc/compile_constant_data"><aside class="declaration">proc </aside>compile_constant_data<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L319"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 319"></a></aside></h3><p>Returns data compiled into the preferences JSON asset</p><h3 id="proc/compile_ui_data"><aside class="declaration">proc </aside>compile_ui_data<aside>(/<a href="mob.html">mob</a>/user, value)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L313"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 313"></a></aside></h3><p>Returns data to be sent to users in the menu</p><h3 id="proc/create_default_value"><aside class="declaration">proc </aside>create_default_value<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L148"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 148"></a></aside></h3><p>Produce a default, potentially random value for when no value for this
preference is found in the savefile.
Either this or create_informed_default_value must be overriden by subtypes.</p><h3 id="proc/create_informed_default_value"><aside class="declaration">proc </aside>create_informed_default_value<aside>(/<a href="datum.html">datum</a>/<a href="datum/preferences.html">preferences</a>/preferences)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L158"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 158"></a></aside></h3><p>Produce a default, potentially random value for when no value for this
preference is found in the savefile.
Unlike create_default_value(), will provide the preferences object if you
need to use it.
If not overriden, will call create_default_value() instead.</p><h3 id="proc/create_random_value"><aside class="declaration">proc </aside>create_random_value<aside>(/<a href="datum.html">datum</a>/<a href="datum/preferences.html">preferences</a>/preferences)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L163"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 163"></a></aside></h3><p>Produce a random value for the purposes of character randomization.
Will just create a default value by default.</p><h3 id="proc/current_species_has_savekey"><aside class="declaration">proc </aside>current_species_has_savekey<aside>(/<a href="datum.html">datum</a>/<a href="datum/preferences.html">preferences</a>/preferences)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L325"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 325"></a></aside></h3><p>Checks the species currently selected by the passed preferences object to see if it has this preference's key as a feature.</p><h3 id="proc/deserialize"><aside class="declaration">proc </aside>deserialize<aside>(input, /<a href="datum.html">datum</a>/<a href="datum/preferences.html">preferences</a>/preferences)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L134"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 134"></a></aside></h3><p>Called on the saved input when retrieving.
Also called by the value sent from the user through UI. Do not trust it.
Input is the value inside the savefile, output is to tell other code
what the value is.
This is useful either for more optimal data saving or for migrating
older data.
Must be overridden by subtypes.
Can return null if no value was found.</p><h3 id="proc/get_spritesheet_key"><aside class="declaration">proc </aside>get_spritesheet_key<aside>(value)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/assets.dm#L34"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/assets.dm 34"></a></aside></h3><p>Returns the key that will be used in the spritesheet for a given value.</p><h3 id="proc/has_relevant_feature"><aside class="declaration">proc </aside>has_relevant_feature<aside>(/<a href="datum.html">datum</a>/<a href="datum/preferences.html">preferences</a>/preferences)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L331"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 331"></a></aside></h3><p>Checks if this preference is relevant and thus visible to the passed preferences object.</p><h3 id="proc/included_in_randomization_flags"><aside class="declaration">proc </aside>included_in_randomization_flags<aside>(randomize_flags)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/middleware/random.dm#L77"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/middleware/random.dm 77"></a></aside></h3><p>Given randomization flags, will return whether or not this preference should be randomized.</p><h3 id="proc/is_accessible"><aside class="declaration">proc </aside>is_accessible<aside>(/<a href="datum.html">datum</a>/<a href="datum/preferences.html">preferences</a>/preferences)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L339"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 339"></a></aside></h3><p>Returns whether or not this preference is accessible.
If FALSE, will not show in the UI and will not be editable (by update_preference).</p><h3 id="proc/is_randomizable"><aside class="declaration">proc </aside>is_randomizable<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L167"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 167"></a></aside></h3><p>Returns whether or not a preference can be randomized.</p><h3 id="proc/is_valid"><aside class="declaration">proc </aside>is_valid<aside>(value)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L307"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 307"></a></aside></h3><p>Checks that a given value is valid.
Must be overriden by subtypes.
Any type can be passed through.</p><h3 id="proc/read"><aside class="declaration">proc </aside>read<aside>(/list/save_data, /<a href="datum.html">datum</a>/<a href="datum/preferences.html">preferences</a>/preferences)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L173"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 173"></a></aside></h3><p>Given a savefile, return either the saved data or an acceptable default.
This will write to the savefile if a value was not found with the new value.</p><h3 id="proc/serialize"><aside class="declaration">proc </aside>serialize<aside>(input)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L141"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 141"></a></aside></h3><p>Called on the input while saving.
Input is the current value, output is what to save in the savefile.</p><h3 id="proc/should_show_on_page"><aside class="declaration">proc </aside>should_show_on_page<aside>(preference_tab)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L353"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 353"></a></aside></h3><p>Returns whether or not, given the PREFERENCE_TAB_*, this preference should
appear.</p><h3 id="proc/write"><aside class="declaration">proc </aside>write<aside>(/list/save_data, value)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/client/preferences/_preference.dm#L189"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 189"></a></aside></h3><p>Given a savefile, writes the inputted value.
Returns TRUE for a successful application.
Return FALSE if it is invalid.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>