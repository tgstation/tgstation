<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/remote_materials - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/remote_materials.html#var">Var Details</a> - <a href="datum/remote_materials.html#proc">Proc Details</a></header><main><h1>remote_materials <aside>/<a href="datum.html">datum</a>/<a href="datum/remote_materials.html">remote_materials</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L8"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 8"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/remote_materials.html#var/allow_standalone">allow_standalone</a></th><td>Should we create a local storage if we can't connect to silo</td></tr><tr><th><a href="datum/remote_materials.html#var/connection">connection</a></th><td>Callback for round start silo connections. Have to cancel this if the parent gets destroyed before round start</td></tr><tr><th><a href="datum/remote_materials.html#var/local_size">local_size</a></th><td>Local size of container when silo = null</td></tr><tr><th><a href="datum/remote_materials.html#var/mat_container">mat_container</a></th><td>Material container. the value is either the silo or local</td></tr><tr><th><a href="datum/remote_materials.html#var/mat_container_flags">mat_container_flags</a></th><td>Flags used for the local material container(exceptions for item insert &amp; intent flags)</td></tr><tr><th><a href="datum/remote_materials.html#var/mat_container_signals">mat_container_signals</a></th><td>List of signals to hook onto the local container</td></tr><tr><th><a href="datum/remote_materials.html#var/parent">parent</a></th><td>Movable this connection is attached to</td></tr><tr><th><a href="datum/remote_materials.html#var/silo">silo</a></th><td>The silo machine this container is connected to</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/remote_materials.html#proc/_PrepareStorage">_PrepareStorage</a></th><td>Internal proc. prepares local storage if onnect_to_silo = FALSE</td></tr><tr><th><a href="datum/remote_materials.html#proc/attempt_insert">attempt_insert</a></th><td>Insert mats into silo</td></tr><tr><th><a href="datum/remote_materials.html#proc/can_use_resource">can_use_resource</a></th><td>Check if this connection can use any materials from the silo
Returns true only if</td></tr><tr><th><a href="datum/remote_materials.html#proc/check_z_level">check_z_level</a></th><td>Checks if the param silo is in the same level as this components parent i.e. connected machine, rcd, etc</td></tr><tr><th><a href="datum/remote_materials.html#proc/disconnect">disconnect</a></th><td>Disconnects this component from the silo</td></tr><tr><th><a href="datum/remote_materials.html#proc/eject_sheets">eject_sheets</a></th><td>Ejects the given material ref and logs it</td></tr><tr><th><a href="datum/remote_materials.html#proc/insert_item">insert_item</a></th><td>Insert an item into the mat container, helper proc to insert items with the correct context</td></tr><tr><th><a href="datum/remote_materials.html#proc/on_hold">on_hold</a></th><td>returns TRUE if this connection put on hold by the silo</td></tr><tr><th><a href="datum/remote_materials.html#proc/set_local_size">set_local_size</a></th><td>Sets the storage size for local materials when not linked with silo
Arguments</td></tr><tr><th><a href="datum/remote_materials.html#proc/toggle_holding">toggle_holding</a></th><td>Adds/Removes this connection from the silo</td></tr><tr><th><a href="datum/remote_materials.html#proc/use_materials">use_materials</a></th><td>Use materials from either the silo(if connected) or from the local storage. If silo then this action
is logged else not e.g. action=&quot;build&quot; &amp; name=&quot;matter bin&quot; means you are trying to build a matter bin</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/allow_standalone"><aside class="declaration">var </aside>allow_standalone <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 21"></a></h3><p>Should we create a local storage if we can't connect to silo</p><h3 id="var/connection"><aside class="declaration">var </aside>connection <aside>– /<a href="datum.html">datum</a>/<a href="datum/callback.html">callback</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L29"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 29"></a></h3><p>Callback for round start silo connections. Have to cancel this if the parent gets destroyed before round start</p><h3 id="var/local_size"><aside class="declaration">var </aside>local_size <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L23"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 23"></a></h3><p>Local size of container when silo = null</p><h3 id="var/mat_container"><aside class="declaration">var </aside>mat_container <aside>– /<a href="datum.html">datum</a>/<a href="datum/material_container.html">material_container</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L19"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 19"></a></h3><p>Material container. the value is either the silo or local</p><h3 id="var/mat_container_flags"><aside class="declaration">var </aside>mat_container_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L25"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 25"></a></h3><p>Flags used for the local material container(exceptions for item insert &amp; intent flags)</p><h3 id="var/mat_container_signals"><aside class="declaration">var </aside>mat_container_signals <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L27"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 27"></a></h3><p>List of signals to hook onto the local container</p><h3 id="var/parent"><aside class="declaration">var </aside>parent <aside>– /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L15"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 15"></a></h3><p>Movable this connection is attached to</p><h3 id="var/silo"><aside class="declaration">var </aside>silo <aside>– /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/ore_silo.html">ore_silo</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L17"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 17"></a></h3><p>The silo machine this container is connected to</p><h2 id="proc">Proc Details</h2><h3 id="proc/_PrepareStorage"><aside class="declaration">proc </aside>_PrepareStorage<aside>(connect_to_silo)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L65"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 65"></a></aside></h3><p>Internal proc. prepares local storage if onnect_to_silo = FALSE</p>
<p>Arguments
connect_to_silo- if true connect to global silo. If not successfull then go to local storage
only if allow_standalone = TRUE, else you a null mat_container</p><h3 id="proc/attempt_insert"><aside class="declaration">proc </aside>attempt_insert<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L181"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 181"></a></aside></h3><p>Insert mats into silo</p><h3 id="proc/can_use_resource"><aside class="declaration">proc </aside>can_use_resource<aside>(check_hold, /alist/user_data)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L218"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 218"></a></aside></h3><p>Check if this connection can use any materials from the silo
Returns true only if</p>
<ul>
<li>The parent is of type movable atom</li>
<li>A mat container is actually present</li>
<li>The silo in not on hold
Arguments</li>
</ul>
<ul>
<li>check_hold - should we check if the silo is on hold</li>
<li>user_data - in the form rendered by ID_DATA(user); used as a reference for silo bans and access checks</li>
</ul><h3 id="proc/check_z_level"><aside class="declaration">proc </aside>check_z_level<aside>(/<a href="obj.html">obj</a>/silo_to_check)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L198"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 198"></a></aside></h3><p>Checks if the param silo is in the same level as this components parent i.e. connected machine, rcd, etc</p>
<p>Arguments
silo_to_check- Is this components parent in the same Z level as this param silo. If null
then check this components connected silo</p>
<p>Returns true if both are on the station or same z level</p><h3 id="proc/disconnect"><aside class="declaration">proc </aside>disconnect<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L127"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 127"></a></aside></h3><p>Disconnects this component from the silo</p><h3 id="proc/eject_sheets"><aside class="declaration">proc </aside>eject_sheets<aside>(/<a href="datum.html">datum</a>/<a href="datum/material.html">material</a>/material_ref, eject_amount, /<a href="atom.html">atom</a>/drop_target, /alist/user_data)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L267"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 267"></a></aside></h3><p>Ejects the given material ref and logs it</p>
<p>Arguments
<a href="datum/material.html" title="/datum/material">material_ref</a>- The material type you are trying to eject
eject_amount- how many sheets to eject
<a href="atom.html" title="/atom">drop_target</a>- optional where to drop the sheets. null means it is dropped at this components parent location
user_data - in the form rendered by ID_DATA(user), for material logging and (if this component is connected to a silo), permission checking</p><h3 id="proc/insert_item"><aside class="declaration">proc </aside>insert_item<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/weapon, multiplier, /alist/user_data)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L285"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 285"></a></aside></h3><p>Insert an item into the mat container, helper proc to insert items with the correct context</p>
<p>Arguments</p>
<ul>
<li>obj/item/weapon - the item you are trying to insert</li>
<li>multiplier - the multiplier applied on the materials consumed</li>
<li>user_data - an alist in the form rendered by ID_DATA(user), for logging who/where/when the item was inserted</li>
</ul><h3 id="proc/on_hold"><aside class="declaration">proc </aside>on_hold<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L205"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 205"></a></aside></h3><p>returns TRUE if this connection put on hold by the silo</p><h3 id="proc/set_local_size"><aside class="declaration">proc </aside>set_local_size<aside>(size)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L121"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 121"></a></aside></h3><p>Sets the storage size for local materials when not linked with silo
Arguments</p>
<ul>
<li>size - the new size for local storage. measured in SHEET_MATERIAL_SIZE units</li>
</ul><h3 id="proc/toggle_holding"><aside class="declaration">proc </aside>toggle_holding<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L106"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 106"></a></aside></h3><p>Adds/Removes this connection from the silo</p><h3 id="proc/use_materials"><aside class="declaration">proc </aside>use_materials<aside>(/list/mats, coefficient, multiplier, action, name, /alist/user_data)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/material/remote_materials.dm#L244"><img src="git.png" width="16" height="16" title="code/datums/material/remote_materials.dm 244"></a></aside></h3><p>Use materials from either the silo(if connected) or from the local storage. If silo then this action
is logged else not e.g. action=&quot;build&quot; &amp; name=&quot;matter bin&quot; means you are trying to build a matter bin</p>
<p>Arguments
[mats][list]- list of materials to use
coefficient- each mat unit is scaled by this value then rounded. This value if usually your machine efficiency e.g. upgraded protolathe has reduced costs
multiplier- each mat unit is scaled by this value then rounded after it is scaled by coefficient. This value is your print quatity e.g. printing multiple items
action- For logging only. e.g. build, create, i.e. the action you are trying to perform
name- For logging only. the design you are trying to build e.g. matter bin, etc.
user_data - in the form rendered by ID_DATA(user), for material logging and (if this component is connected to a silo), permission checking</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>