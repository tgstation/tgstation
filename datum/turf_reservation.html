<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/turf_reservation - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/turf_reservation.html#var">Var Details</a> - <a href="datum/turf_reservation.html#proc">Proc Details</a></header><main><h1>turf_reservation <aside>/<a href="datum.html">datum</a>/<a href="datum/turf_reservation.html">turf_reservation</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L3"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 3"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/turf_reservation.html#var/bottom_left_turfs">bottom_left_turfs</a></th><td>List of the bottom left turfs. Indexed by what their z index for this reservation is</td></tr><tr><th><a href="datum/turf_reservation.html#var/cordon_turfs">cordon_turfs</a></th><td>Turfs around the reservation for cordoning</td></tr><tr><th><a href="datum/turf_reservation.html#var/height">height</a></th><td>The height of the reservation</td></tr><tr><th><a href="datum/turf_reservation.html#var/pre_cordon_distance">pre_cordon_distance</a></th><td>Distance away from the cordon where we can put a &quot;sort-cordon&quot; and run some extra code (see make_repel). 0 makes nothing happen</td></tr><tr><th><a href="datum/turf_reservation.html#var/pre_cordon_turfs">pre_cordon_turfs</a></th><td>Area of turfs next to the cordon to fill with pre_cordon_area's</td></tr><tr><th><a href="datum/turf_reservation.html#var/reserved_turfs">reserved_turfs</a></th><td>All turfs that we've reserved</td></tr><tr><th><a href="datum/turf_reservation.html#var/top_right_turfs">top_right_turfs</a></th><td>List of the top right turfs. Indexed by what their z index for this reservation is</td></tr><tr><th><a href="datum/turf_reservation.html#var/turf_type">turf_type</a></th><td>The turf type the reservation is initially made with</td></tr><tr><th><a href="datum/turf_reservation.html#var/turf_type_is_baseturf">turf_type_is_baseturf</a></th><td>Do we override baseturfs with turf_type?</td></tr><tr><th><a href="datum/turf_reservation.html#var/width">width</a></th><td>The width of the reservation</td></tr><tr><th><a href="datum/turf_reservation.html#var/z_size">z_size</a></th><td>The z stack size of the reservation. Note that reservations are ALWAYS reserved from the bottom up</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/turf_reservation.html#proc/_reserve_area">_reserve_area</a></th><td>Internal proc which handles reserving the area for the reservation.</td></tr><tr><th><a href="datum/turf_reservation.html#proc/calculate_cordon_turfs">calculate_cordon_turfs</a></th><td>Attempts to calaculate and store a list of turfs around the reservation for cordoning. Returns whether a valid cordon was calculated</td></tr><tr><th><a href="datum/turf_reservation.html#proc/calculate_turf_bounds_information">calculate_turf_bounds_information</a></th><td>Calculates the effective bounds information for the given turf. Returns a list of the information, or null if not applicable.</td></tr><tr><th><a href="datum/turf_reservation.html#proc/generate_cordon">generate_cordon</a></th><td>Actually generates the cordon around the reservation, and marking the cordon turfs as reserved</td></tr><tr><th><a href="datum/turf_reservation.html#proc/get_turf_above">get_turf_above</a></th><td>Gets the turf above the given target. Returns null if there is no turf above the target</td></tr><tr><th><a href="datum/turf_reservation.html#proc/get_turf_below">get_turf_below</a></th><td>Gets the turf below the given target. Returns null if there is no turf below the target</td></tr><tr><th><a href="datum/turf_reservation.html#proc/make_repel">make_repel</a></th><td>Register signals in the cordon &quot;danger zone&quot; to do something with whoever trespasses</td></tr><tr><th><a href="datum/turf_reservation.html#proc/stop_repel">stop_repel</a></th><td>Unregister all the signals we added in RegisterRepelSignals</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/bottom_left_turfs"><aside class="declaration">var </aside>bottom_left_turfs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 23"></a></h3><p>List of the bottom left turfs. Indexed by what their z index for this reservation is</p><h3 id="var/cordon_turfs"><aside class="declaration">var </aside>cordon_turfs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L8"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 8"></a></h3><p>Turfs around the reservation for cordoning</p><h3 id="var/height"><aside class="declaration">var </aside>height <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 17"></a></h3><p>The height of the reservation</p><h3 id="var/pre_cordon_distance"><aside class="declaration">var </aside>pre_cordon_distance <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 35"></a></h3><p>Distance away from the cordon where we can put a &quot;sort-cordon&quot; and run some extra code (see make_repel). 0 makes nothing happen</p><h3 id="var/pre_cordon_turfs"><aside class="declaration">var </aside>pre_cordon_turfs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 11"></a></h3><p>Area of turfs next to the cordon to fill with pre_cordon_area's</p><h3 id="var/reserved_turfs"><aside class="declaration">var </aside>reserved_turfs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 5"></a></h3><p>All turfs that we've reserved</p><h3 id="var/top_right_turfs"><aside class="declaration">var </aside>top_right_turfs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L26"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 26"></a></h3><p>List of the top right turfs. Indexed by what their z index for this reservation is</p><h3 id="var/turf_type"><aside class="declaration">var </aside>turf_type <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 29"></a></h3><p>The turf type the reservation is initially made with</p><h3 id="var/turf_type_is_baseturf"><aside class="declaration">var </aside>turf_type_is_baseturf <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L32"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 32"></a></h3><p>Do we override baseturfs with turf_type?</p><h3 id="var/width"><aside class="declaration">var </aside>width <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 14"></a></h3><p>The width of the reservation</p><h3 id="var/z_size"><aside class="declaration">var </aside>z_size <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L20"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 20"></a></h3><p>The z stack size of the reservation. Note that reservations are ALWAYS reserved from the bottom up</p><h2 id="proc">Proc Details</h2><h3 id="proc/_reserve_area"><aside class="declaration">proc </aside>_reserve_area<aside>(width, height, zlevel)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L152"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 152"></a></aside></h3><p>Internal proc which handles reserving the area for the reservation.</p><h3 id="proc/calculate_cordon_turfs"><aside class="declaration">proc </aside>calculate_cordon_turfs<aside>(/<a href="turf.html">turf</a>/bottom_left, /<a href="turf.html">turf</a>/top_right)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L66"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 66"></a></aside></h3><p>Attempts to calaculate and store a list of turfs around the reservation for cordoning. Returns whether a valid cordon was calculated</p><h3 id="proc/calculate_turf_bounds_information"><aside class="declaration">proc </aside>calculate_turf_bounds_information<aside>(/<a href="turf.html">turf</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L216"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 216"></a></aside></h3><p>Calculates the effective bounds information for the given turf. Returns a list of the information, or null if not applicable.</p><h3 id="proc/generate_cordon"><aside class="declaration">proc </aside>generate_cordon<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L87"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 87"></a></aside></h3><p>Actually generates the cordon around the reservation, and marking the cordon turfs as reserved</p><h3 id="proc/get_turf_above"><aside class="declaration">proc </aside>get_turf_above<aside>(/<a href="turf.html">turf</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L261"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 261"></a></aside></h3><p>Gets the turf above the given target. Returns null if there is no turf above the target</p><h3 id="proc/get_turf_below"><aside class="declaration">proc </aside>get_turf_below<aside>(/<a href="turf.html">turf</a>/target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L245"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 245"></a></aside></h3><p>Gets the turf below the given target. Returns null if there is no turf below the target</p><h3 id="proc/make_repel"><aside class="declaration">proc </aside>make_repel<aside>(/<a href="turf.html">turf</a>/pre_cordon_turf)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L110"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 110"></a></aside></h3><p>Register signals in the cordon &quot;danger zone&quot; to do something with whoever trespasses</p><h3 id="proc/stop_repel"><aside class="declaration">proc </aside>stop_repel<aside>(/<a href="turf.html">turf</a>/pre_cordon_turf)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mapping/space_management/space_reservation.dm#L123"><img src="git.png" width="16" height="16" title="code/modules/mapping/space_management/space_reservation.dm 123"></a></aside></h3><p>Unregister all the signals we added in RegisterRepelSignals</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>