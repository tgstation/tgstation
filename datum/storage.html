<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/storage - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/storage.html#var">Var Details</a> - <a href="datum/storage.html#proc">Proc Details</a></header><main><h1>storage <aside>/<a href="datum.html">datum</a>/<a href="datum/storage.html">storage</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L8"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 8"></a></h1><p>Datumized Storage
Eliminates the need for custom signals specifically for the storage component, and attaches a storage variable (atom_storage) to every atom.
The parent and real_location variables are both weakrefs, so they must be resolved before they can be used.
If you're looking to create custom storage type behaviors, check ../subtypes</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/storage.html#var/allow_big_nesting">allow_big_nesting</a></th><td>Whether we allow storage objects of the same size inside.</td></tr><tr><th><a href="datum/storage.html#var/allow_quick_empty">allow_quick_empty</a></th><td>If TRUE, we can use-in-hand the storage object to dump all of its contents.</td></tr><tr><th><a href="datum/storage.html#var/allow_quick_gather">allow_quick_gather</a></th><td>If TRUE, we can click on items with the storage object to pick them up and insert them.</td></tr><tr><th><a href="datum/storage.html#var/animated">animated</a></th><td>Determines whether we play a rustle animation when inserting/removing items.</td></tr><tr><th><a href="datum/storage.html#var/attack_hand_interact">attack_hand_interact</a></th><td>Whether we open when attack_handed (clicked on with an empty hand).</td></tr><tr><th><a href="datum/storage.html#var/can_hold">can_hold</a></th><td>Typecache of items that can be inserted into this storage.
By default, all item types can be inserted (assuming other conditions are met).
Do not set directly, use set_holdable</td></tr><tr><th><a href="datum/storage.html#var/can_hold_description">can_hold_description</a></th><td>An additional description shown on double-examine.
Is autogenerated to the can_hold list if not set.</td></tr><tr><th><a href="datum/storage.html#var/cant_hold">cant_hold</a></th><td>Typecache of items that cannot be inserted into this storage.
By default, no item types are barred from insertion.
Do not set directly, use set_holdable</td></tr><tr><th><a href="datum/storage.html#var/click_alt_open">click_alt_open</a></th><td>Switch this off if you want to handle click_alt in the parent atom</td></tr><tr><th><a href="datum/storage.html#var/collection_mode">collection_mode</a></th><td>The mode for collection when allow_quick_gather is enabled. See [code/__DEFINES/storage.dm]</td></tr><tr><th><a href="datum/storage.html#var/display_contents">display_contents</a></th><td>If TRUE, shows the contents of the storage in open_storage</td></tr><tr><th><a href="datum/storage.html#var/do_rustle">do_rustle</a></th><td>Determines whether we play a rustle sound when inserting/removing items.</td></tr><tr><th><a href="datum/storage.html#var/exception_hold">exception_hold</a></th><td>Typecache of items that can always be inserted into this storage, regardless of size.
Do not set directly, use set_holdable</td></tr><tr><th><a href="datum/storage.html#var/exception_max">exception_max</a></th><td>For use with an exception typecache:
The maximum amount of items of the exception type that can be inserted into this storage.</td></tr><tr><th><a href="datum/storage.html#var/insert_on_attack">insert_on_attack</a></th><td>do we insert items when clicked by them?</td></tr><tr><th><a href="datum/storage.html#var/insert_preposition">insert_preposition</a></th><td>The preposition used when inserting items into this storage.
IE: You put things <em>in</em> a bag, but <em>on</em> a plate.</td></tr><tr><th><a href="datum/storage.html#var/is_using">is_using</a></th><td>List of all the mobs currently viewing the contents of this storage.</td></tr><tr><th><a href="datum/storage.html#var/locked">locked</a></th><td>Whether the storage is currently locked (inaccessible). See [code/__DEFINES/storage.dm]</td></tr><tr><th><a href="datum/storage.html#var/max_slots">max_slots</a></th><td>The maximum amount of items that can be inserted into this storage.</td></tr><tr><th><a href="datum/storage.html#var/max_specific_storage">max_specific_storage</a></th><td>The largest weight class that can be inserted into this storage, inclusive.</td></tr><tr><th><a href="datum/storage.html#var/max_total_storage">max_total_storage</a></th><td>Determines the maximum amount of weight that can be inserted into this storage.
Weight is calculated by the sum of all of our content's weight classes.</td></tr><tr><th><a href="datum/storage.html#var/modeswitch_action">modeswitch_action</a></th><td>Ref to the item action that toggles collectmode.</td></tr><tr><th><a href="datum/storage.html#var/numerical_stacking">numerical_stacking</a></th><td>Instead of displaying multiple items of the same type, display them as numbered contents.</td></tr><tr><th><a href="datum/storage.html#var/open_sound">open_sound</a></th><td>The sound to play when we open/access the storage</td></tr><tr><th><a href="datum/storage.html#var/parent">parent</a></th><td>A reference to the atom linked to this storage object
If the parent goes, we go. Will never be null.</td></tr><tr><th><a href="datum/storage.html#var/quickdraw">quickdraw</a></th><td>if TRUE, alt-click takes an item out instantly rather than opening up storage.</td></tr><tr><th><a href="datum/storage.html#var/real_location">real_location</a></th><td>A reference to the atom where the items are actually stored.
By default this is parent. Should generally never be null.
Sometimes it's not the parent, that's what is called &quot;dissassociated storage&quot;.</td></tr><tr><th><a href="datum/storage.html#var/remove_rustle_sound">remove_rustle_sound</a></th><td>Path for the item's rustle sound when removing items.</td></tr><tr><th><a href="datum/storage.html#var/rustle_sound">rustle_sound</a></th><td>Path for the item's rustle sound.</td></tr><tr><th><a href="datum/storage.html#var/screen_max_columns">screen_max_columns</a></th><td>Maximum amount of columns a storage object can have</td></tr><tr><th><a href="datum/storage.html#var/screen_max_rows">screen_max_rows</a></th><td>Maximum amount of rows a storage object can have</td></tr><tr><th><a href="datum/storage.html#var/screen_pixel_x">screen_pixel_x</a></th><td>X-pixel location of the boxes and close button</td></tr><tr><th><a href="datum/storage.html#var/screen_pixel_y">screen_pixel_y</a></th><td>Y-pixel location of the boxes and close button</td></tr><tr><th><a href="datum/storage.html#var/screen_start_x">screen_start_x</a></th><td>Where storage starts being rendered, x-screen_loc wise</td></tr><tr><th><a href="datum/storage.html#var/screen_start_y">screen_start_y</a></th><td>Where storage starts being rendered, y-screen_loc wise</td></tr><tr><th><a href="datum/storage.html#var/silent">silent</a></th><td>If TRUE, chat messages for inserting/removing items will not be shown.</td></tr><tr><th><a href="datum/storage.html#var/silent_for_user">silent_for_user</a></th><td>Same as above but only for the user.
Useful to cut on chat spam without removing feedback for other players.</td></tr><tr><th><a href="datum/storage.html#var/storage_interfaces">storage_interfaces</a></th><td>Associated list that keeps track of all storage UI datums per person.</td></tr><tr><th><a href="datum/storage.html#var/storage_type">storage_type</a></th><td>The type of storage interface this datum uses.</td></tr><tr><th><a href="datum/storage.html#var/supports_smart_equip">supports_smart_equip</a></th><td>If we support smartly removing/inserting things from ourselves</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/storage.html#proc/animate_parent">animate_parent</a></th><td>Gives a spiffy animation to our parent to represent opening and closing.</td></tr><tr><th><a href="datum/storage.html#proc/attempt_insert">attempt_insert</a></th><td>Attempts to insert an item into the storage</td></tr><tr><th><a href="datum/storage.html#proc/attempt_remove">attempt_remove</a></th><td>Attempts to remove an item from the storage
Ignores removal do_afters. Only use this if you're doing it as part of a dumping action</td></tr><tr><th><a href="datum/storage.html#proc/can_be_reached_by">can_be_reached_by</a></th><td>Relay for parent.IsReachableBy</td></tr><tr><th><a href="datum/storage.html#proc/can_insert">can_insert</a></th><td>Checks if an item is capable of being inserted into the storage.</td></tr><tr><th><a href="datum/storage.html#proc/can_see_contents">can_see_contents</a></th><td>Checks who is currently capable of viewing our storage (and is.)</td></tr><tr><th><a href="datum/storage.html#proc/close_all">close_all</a></th><td>Close the storage UI for everyone viewing us.</td></tr><tr><th><a href="datum/storage.html#proc/close_all_recursive">close_all_recursive</a></th><td>Closes the storage UIs of this and everything inside the parent for everyone viewing them.</td></tr><tr><th><a href="datum/storage.html#proc/close_distance">close_distance</a></th><td>Signal handler for whenever a mob walks away with us, close if they can't reach us.</td></tr><tr><th><a href="datum/storage.html#proc/collect_on_turf">collect_on_turf</a></th><td>Collects every item of a type on a turf.</td></tr><tr><th><a href="datum/storage.html#proc/contents_changed_w_class">contents_changed_w_class</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_object.html#define/COMSIG_ATOM_CONTENTS_WEIGHT_CLASS_CHANGED" title="COMSIG_ATOM_CONTENTS_WEIGHT_CLASS_CHANGED">COMSIG_ATOM_CONTENTS_WEIGHT_CLASS_CHANGED</a> to drop items out of our storage if they're suddenly too heavy.</td></tr><tr><th><a href="datum/storage.html#proc/dump_content_at">dump_content_at</a></th><td>Dumps all of our contents at a specific location.</td></tr><tr><th><a href="datum/storage.html#proc/get_exception_count">get_exception_count</a></th><td>Returns a count of how many items held due to exception_hold we have</td></tr><tr><th><a href="datum/storage.html#proc/get_total_weight">get_total_weight</a></th><td>Returns a sum of all of our content's weight classes</td></tr><tr><th><a href="datum/storage.html#proc/handle_enter">handle_enter</a></th><td>Automatically ran on all object insertions: flag marking and view refreshing.</td></tr><tr><th><a href="datum/storage.html#proc/handle_exit">handle_exit</a></th><td>Automatically ran on all object removals: flag marking and view refreshing.</td></tr><tr><th><a href="datum/storage.html#proc/handle_mass_pickup">handle_mass_pickup</a></th><td>Inserts every item in a given list, with a progress bar</td></tr><tr><th><a href="datum/storage.html#proc/hide_contents">hide_contents</a></th><td>Hide our storage from a mob.</td></tr><tr><th><a href="datum/storage.html#proc/item_init">item_init</a></th><td>Ran on items instantiated inside the storage, basically a chopped down version of handle_enter</td></tr><tr><th><a href="datum/storage.html#proc/item_insertion_feedback">item_insertion_feedback</a></th><td>Provides visual feedback in chat for an item insertion</td></tr><tr><th><a href="datum/storage.html#proc/item_interact_insert">item_interact_insert</a></th><td>Called directly from the attack chain if [insert_on_attack] is TRUE.
Handles inserting an item into the storage when clicked.</td></tr><tr><th><a href="datum/storage.html#proc/mass_empty">mass_empty</a></th><td>Signal handler for remove_all()</td></tr><tr><th><a href="datum/storage.html#proc/mousedrop_receive">mousedrop_receive</a></th><td>Since items inside storages ignore transparency for QOL reasons, we're tracking when things are dropped onto them instead of our UI elements</td></tr><tr><th><a href="datum/storage.html#proc/on_attack">on_attack</a></th><td>Signal handler for whenever we're attacked by a mob.</td></tr><tr><th><a href="datum/storage.html#proc/on_click_alt">on_click_alt</a></th><td>Alt click on the storage item. Default: Open the storage.</td></tr><tr><th><a href="datum/storage.html#proc/on_emp_act">on_emp_act</a></th><td>Signal handler for emp_act to emp all contents</td></tr><tr><th><a href="datum/storage.html#proc/on_mousedrop_onto">on_mousedrop_onto</a></th><td>Signal handler for whenever we drag the storage somewhere.</td></tr><tr><th><a href="datum/storage.html#proc/on_mousedropped_onto">on_mousedropped_onto</a></th><td>Signal handler for whenever something gets mouse-dropped onto us.</td></tr><tr><th><a href="datum/storage.html#proc/on_preattack">on_preattack</a></th><td>Signal handler for preattack from an object.</td></tr><tr><th><a href="datum/storage.html#proc/open_storage">open_storage</a></th><td>Opens the storage to the mob, showing them the contents to their UI.</td></tr><tr><th><a href="datum/storage.html#proc/open_storage_on_signal">open_storage_on_signal</a></th><td>Signal handler to open up the storage when we receive a signal.</td></tr><tr><th><a href="datum/storage.html#proc/orient_storage">orient_storage</a></th><td>Updates views of all objects in storage and stretches UI to appropriate size</td></tr><tr><th><a href="datum/storage.html#proc/process_numerical_display">process_numerical_display</a></th><td>Generates the numbers on an item in storage to show stacking.</td></tr><tr><th><a href="datum/storage.html#proc/put_in_hands_async">put_in_hands_async</a></th><td>Async version of putting something into a mobs hand.</td></tr><tr><th><a href="datum/storage.html#proc/real_location_deleted">real_location_deleted</a></th><td>Signal handler for when the real location is deleted.</td></tr><tr><th><a href="datum/storage.html#proc/refresh_views">refresh_views</a></th><td>Refresh the views of everyone currently viewing the storage.</td></tr><tr><th><a href="datum/storage.html#proc/remove_all">remove_all</a></th><td>Removes everything inside of our storage</td></tr><tr><th><a href="datum/storage.html#proc/remove_and_refresh">remove_and_refresh</a></th><td>Resets an object, removes it from our screen, and refreshes the view.</td></tr><tr><th><a href="datum/storage.html#proc/remove_single">remove_single</a></th><td>Allows a mob to attempt to remove a single item from the storage
Allows for hooks into things like removal delays</td></tr><tr><th><a href="datum/storage.html#proc/remove_type">remove_type</a></th><td>Removes only a specific type of item from our storage</td></tr><tr><th><a href="datum/storage.html#proc/reset_item">reset_item</a></th><td>Refreshes and item to be put back into the real world, out of storage.</td></tr><tr><th><a href="datum/storage.html#proc/return_inv">return_inv</a></th><td>Recursive proc to get absolutely EVERYTHING inside a storage item, including the contents of inner items.</td></tr><tr><th><a href="datum/storage.html#proc/set_holdable">set_holdable</a></th><td>Sets what type of contents this storage supports
Arguments</td></tr><tr><th><a href="datum/storage.html#proc/set_locked">set_locked</a></th><td>Assign a new value to the locked variable. If it's higher than NOT_LOCKED, close the UIs and update the appearance of the parent.</td></tr><tr><th><a href="datum/storage.html#proc/set_parent">set_parent</a></th><td>Set the passed atom as the parent</td></tr><tr><th><a href="datum/storage.html#proc/set_real_location">set_real_location</a></th><td>Sets where items are physically being stored in the case it shouldn't be on the parent.</td></tr><tr><th><a href="datum/storage.html#proc/show_contents">show_contents</a></th><td>Show our storage to a mob.</td></tr><tr><th><a href="datum/storage.html#proc/toggle_collection_mode">toggle_collection_mode</a></th><td>Toggles the collectmode of our storage.</td></tr><tr><th><a href="datum/storage.html#proc/update_actions">update_actions</a></th><td>Updates the action button for toggling collectmode.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/allow_big_nesting"><aside class="declaration">var </aside>allow_big_nesting <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L74"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 74"></a></h3><p>Whether we allow storage objects of the same size inside.</p><h3 id="var/allow_quick_empty"><aside class="declaration">var </aside>allow_quick_empty <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L82"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 82"></a></h3><p>If TRUE, we can use-in-hand the storage object to dump all of its contents.</p><h3 id="var/allow_quick_gather"><aside class="declaration">var </aside>allow_quick_gather <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L77"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 77"></a></h3><p>If TRUE, we can click on items with the storage object to pick them up and insert them.</p><h3 id="var/animated"><aside class="declaration">var </aside>animated <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L47"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 47"></a></h3><p>Determines whether we play a rustle animation when inserting/removing items.</p><h3 id="var/attack_hand_interact"><aside class="declaration">var </aside>attack_hand_interact <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L71"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 71"></a></h3><p>Whether we open when attack_handed (clicked on with an empty hand).</p><h3 id="var/can_hold"><aside class="declaration">var </aside>can_hold <aside>– /final/list/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L34"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 34"></a></h3><p>Typecache of items that can be inserted into this storage.
By default, all item types can be inserted (assuming other conditions are met).
Do not set directly, use set_holdable</p><h3 id="var/can_hold_description"><aside class="declaration">var </aside>can_hold_description <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L92"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 92"></a></h3><p>An additional description shown on double-examine.
Is autogenerated to the can_hold list if not set.</p><h3 id="var/cant_hold"><aside class="declaration">var </aside>cant_hold <aside>– /final/list/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L38"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 38"></a></h3><p>Typecache of items that cannot be inserted into this storage.
By default, no item types are barred from insertion.
Do not set directly, use set_holdable</p><h3 id="var/click_alt_open"><aside class="declaration">var </aside>click_alt_open <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L130"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 130"></a></h3><p>Switch this off if you want to handle click_alt in the parent atom</p><h3 id="var/collection_mode"><aside class="declaration">var </aside>collection_mode <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L79"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 79"></a></h3><p>The mode for collection when allow_quick_gather is enabled. See [code/__DEFINES/storage.dm]</p><h3 id="var/display_contents"><aside class="declaration">var </aside>display_contents <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L127"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 127"></a></h3><p>If TRUE, shows the contents of the storage in open_storage</p><h3 id="var/do_rustle"><aside class="declaration">var </aside>do_rustle <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L49"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 49"></a></h3><p>Determines whether we play a rustle sound when inserting/removing items.</p><h3 id="var/exception_hold"><aside class="declaration">var </aside>exception_hold <aside>– /final/list/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L41"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 41"></a></h3><p>Typecache of items that can always be inserted into this storage, regardless of size.
Do not set directly, use set_holdable</p><h3 id="var/exception_max"><aside class="declaration">var </aside>exception_max <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L44"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 44"></a></h3><p>For use with an exception typecache:
The maximum amount of items of the exception type that can be inserted into this storage.</p><h3 id="var/insert_on_attack"><aside class="declaration">var </aside>insert_on_attack <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L88"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 88"></a></h3><p>do we insert items when clicked by them?</p><h3 id="var/insert_preposition"><aside class="declaration">var </aside>insert_preposition <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L96"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 96"></a></h3><p>The preposition used when inserting items into this storage.
IE: You put things <em>in</em> a bag, but <em>on</em> a plate.</p><h3 id="var/is_using"><aside class="declaration">var </aside>is_using <aside>– /list/<a href="mob.html">mob</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 24"></a></h3><p>List of all the mobs currently viewing the contents of this storage.</p><h3 id="var/locked"><aside class="declaration">var </aside>locked <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L68"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 68"></a></h3><p>Whether the storage is currently locked (inaccessible). See [code/__DEFINES/storage.dm]</p><h3 id="var/max_slots"><aside class="declaration">var </aside>max_slots <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L60"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 60"></a></h3><p>The maximum amount of items that can be inserted into this storage.</p><h3 id="var/max_specific_storage"><aside class="declaration">var </aside>max_specific_storage <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L62"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 62"></a></h3><p>The largest weight class that can be inserted into this storage, inclusive.</p><h3 id="var/max_total_storage"><aside class="declaration">var </aside>max_total_storage <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L65"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 65"></a></h3><p>Determines the maximum amount of weight that can be inserted into this storage.
Weight is calculated by the sum of all of our content's weight classes.</p><h3 id="var/modeswitch_action"><aside class="declaration">var </aside>modeswitch_action <aside>– /<a href="datum.html">datum</a>/<a href="datum/action.html">action</a>/item_action/storage_gather_mode</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L124"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 124"></a></h3><p>Ref to the item action that toggles collectmode.</p><h3 id="var/numerical_stacking"><aside class="declaration">var </aside>numerical_stacking <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L108"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 108"></a></h3><p>Instead of displaying multiple items of the same type, display them as numbered contents.</p><h3 id="var/open_sound"><aside class="declaration">var </aside>open_sound <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L56"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 56"></a></h3><p>The sound to play when we open/access the storage</p><h3 id="var/parent"><aside class="declaration">var </aside>parent <aside>– /final/<a href="atom.html">atom</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L13"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 13"></a></h3><p>A reference to the atom linked to this storage object
If the parent goes, we go. Will never be null.</p><h3 id="var/quickdraw"><aside class="declaration">var </aside>quickdraw <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L105"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 105"></a></h3><p>if TRUE, alt-click takes an item out instantly rather than opening up storage.</p><h3 id="var/real_location"><aside class="declaration">var </aside>real_location <aside>– /final/<a href="atom.html">atom</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 21"></a></h3><p>A reference to the atom where the items are actually stored.
By default this is parent. Should generally never be null.
Sometimes it's not the parent, that's what is called &quot;dissassociated storage&quot;.</p>
<p>Do NOT set this directly, use set_real_location.</p><h3 id="var/remove_rustle_sound"><aside class="declaration">var </aside>remove_rustle_sound <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L54"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 54"></a></h3><p>Path for the item's rustle sound when removing items.</p><h3 id="var/rustle_sound"><aside class="declaration">var </aside>rustle_sound <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L52"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 52"></a></h3><p>Path for the item's rustle sound.</p><h3 id="var/screen_max_columns"><aside class="declaration">var </aside>screen_max_columns <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L111"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 111"></a></h3><p>Maximum amount of columns a storage object can have</p><h3 id="var/screen_max_rows"><aside class="declaration">var </aside>screen_max_rows <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L113"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 113"></a></h3><p>Maximum amount of rows a storage object can have</p><h3 id="var/screen_pixel_x"><aside class="declaration">var </aside>screen_pixel_x <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L115"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 115"></a></h3><p>X-pixel location of the boxes and close button</p><h3 id="var/screen_pixel_y"><aside class="declaration">var </aside>screen_pixel_y <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L117"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 117"></a></h3><p>Y-pixel location of the boxes and close button</p><h3 id="var/screen_start_x"><aside class="declaration">var </aside>screen_start_x <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L119"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 119"></a></h3><p>Where storage starts being rendered, x-screen_loc wise</p><h3 id="var/screen_start_y"><aside class="declaration">var </aside>screen_start_y <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L121"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 121"></a></h3><p>Where storage starts being rendered, y-screen_loc wise</p><h3 id="var/silent"><aside class="declaration">var </aside>silent <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L99"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 99"></a></h3><p>If TRUE, chat messages for inserting/removing items will not be shown.</p><h3 id="var/silent_for_user"><aside class="declaration">var </aside>silent_for_user <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L102"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 102"></a></h3><p>Same as above but only for the user.
Useful to cut on chat spam without removing feedback for other players.</p><h3 id="var/storage_interfaces"><aside class="declaration">var </aside>storage_interfaces <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/storage_interface.html">storage_interface</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L29"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 29"></a></h3><p>Associated list that keeps track of all storage UI datums per person.</p><h3 id="var/storage_type"><aside class="declaration">var </aside>storage_type <aside>– /<a href="datum.html">datum</a>/<a href="datum/storage_interface.html">storage_interface</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L27"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 27"></a></h3><p>The type of storage interface this datum uses.</p><h3 id="var/supports_smart_equip"><aside class="declaration">var </aside>supports_smart_equip <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L85"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 85"></a></h3><p>If we support smartly removing/inserting things from ourselves</p><h2 id="proc">Proc Details</h2><h3 id="proc/animate_parent"><aside class="declaration">proc </aside>animate_parent<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1185"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1185"></a></aside></h3><p>Gives a spiffy animation to our parent to represent opening and closing.</p><h3 id="proc/attempt_insert"><aside class="declaration">proc </aside>attempt_insert<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/to_insert, /<a href="mob.html">mob</a>/user, override, force, messages)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L485"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 485"></a></aside></h3><p>Attempts to insert an item into the storage</p>
<p>Arguments</p>
<ul>
<li>obj/item/to_insert - the item we're inserting</li>
<li>mob/user - (optional) the user who is inserting the item.</li>
<li>override - skip feedback, only do the animation</li>
<li>force - bypass locked storage up to a certain level. See [code/__DEFINES/storage.dm]</li>
<li>messages - if TRUE, we will create balloon alerts for the user.</li>
</ul><h3 id="proc/attempt_remove"><aside class="declaration">proc </aside>attempt_remove<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing, /<a href="atom.html">atom</a>/remove_to_loc, silent, visual_updates)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L600"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 600"></a></aside></h3><p>Attempts to remove an item from the storage
Ignores removal do_afters. Only use this if you're doing it as part of a dumping action</p>
<p>Arguments</p>
<ul>
<li>obj/item/thing - the object we're removing</li>
<li>atom/remove_to_loc - where we're placing the item</li>
<li>silent - if TRUE, we won't play any exit sounds</li>
<li>visual_updates - if TRUE we update storage views &amp; animate parent appearance</li>
</ul><h3 id="proc/can_be_reached_by"><aside class="declaration">proc </aside>can_be_reached_by<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1017"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1017"></a></aside></h3><p>Relay for parent.IsReachableBy</p><h3 id="proc/can_insert"><aside class="declaration">proc </aside>can_insert<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/to_insert, /<a href="mob.html">mob</a>/user, messages, force)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L389"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 389"></a></aside></h3><p>Checks if an item is capable of being inserted into the storage.</p>
<p>Arguments</p>
<ul>
<li>obj/item/to_insert - the item we're checking</li>
<li>messages - if TRUE, will print out a message if the item is not valid</li>
<li>force - bypass locked storage up to a certain level. See [code/__DEFINES/storage.dm]</li>
</ul><h3 id="proc/can_see_contents"><aside class="declaration">proc </aside>can_see_contents<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1037"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1037"></a></aside></h3><p>Checks who is currently capable of viewing our storage (and is.)</p><h3 id="proc/close_all"><aside class="declaration">proc </aside>close_all<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1021"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1021"></a></aside></h3><p>Close the storage UI for everyone viewing us.</p><h3 id="proc/close_all_recursive"><aside class="declaration">proc </aside>close_all_recursive<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1026"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1026"></a></aside></h3><p>Closes the storage UIs of this and everything inside the parent for everyone viewing them.</p><h3 id="proc/close_distance"><aside class="declaration">proc </aside>close_distance<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1009"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1009"></a></aside></h3><p>Signal handler for whenever a mob walks away with us, close if they can't reach us.</p><h3 id="proc/collect_on_turf"><aside class="declaration">proc </aside>collect_on_turf<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L763"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 763"></a></aside></h3><p>Collects every item of a type on a turf.</p>
<p>@param obj/item/thing the initial object to pick up
@param mob/user the user who is picking up the items</p><h3 id="proc/contents_changed_w_class"><aside class="declaration">proc </aside>contents_changed_w_class<aside>(/<a href="datum.html">datum</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/changed, old_w_class, new_w_class)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1191"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1191"></a></aside></h3><p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_object.html#define/COMSIG_ATOM_CONTENTS_WEIGHT_CLASS_CHANGED" title="COMSIG_ATOM_CONTENTS_WEIGHT_CLASS_CHANGED">COMSIG_ATOM_CONTENTS_WEIGHT_CLASS_CHANGED</a> to drop items out of our storage if they're suddenly too heavy.</p><h3 id="proc/dump_content_at"><aside class="declaration">proc </aside>dump_content_at<aside>(/<a href="atom.html">atom</a>/dest_object, dump_loc, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L847"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 847"></a></aside></h3><p>Dumps all of our contents at a specific location.</p>
<p>@param atom/dest_object where to dump to
@param mob/user the user who is dumping the contents</p><h3 id="proc/get_exception_count"><aside class="declaration">proc </aside>get_exception_count<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L461"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 461"></a></aside></h3><p>Returns a count of how many items held due to exception_hold we have</p><h3 id="proc/get_total_weight"><aside class="declaration">proc </aside>get_total_weight<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L469"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 469"></a></aside></h3><p>Returns a sum of all of our content's weight classes</p><h3 id="proc/handle_enter"><aside class="declaration">proc </aside>handle_enter<aside>(/<a href="datum.html">datum</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/arrived)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L185"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 185"></a></aside></h3><p>Automatically ran on all object insertions: flag marking and view refreshing.</p><h3 id="proc/handle_exit"><aside class="declaration">proc </aside>handle_exit<aside>(/<a href="datum.html">datum</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/gone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L199"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 199"></a></aside></h3><p>Automatically ran on all object removals: flag marking and view refreshing.</p><h3 id="proc/handle_mass_pickup"><aside class="declaration">proc </aside>handle_mass_pickup<aside>(/<a href="mob.html">mob</a>/user, /list/things, /<a href="atom.html">atom</a>/thing_loc, /list/rejections, /<a href="datum.html">datum</a>/<a href="datum/progressbar.html">progressbar</a>/progress)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L541"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 541"></a></aside></h3><p>Inserts every item in a given list, with a progress bar</p>
<p>Arguments</p>
<ul>
<li>mob/user - the user who is inserting the items</li>
<li>list/things - the list of items to insert</li>
<li>atom/thing_loc - the location of the items (used to make sure an item hasn't moved during pickup)</li>
<li>list/rejections - a list used to make sure we only complain once about an invalid insertion</li>
<li>datum/progressbar/progress - the progressbar used to show the progress of the insertion</li>
</ul><h3 id="proc/hide_contents"><aside class="declaration">proc </aside>hide_contents<aside>(/<a href="mob.html">mob</a>/to_hide)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1102"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1102"></a></aside></h3><p>Hide our storage from a mob.</p>
<p>Arguments</p>
<ul>
<li>mob/to_hide - the mob to hide the storage from</li>
</ul><h3 id="proc/item_init"><aside class="declaration">proc </aside>item_init<aside>(/<a href="datum.html">datum</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/inited)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L175"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 175"></a></aside></h3><p>Ran on items instantiated inside the storage, basically a chopped down version of handle_enter</p><h3 id="proc/item_insertion_feedback"><aside class="declaration">proc </aside>item_insertion_feedback<aside>(/<a href="mob.html">mob</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing, override)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L569"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 569"></a></aside></h3><p>Provides visual feedback in chat for an item insertion</p>
<p>Arguments</p>
<ul>
<li>mob/user - the user who is inserting the item</li>
<li>obj/item/thing - the item we're inserting</li>
<li>override - skip feedback, only do animation check</li>
</ul><h3 id="proc/item_interact_insert"><aside class="declaration">proc </aside>item_interact_insert<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L896"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 896"></a></aside></h3><p>Called directly from the attack chain if [insert_on_attack] is TRUE.
Handles inserting an item into the storage when clicked.</p><h3 id="proc/mass_empty"><aside class="declaration">proc </aside>mass_empty<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L688"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 688"></a></aside></h3><p>Signal handler for remove_all()</p><h3 id="proc/mousedrop_receive"><aside class="declaration">proc </aside>mousedrop_receive<aside>(/<a href="atom.html">atom</a>/dropped_onto, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/target, /<a href="mob.html">mob</a>/user, params)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L507"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 507"></a></aside></h3><p>Since items inside storages ignore transparency for QOL reasons, we're tracking when things are dropped onto them instead of our UI elements</p><h3 id="proc/on_attack"><aside class="declaration">proc </aside>on_attack<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L901"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 901"></a></aside></h3><p>Signal handler for whenever we're attacked by a mob.</p><h3 id="proc/on_click_alt"><aside class="declaration">proc </aside>on_click_alt<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L947"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 947"></a></aside></h3><p>Alt click on the storage item. Default: Open the storage.</p><h3 id="proc/on_emp_act"><aside class="declaration">proc </aside>on_emp_act<aside>(/<a href="datum.html">datum</a>/source, severity, protection)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L731"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 731"></a></aside></h3><p>Signal handler for emp_act to emp all contents</p><h3 id="proc/on_mousedrop_onto"><aside class="declaration">proc </aside>on_mousedrop_onto<aside>(/<a href="datum.html">datum</a>/source, /<a href="atom.html">atom</a>/over_object, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L789"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 789"></a></aside></h3><p>Signal handler for whenever we drag the storage somewhere.</p><h3 id="proc/on_mousedropped_onto"><aside class="declaration">proc </aside>on_mousedropped_onto<aside>(/<a href="datum.html">datum</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/dropping, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L878"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 878"></a></aside></h3><p>Signal handler for whenever something gets mouse-dropped onto us.</p><h3 id="proc/on_preattack"><aside class="declaration">proc </aside>on_preattack<aside>(/<a href="datum.html">datum</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing, /<a href="mob.html">mob</a>/user, /list/modifiers)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L741"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 741"></a></aside></h3><p>Signal handler for preattack from an object.</p><h3 id="proc/open_storage"><aside class="declaration">proc </aside>open_storage<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/to_show)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L956"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 956"></a></aside></h3><p>Opens the storage to the mob, showing them the contents to their UI.</p><h3 id="proc/open_storage_on_signal"><aside class="declaration">proc </aside>open_storage_on_signal<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/to_show)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L938"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 938"></a></aside></h3><p>Signal handler to open up the storage when we receive a signal.</p><h3 id="proc/orient_storage"><aside class="declaration">proc </aside>orient_storage<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1141"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1141"></a></aside></h3><p>Updates views of all objects in storage and stretches UI to appropriate size</p><h3 id="proc/process_numerical_display"><aside class="declaration">proc </aside>process_numerical_display<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L919"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 919"></a></aside></h3><p>Generates the numbers on an item in storage to show stacking.</p><h3 id="proc/put_in_hands_async"><aside class="declaration">proc </aside>put_in_hands_async<aside>(/<a href="mob.html">mob</a>/to_show, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/toremove)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1002"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1002"></a></aside></h3><p>Async version of putting something into a mobs hand.</p><h3 id="proc/real_location_deleted"><aside class="declaration">proc </aside>real_location_deleted<aside>(/<a href="datum.html">datum</a>/deleting_real_location)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L270"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 270"></a></aside></h3><p>Signal handler for when the real location is deleted.</p><h3 id="proc/refresh_views"><aside class="declaration">proc </aside>refresh_views<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1032"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1032"></a></aside></h3><p>Refresh the views of everyone currently viewing the storage.</p><h3 id="proc/remove_all"><aside class="declaration">proc </aside>remove_all<aside>(/<a href="atom.html">atom</a>/drop_loc, update_storage)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L637"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 637"></a></aside></h3><p>Removes everything inside of our storage</p>
<p>Arguments</p>
<ul>
<li>atom/drop_loc - where we're placing the item</li>
<li>update_storage - should we update the parent to show visual effects</li>
</ul><h3 id="proc/remove_and_refresh"><aside class="declaration">proc </aside>remove_and_refresh<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/gone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L717"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 717"></a></aside></h3><p>Resets an object, removes it from our screen, and refreshes the view.</p>
<p>@param atom/movable/gone the object leaving our storage</p><h3 id="proc/remove_single"><aside class="declaration">proc </aside>remove_single<aside>(/<a href="mob.html">mob</a>/removing, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing, /<a href="atom.html">atom</a>/remove_to_loc, silent)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L654"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 654"></a></aside></h3><p>Allows a mob to attempt to remove a single item from the storage
Allows for hooks into things like removal delays</p>
<p>Arguments</p>
<ul>
<li>mob/removing - the mob doing the removing</li>
<li>obj/item/thing - the object we're removing</li>
<li>atom/remove_to_loc - where we're placing the item</li>
<li>silent - if TRUE, we won't play any exit sounds</li>
</ul><h3 id="proc/remove_type"><aside class="declaration">proc </aside>remove_type<aside>(type, /<a href="atom.html">atom</a>/destination, amount, check_adjacent, force, /<a href="mob.html">mob</a>/user, /list/inserted)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L668"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 668"></a></aside></h3><p>Removes only a specific type of item from our storage</p>
<p>Arguments</p>
<ul>
<li>type - the type of item to remove</li>
<li>amount - how many we should attempt to pick up at one time</li>
<li>check_adjacent - if TRUE, we'll check adjacent locations for the item type</li>
<li>force - if TRUE, we'll bypass the check_adjacent check all together</li>
<li>mob/user - the user who is removing the items</li>
<li>list/inserted - (optional) allows consumers to pass a list to be filled with all removed items.</li>
</ul><h3 id="proc/reset_item"><aside class="declaration">proc </aside>reset_item<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/thing)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L373"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 373"></a></aside></h3><p>Refreshes and item to be put back into the real world, out of storage.</p><h3 id="proc/return_inv"><aside class="declaration">proc </aside>return_inv<aside>(recursive)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L702"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 702"></a></aside></h3><p>Recursive proc to get absolutely EVERYTHING inside a storage item, including the contents of inner items.</p>
<p>Arguments</p>
<ul>
<li>recursive - whether or not we're checking inside of inner items</li>
</ul><h3 id="proc/set_holdable"><aside class="declaration">proc </aside>set_holdable<aside>(/list/can_hold_list, /list/cant_hold_list, /list/exception_hold_list)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L317"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 317"></a></aside></h3><p>Sets what type of contents this storage supports
Arguments</p>
<ul>
<li>list/can_hold_list - The list of item types whitelisted in this storage rejecting everything else</li>
<li>list/cant_hold_list - The list of item types blacklisted in this storage accepting everything else</li>
<li>list/exception_hold_list - The list of items that can exceed <code>max_specific_storage</code>. It can only fit <code>exception_count</code> of such items</li>
</ul><h3 id="proc/set_locked"><aside class="declaration">proc </aside>set_locked<aside>(new_locked)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1204"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1204"></a></aside></h3><p>Assign a new value to the locked variable. If it's higher than NOT_LOCKED, close the UIs and update the appearance of the parent.</p><h3 id="proc/set_parent"><aside class="declaration">proc </aside>set_parent<aside>(/<a href="atom.html">atom</a>/new_parent)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L213"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 213"></a></aside></h3><p>Set the passed atom as the parent</p><h3 id="proc/set_real_location"><aside class="declaration">proc </aside>set_real_location<aside>(/<a href="atom.html">atom</a>/new_real_location, should_drop)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L247"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 247"></a></aside></h3><p>Sets where items are physically being stored in the case it shouldn't be on the parent.</p>
<p>Does not handle moving any existing items, that must be done manually.</p>
<p>Arguments</p>
<ul>
<li>atom/new_real_location - the new real location of the datum</li>
<li>should_drop - if TRUE, all the items in the old real location will be dropped.</li>
</ul><h3 id="proc/show_contents"><aside class="declaration">proc </aside>show_contents<aside>(/<a href="mob.html">mob</a>/to_show)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1056"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1056"></a></aside></h3><p>Show our storage to a mob.</p>
<p>Arguments</p>
<ul>
<li>mob/to_show - the mob to show the storage to</li>
</ul>
<p>Returns</p>
<ul>
<li>FALSE if the show failed</li>
<li>TRUE otherwise</li>
</ul><h3 id="proc/toggle_collection_mode"><aside class="declaration">proc </aside>toggle_collection_mode<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L1174"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 1174"></a></aside></h3><p>Toggles the collectmode of our storage.</p>
<p>@param mob/to_show the mob toggling us</p><h3 id="proc/update_actions"><aside class="declaration">proc </aside>update_actions<aside>(/<a href="atom.html">atom</a>/source, /<a href="mob.html">mob</a>/equipper, slot)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/storage/storage.dm#L356"><img src="git.png" width="16" height="16" title="code/datums/storage/storage.dm 356"></a></aside></h3><p>Updates the action button for toggling collectmode.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>