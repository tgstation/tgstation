<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/map_generator/cave_generator - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/map_generator/cave_generator.html#var">Var Details</a> - <a href="datum/map_generator/cave_generator.html#proc">Proc Details</a></header><main><h1>cave_generator <aside>/<a href="datum.html">datum</a>/<a href="datum/map_generator.html">map_generator</a>/<a href="datum/map_generator/cave_generator.html">cave_generator</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L4"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 4"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/biome_accepted_turfs">biome_accepted_turfs</a></th><td>The turf types to replace with a biome-related turf, as typecache.
Leave empty for all open turfs (but not closed turfs) to be hijacked.</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/birth_limit">birth_limit</a></th><td>How much neighbours does a dead cell need to become alive</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/closed_turf_types">closed_turf_types</a></th><td>Expanded list of the types that spawns if the turf is closed</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/death_limit">death_limit</a></th><td>How little neighbours does a alive cell need to die</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/feature_spawn_chance">feature_spawn_chance</a></th><td>Base chance of spawning features</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/feature_spawn_list">feature_spawn_list</a></th><td>Expanded list of extra features that can spawn in the area. Reads from the weighted list</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/flora_spawn_chance">flora_spawn_chance</a></th><td>Base chance of spawning flora</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/flora_spawn_list">flora_spawn_list</a></th><td>Expanded list of flora that can spawn in the area. Reads from the weighted list</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/generated_turfs_per_biome">generated_turfs_per_biome</a></th><td>An associative list of biome type to the list of turfs that were
generated of that biome specifically. Helps to improve the efficiency
of biome-related operations. Is populated through
<code>generate_terrain_with_biomes()</code>.</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/initial_closed_chance">initial_closed_chance</a></th><td>Chance of cells starting closed</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/megafauna_spawn_list">megafauna_spawn_list</a></th><td>Expanded list of Megafauna that can spawn in the area. Reads from the weighted list</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/mob_spawn_chance">mob_spawn_chance</a></th><td>Base chance of spawning a mob</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/mob_spawn_list">mob_spawn_list</a></th><td>Expanded list of mobs that can spawn in the area. Reads from the weighted list</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/mob_spawn_no_mega_list">mob_spawn_no_mega_list</a></th><td>The mob spawn list but with no megafauna markers. autogenerated</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/open_turf_types">open_turf_types</a></th><td>Expanded list of the types that spawns if the turf is open</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/perlin_zoom">perlin_zoom</a></th><td>Used to select &quot;zoom&quot; level into the perlin noise, higher numbers
result in slower transitions</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/possible_biomes">possible_biomes</a></th><td>2D list of all biomes based on heat and humidity combos. Associative by
<code>BIOME_X_HEAT</code> and then by <code>BIOME_X_HUMIDITY</code> (i.e.
<code>possible_biomes[BIOME_LOW_HEAT][BIOME_LOWMEDIUM_HUMIDITY]</code>).
Check /datum/map_generator/cave_generator/jungle for an example
of how to set it up properly.</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/smoothing_iterations">smoothing_iterations</a></th><td>Amount of smoothing iterations</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/string_gen">string_gen</a></th><td>Unique ID for this spawner</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/weighted_closed_turf_types">weighted_closed_turf_types</a></th><td>Weighted list of the types that spawns if the turf is closed</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/weighted_feature_spawn_list">weighted_feature_spawn_list</a></th><td>Weighted list of extra features that can spawn in the area, such as geysers.</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/weighted_flora_spawn_list">weighted_flora_spawn_list</a></th><td>Weighted list of flora that can spawn in the area.</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/weighted_mob_spawn_list">weighted_mob_spawn_list</a></th><td>Weighted list of mobs that can spawn in the area.</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#var/weighted_open_turf_types">weighted_open_turf_types</a></th><td>Weighted list of the types that spawns if the turf is open</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/map_generator/cave_generator.html#proc/generate_terrain_with_biomes">generate_terrain_with_biomes</a></th><td>This proc handles including biomes in the cave generation. This is slower than
<code>generate_terrain()</code>, so please use it only if you actually need biomes.</td></tr><tr><th><a href="datum/map_generator/cave_generator.html#proc/populate_terrain_with_biomes">populate_terrain_with_biomes</a></th><td>This handles the population of terrain with biomes. Should only be called by
<code>populate_terrain()</code>, if you find yourself calling this, you're probably not
doing it right.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/biome_accepted_turfs"><aside class="declaration">var </aside>biome_accepted_turfs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L36"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 36"></a></h3><p>The turf types to replace with a biome-related turf, as typecache.
Leave empty for all open turfs (but not closed turfs) to be hijacked.</p><h3 id="var/birth_limit"><aside class="declaration">var </aside>birth_limit <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L66"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 66"></a></h3><p>How much neighbours does a dead cell need to become alive</p><h3 id="var/closed_turf_types"><aside class="declaration">var </aside>closed_turf_types <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L13"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 13"></a></h3><p>Expanded list of the types that spawns if the turf is closed</p><h3 id="var/death_limit"><aside class="declaration">var </aside>death_limit <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L68"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 68"></a></h3><p>How little neighbours does a alive cell need to die</p><h3 id="var/feature_spawn_chance"><aside class="declaration">var </aside>feature_spawn_chance <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L57"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 57"></a></h3><p>Base chance of spawning features</p><h3 id="var/feature_spawn_list"><aside class="declaration">var </aside>feature_spawn_list <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L33"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 33"></a></h3><p>Expanded list of extra features that can spawn in the area. Reads from the weighted list</p><h3 id="var/flora_spawn_chance"><aside class="declaration">var </aside>flora_spawn_chance <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L55"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 55"></a></h3><p>Base chance of spawning flora</p><h3 id="var/flora_spawn_list"><aside class="declaration">var </aside>flora_spawn_list <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L29"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 29"></a></h3><p>Expanded list of flora that can spawn in the area. Reads from the weighted list</p><h3 id="var/generated_turfs_per_biome"><aside class="declaration">var </aside>generated_turfs_per_biome <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L41"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 41"></a></h3><p>An associative list of biome type to the list of turfs that were
generated of that biome specifically. Helps to improve the efficiency
of biome-related operations. Is populated through
<code>generate_terrain_with_biomes()</code>.</p><h3 id="var/initial_closed_chance"><aside class="declaration">var </aside>initial_closed_chance <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L62"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 62"></a></h3><p>Chance of cells starting closed</p><h3 id="var/megafauna_spawn_list"><aside class="declaration">var </aside>megafauna_spawn_list <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L25"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 25"></a></h3><p>Expanded list of Megafauna that can spawn in the area. Reads from the weighted list</p><h3 id="var/mob_spawn_chance"><aside class="declaration">var </aside>mob_spawn_chance <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L53"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 53"></a></h3><p>Base chance of spawning a mob</p><h3 id="var/mob_spawn_list"><aside class="declaration">var </aside>mob_spawn_list <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L19"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 19"></a></h3><p>Expanded list of mobs that can spawn in the area. Reads from the weighted list</p><h3 id="var/mob_spawn_no_mega_list"><aside class="declaration">var </aside>mob_spawn_no_mega_list <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L21"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 21"></a></h3><p>The mob spawn list but with no megafauna markers. autogenerated</p><h3 id="var/open_turf_types"><aside class="declaration">var </aside>open_turf_types <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L9"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 9"></a></h3><p>Expanded list of the types that spawns if the turf is open</p><h3 id="var/perlin_zoom"><aside class="declaration">var </aside>perlin_zoom <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L50"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 50"></a></h3><p>Used to select &quot;zoom&quot; level into the perlin noise, higher numbers
result in slower transitions</p><h3 id="var/possible_biomes"><aside class="declaration">var </aside>possible_biomes <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L47"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 47"></a></h3><p>2D list of all biomes based on heat and humidity combos. Associative by
<code>BIOME_X_HEAT</code> and then by <code>BIOME_X_HUMIDITY</code> (i.e.
<code>possible_biomes[BIOME_LOW_HEAT][BIOME_LOWMEDIUM_HUMIDITY]</code>).
Check /datum/map_generator/cave_generator/jungle for an example
of how to set it up properly.</p><h3 id="var/smoothing_iterations"><aside class="declaration">var </aside>smoothing_iterations <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L64"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 64"></a></h3><p>Amount of smoothing iterations</p><h3 id="var/string_gen"><aside class="declaration">var </aside>string_gen <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L59"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 59"></a></h3><p>Unique ID for this spawner</p><h3 id="var/weighted_closed_turf_types"><aside class="declaration">var </aside>weighted_closed_turf_types <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L11"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 11"></a></h3><p>Weighted list of the types that spawns if the turf is closed</p><h3 id="var/weighted_feature_spawn_list"><aside class="declaration">var </aside>weighted_feature_spawn_list <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L31"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 31"></a></h3><p>Weighted list of extra features that can spawn in the area, such as geysers.</p><h3 id="var/weighted_flora_spawn_list"><aside class="declaration">var </aside>weighted_flora_spawn_list <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L27"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 27"></a></h3><p>Weighted list of flora that can spawn in the area.</p><h3 id="var/weighted_mob_spawn_list"><aside class="declaration">var </aside>weighted_mob_spawn_list <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L17"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 17"></a></h3><p>Weighted list of mobs that can spawn in the area.</p><h3 id="var/weighted_open_turf_types"><aside class="declaration">var </aside>weighted_open_turf_types <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L7"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 7"></a></h3><p>Weighted list of the types that spawns if the turf is open</p><h2 id="proc">Proc Details</h2><h3 id="proc/generate_terrain_with_biomes"><aside class="declaration">proc </aside>generate_terrain_with_biomes<aside>(/list/turfs, /<a href="area.html">area</a>/generate_in)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L140"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 140"></a></aside></h3><p>This proc handles including biomes in the cave generation. This is slower than
<code>generate_terrain()</code>, so please use it only if you actually need biomes.</p>
<p>This should only be called by <code>generate_terrain()</code>, if you have to call this,
you're probably doing something wrong.</p><h3 id="proc/populate_terrain_with_biomes"><aside class="declaration">proc </aside>populate_terrain_with_biomes<aside>(/list/turfs, /<a href="area.html">area</a>/generate_in)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/mapgen/CaveGenerator.dm#L311"><img src="git.png" width="16" height="16" title="code/datums/mapgen/CaveGenerator.dm 311"></a></aside></h3><p>This handles the population of terrain with biomes. Should only be called by
<code>populate_terrain()</code>, if you find yourself calling this, you're probably not
doing it right.</p>
<p>This proc won't do anything if the area we're trying to generate in does not
have <code>FLORA_ALLOWED</code> or <code>MOB_SPAWN_ALLOWED</code> in its <code>area_flags</code>.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>