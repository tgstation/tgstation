<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/round_event/vent_clog - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/round_event/vent_clog.html#var">Var Details</a> - <a href="datum/round_event/vent_clog.html#proc">Proc Details</a></header><main><h1>vent_clog <aside>/<a href="datum.html">datum</a>/<a href="datum/round_event.html">round_event</a>/<a href="datum/round_event/vent_clog.html">vent_clog</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 22"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/round_event/vent_clog.html#var/filth_spawn_types">filth_spawn_types</a></th><td>The list of decals we will choose from to spawn when producing a mob</td></tr><tr><th><a href="datum/round_event/vent_clog.html#var/living_mobs">living_mobs</a></th><td>Used to track/limit produced mobs.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#var/maximum_spawns">maximum_spawns</a></th><td>Cap on the number of spawned mobs that can be alive at once.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#var/spawn_delay">spawn_delay</a></th><td>Interval between mob spawns.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#var/spawned_mob">spawned_mob</a></th><td>What mob will be spawned</td></tr><tr><th><a href="datum/round_event/vent_clog.html#var/vent">vent</a></th><td>Vent selected for the event.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/attempt_unclog">attempt_unclog</a></th><td>Handles the actual unclogging action and ends the event on completion.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/clear_signals">clear_signals</a></th><td>Clears the signals related to the event, before we wrap things up.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/clog_vent">clog_vent</a></th><td>Handles the initial steps of clogging a vent, either at event start or when the vent moves.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/get_mob">get_mob</a></th><td>Selects which mob will be spawned for a given vent clog event.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/get_vent">get_vent</a></th><td>Finds a valid vent to spawn mobs from.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/life_check">life_check</a></th><td>Checks which mobs in the mob spawn list are alive.</td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/plunger_unclog">plunger_unclog</a></th><td>Signal catcher for plunger_act()</td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/produce_mob">produce_mob</a></th><td>Handles the production of our mob and adds it to our living_mobs list</td></tr><tr><th><a href="datum/round_event/vent_clog.html#proc/vent_move">vent_move</a></th><td>Finds a new vent for the event if the original is destroyed.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/filth_spawn_types"><aside class="declaration">var </aside>filth_spawn_types <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 38"></a></h3><p>The list of decals we will choose from to spawn when producing a mob</p><h3 id="var/living_mobs"><aside class="declaration">var </aside>living_mobs <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L36"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 36"></a></h3><p>Used to track/limit produced mobs.</p><h3 id="var/maximum_spawns"><aside class="declaration">var </aside>maximum_spawns <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L32"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 32"></a></h3><p>Cap on the number of spawned mobs that can be alive at once.</p><h3 id="var/spawn_delay"><aside class="declaration">var </aside>spawn_delay <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L34"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 34"></a></h3><p>Interval between mob spawns.</p><h3 id="var/spawned_mob"><aside class="declaration">var </aside>spawned_mob <aside>– /<a href="mob.html">mob</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L30"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 30"></a></h3><p>What mob will be spawned</p><h3 id="var/vent"><aside class="declaration">var </aside>vent <aside>– /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/atmospherics.html">atmospherics</a>/<a href="obj/machinery/atmospherics/components.html">components</a>/<a href="obj/machinery/atmospherics/components/unary.html">unary</a>/<a href="obj/machinery/atmospherics/components/unary/vent_pump.html">vent_pump</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L28"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 28"></a></h3><p>Vent selected for the event.</p><h2 id="proc">Proc Details</h2><h3 id="proc/attempt_unclog"><aside class="declaration">proc </aside>attempt_unclog<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L179"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 179"></a></aside></h3><p>Handles the actual unclogging action and ends the event on completion.</p><h3 id="proc/clear_signals"><aside class="declaration">proc </aside>clear_signals<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L202"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 202"></a></aside></h3><p>Clears the signals related to the event, before we wrap things up.</p><h3 id="proc/clog_vent"><aside class="declaration">proc </aside>clog_vent<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L191"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 191"></a></aside></h3><p>Handles the initial steps of clogging a vent, either at event start or when the vent moves.</p><h3 id="proc/get_mob"><aside class="declaration">proc </aside>get_mob<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L76"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 76"></a></aside></h3><p>Selects which mob will be spawned for a given vent clog event.</p>
<p>Creates a static list of mobs, which is different based on the severity of the event being run, and returns a pick() of it.</p><h3 id="proc/get_vent"><aside class="declaration">proc </aside>get_vent<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L94"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 94"></a></aside></h3><p>Finds a valid vent to spawn mobs from.</p>
<p>Randomly selects a vent that is on-station, unwelded, and hosted by a passable turf. If no vents are found, the event
is immediately killed.</p><h3 id="proc/life_check"><aside class="declaration">proc </aside>life_check<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L115"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 115"></a></aside></h3><p>Checks which mobs in the mob spawn list are alive.</p>
<p>Checks each mob in the living_mobs list, to see if they're dead or not. If dead, they're removed from the list.
This is used to keep new mobs spawning as the old ones die.</p><h3 id="proc/plunger_unclog"><aside class="declaration">proc </aside>plunger_unclog<aside>(/<a href="datum.html">datum</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/plunger.html">plunger</a>/attacking_plunger, /<a href="mob.html">mob</a>/user, reinforced)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L173"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 173"></a></aside></h3><p>Signal catcher for plunger_act()</p><h3 id="proc/produce_mob"><aside class="declaration">proc </aside>produce_mob<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L146"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 146"></a></aside></h3><p>Handles the production of our mob and adds it to our living_mobs list</p>
<p>Used by the vent clog random event to handle the spawning of mobs. The proc receives the mob that will be spawned,
and the event's current list of living mobs produced by the event so far. After checking if the vent is welded, the
new mob is created on the vent's turf, then added to the living_mobs list.</p><h3 id="proc/vent_move"><aside class="declaration">proc </aside>vent_move<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/events/vent_clog.dm#L128"><img src="git.png" width="16" height="16" title="code/modules/events/vent_clog.dm 128"></a></aside></h3><p>Finds a new vent for the event if the original is destroyed.</p>
<p>This is used when the vent for the event is destroyed. It picks a new vent and announces that the event has moved elsewhere.
Handles the vent ref if there are no valid vents to replace it with.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>