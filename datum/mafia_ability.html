<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/mafia_ability - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/mafia_ability.html#var">Var Details</a> - <a href="datum/mafia_ability.html#proc">Proc Details</a></header><main><h1>mafia_ability <aside>/<a href="datum.html">datum</a>/<a href="datum/mafia_ability.html">mafia_ability</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L1"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/mafia_ability.html#var/action_priority">action_priority</a></th><td>The priority level this action must be sent at. Setting this to null will prevent it from being triggered automatically.
(COMSIG_MAFIA_NIGHT_PRE_ACTION_PHASE|COMSIG_MAFIA_NIGHT_ACTION_PHASE|COMSIG_MAFIA_NIGHT_KILL_PHASE)</td></tr><tr><th><a href="datum/mafia_ability.html#var/host_role">host_role</a></th><td>The mafia role that holds this ability.</td></tr><tr><th><a href="datum/mafia_ability.html#var/target_role">target_role</a></th><td>The mafia role this ability is targeting, if necessary.</td></tr><tr><th><a href="datum/mafia_ability.html#var/use_flags">use_flags</a></th><td>Whether this ability can be used on yourself. Selections: (CAN_USE_ON_OTHERS | CAN_USE_ON_SELF | CAN_USE_ON_DEAD)</td></tr><tr><th><a href="datum/mafia_ability.html#var/using_ability">using_ability</a></th><td>Boolean on whether the ability was selected to be used during the proper period.</td></tr><tr><th><a href="datum/mafia_ability.html#var/valid_use_period">valid_use_period</a></th><td>When the ability can be used: (MAFIA_PHASE_DAY | MAFIA_PHASE_VOTING | MAFIA_PHASE_NIGHT)</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/mafia_ability.html#proc/clean_action_refs">clean_action_refs</a></th><td>Called when refs need to be cleared, the last thing that is called in a night cycle.</td></tr><tr><th><a href="datum/mafia_ability.html#proc/handle_speech">handle_speech</a></th><td>Handles special messagese sent by ability-specific stuff (such as changeling chat).</td></tr><tr><th><a href="datum/mafia_ability.html#proc/perform_action_target">perform_action_target</a></th><td>Called when using the ability.
Will first check if you are using the ability, then whether you can use it.
Finally it will check if you are interrupted, then will pass that you've performed it.
Args:
game - The Mafia controller that holds reference to the game.
day_target - Set when using actions during the day, this is the person that is the target during this phase.</td></tr><tr><th><a href="datum/mafia_ability.html#proc/set_target">set_target</a></th><td>##set_target</td></tr><tr><th><a href="datum/mafia_ability.html#proc/validate_action_target">validate_action_target</a></th><td>Used to check if this ability can be used on a potential target.
Args:
game - The Mafia controller that holds reference to the game.
potential_target - The player we are attempting to validate the action on.
silent - Whether to give feedback to the player about why the action cannot be used.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/action_priority"><aside class="declaration">var </aside>action_priority <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 7"></a></h3><p>The priority level this action must be sent at. Setting this to null will prevent it from being triggered automatically.
(COMSIG_MAFIA_NIGHT_PRE_ACTION_PHASE|COMSIG_MAFIA_NIGHT_ACTION_PHASE|COMSIG_MAFIA_NIGHT_KILL_PHASE)</p><h3 id="var/host_role"><aside class="declaration">var </aside>host_role <aside>– /<a href="datum.html">datum</a>/<a href="datum/mafia_role.html">mafia_role</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L16"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 16"></a></h3><p>The mafia role that holds this ability.</p><h3 id="var/target_role"><aside class="declaration">var </aside>target_role <aside>– /<a href="datum.html">datum</a>/<a href="datum/mafia_role.html">mafia_role</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 18"></a></h3><p>The mafia role this ability is targeting, if necessary.</p><h3 id="var/use_flags"><aside class="declaration">var </aside>use_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 11"></a></h3><p>Whether this ability can be used on yourself. Selections: (CAN_USE_ON_OTHERS | CAN_USE_ON_SELF | CAN_USE_ON_DEAD)</p><h3 id="var/using_ability"><aside class="declaration">var </aside>using_ability <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 14"></a></h3><p>Boolean on whether the ability was selected to be used during the proper period.</p><h3 id="var/valid_use_period"><aside class="declaration">var </aside>valid_use_period <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 9"></a></h3><p>When the ability can be used: (MAFIA_PHASE_DAY | MAFIA_PHASE_VOTING | MAFIA_PHASE_NIGHT)</p><h2 id="proc">Proc Details</h2><h3 id="proc/clean_action_refs"><aside class="declaration">proc </aside>clean_action_refs<aside>(/<a href="datum.html">datum</a>/<a href="datum/mafia_controller.html">mafia_controller</a>/game)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L40"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 40"></a></aside></h3><p>Called when refs need to be cleared, the last thing that is called in a night cycle.</p><h3 id="proc/handle_speech"><aside class="declaration">proc </aside>handle_speech<aside>(/<a href="datum.html">datum</a>/source, /list/speech_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 33"></a></aside></h3><p>Handles special messagese sent by ability-specific stuff (such as changeling chat).</p><h3 id="proc/perform_action_target"><aside class="declaration">proc </aside>perform_action_target<aside>(/<a href="datum.html">datum</a>/<a href="datum/mafia_controller.html">mafia_controller</a>/game, /<a href="datum.html">datum</a>/<a href="datum/mafia_role.html">mafia_role</a>/day_target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L93"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 93"></a></aside></h3><p>Called when using the ability.
Will first check if you are using the ability, then whether you can use it.
Finally it will check if you are interrupted, then will pass that you've performed it.
Args:
game - The Mafia controller that holds reference to the game.
day_target - Set when using actions during the day, this is the person that is the target during this phase.</p><h3 id="proc/set_target"><aside class="declaration">proc </aside>set_target<aside>(/<a href="datum.html">datum</a>/<a href="datum/mafia_role.html">mafia_role</a>/new_target)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L115"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 115"></a></aside></h3><p>##set_target</p>
<p>Used for Night abilities ONLY
Sets the ability's target, which will cause the action to be performed on them at the end of the night.
Subtypes can override this for things like self-abilities (such as shooting visitors).</p><h3 id="proc/validate_action_target"><aside class="declaration">proc </aside>validate_action_target<aside>(/<a href="datum.html">datum</a>/<a href="datum/mafia_role.html">mafia_role</a>/potential_target, silent)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mafia/abilities/abilities.dm#L54"><img src="git.png" width="16" height="16" title="code/modules/mafia/abilities/abilities.dm 54"></a></aside></h3><p>Used to check if this ability can be used on a potential target.
Args:
game - The Mafia controller that holds reference to the game.
potential_target - The player we are attempting to validate the action on.
silent - Whether to give feedback to the player about why the action cannot be used.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>