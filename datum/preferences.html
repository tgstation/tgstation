<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/preferences - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/preferences.html#var">Var Details</a> - <a href="datum/preferences.html#proc">Proc Details</a></header><main><h1>preferences <aside>/<a href="datum.html">datum</a>/<a href="datum/preferences.html">preferences</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L3"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 3"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/preferences.html#var/be_special">be_special</a></th><td>List of ROLE_X that the client wants to be eligible for</td></tr><tr><th><a href="datum/preferences.html#var/character_data">character_data</a></th><td>The savefile relating to character preferences, PREFERENCE_CHARACTER</td></tr><tr><th><a href="datum/preferences.html#var/character_preview_view">character_preview_view</a></th><td>A preview of the current character</td></tr><tr><th><a href="datum/preferences.html#var/current_window">current_window</a></th><td>The current window, PREFERENCE_TAB_* in [<code>code/__DEFINES/preferences.dm</code>]</td></tr><tr><th><a href="datum/preferences.html#var/default_slot">default_slot</a></th><td>Ensures that we always load the last used save, QOL</td></tr><tr><th><a href="datum/preferences.html#var/favorite_outfits">favorite_outfits</a></th><td>What outfit typepaths we've favorited in the SelectEquipment menu</td></tr><tr><th><a href="datum/preferences.html#var/hearted">hearted</a></th><td>Someone thought we were nice! We get a little heart in OOC until we join the server past the below time (we can keep it until the end of the round otherwise)</td></tr><tr><th><a href="datum/preferences.html#var/hearted_until">hearted_until</a></th><td>If we have a hearted commendations, we honor it every time the player loads preferences until this time has been passed</td></tr><tr><th><a href="datum/preferences.html#var/key_bindings">key_bindings</a></th><td>Custom keybindings. Map of keybind names to keyboard inputs.
For example, by default would have &quot;swap_hands&quot; -&gt; list(&quot;X&quot;)</td></tr><tr><th><a href="datum/preferences.html#var/key_bindings_by_key">key_bindings_by_key</a></th><td>Cached list of keybindings, mapping keys to actions.
For example, by default would have &quot;X&quot; -&gt; list(&quot;swap_hands&quot;)</td></tr><tr><th><a href="datum/preferences.html#var/last_id">last_id</a></th><td>Last CID that this client has connected from</td></tr><tr><th><a href="datum/preferences.html#var/last_ip">last_ip</a></th><td>Last IP that this client has connected from</td></tr><tr><th><a href="datum/preferences.html#var/lastchangelog">lastchangelog</a></th><td>Cached changelog size, to detect new changelogs since last join</td></tr><tr><th><a href="datum/preferences.html#var/load_and_save">load_and_save</a></th><td>Whether or not we allow saving/loading. Used for guests, if they're enabled</td></tr><tr><th><a href="datum/preferences.html#var/max_save_slots">max_save_slots</a></th><td>The maximum number of slots we're allowed to contain</td></tr><tr><th><a href="datum/preferences.html#var/middleware">middleware</a></th><td>A list of instantiated middleware</td></tr><tr><th><a href="datum/preferences.html#var/muted">muted</a></th><td>Bitflags for communications that are muted</td></tr><tr><th><a href="datum/preferences.html#var/path">path</a></th><td>The path to the general savefile for this datum</td></tr><tr><th><a href="datum/preferences.html#var/recently_updated_keys">recently_updated_keys</a></th><td>A list of keys that have been updated since the last save.</td></tr><tr><th><a href="datum/preferences.html#var/savefile">savefile</a></th><td>The json savefile for this datum</td></tr><tr><th><a href="datum/preferences.html#var/tainted_character_profiles">tainted_character_profiles</a></th><td>If set to TRUE, will update character_profiles on the next ui_data tick.</td></tr><tr><th><a href="datum/preferences.html#var/value_cache">value_cache</a></th><td>A cache of preference entries to values.
Used to avoid expensive READ_FILE every time a preference is retrieved.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/preferences.html#proc/add_loadout_item">add_loadout_item</a></th><td>Helper for slotting in a new loadout item</td></tr><tr><th><a href="datum/preferences.html#proc/apply_all_client_preferences">apply_all_client_preferences</a></th><td>Applies all PREFERENCE_PLAYER preferences</td></tr><tr><th><a href="datum/preferences.html#proc/apply_character_randomization_prefs">apply_character_randomization_prefs</a></th><td>Randomizes the character according to preferences.</td></tr><tr><th><a href="datum/preferences.html#proc/apply_prefs_to">apply_prefs_to</a></th><td>Applies the given preferences to a human mob.</td></tr><tr><th><a href="datum/preferences.html#proc/check_keybindings">check_keybindings</a></th><td>checks through keybindings for outdated unbound keys and updates them</td></tr><tr><th><a href="datum/preferences.html#proc/get_default_randomization">get_default_randomization</a></th><td>Returns the default <code>randomise</code> variable ouptut</td></tr><tr><th><a href="datum/preferences.html#proc/get_highest_priority_job">get_highest_priority_job</a></th><td>Returns what job is marked as highest</td></tr><tr><th><a href="datum/preferences.html#proc/get_key_bindings_by_key">get_key_bindings_by_key</a></th><td>Inverts the key_bindings list such that it can be used for key_bindings_by_key</td></tr><tr><th><a href="datum/preferences.html#proc/get_save_data_for_savefile_identifier">get_save_data_for_savefile_identifier</a></th><td>Returns which savefile to use for a given savefile identifier</td></tr><tr><th><a href="datum/preferences.html#proc/hardcore_random_setup">hardcore_random_setup</a></th><td>Setup the random hardcore quirks and give the character the new score prize.</td></tr><tr><th><a href="datum/preferences.html#proc/migrate_body_types">migrate_body_types</a></th><td>Previously, body types could only be used on non-binary characters.
PR #62733 changed this to allow all characters to use body type.
This migration moves binary-gendered characters over to the &quot;use gender&quot; body type
so that old characters are preserved.</td></tr><tr><th><a href="datum/preferences.html#proc/migrate_boolean_sound_prefs_to_default_volume">migrate_boolean_sound_prefs_to_default_volume</a></th><td></td></tr><tr><th><a href="datum/preferences.html#proc/migrate_character_to_tgui_prefs_menu">migrate_character_to_tgui_prefs_menu</a></th><td>Handle the migrations necessary from pre-tgui prefs to post-tgui prefs, for characters</td></tr><tr><th><a href="datum/preferences.html#proc/migrate_felinid_feature_keys">migrate_felinid_feature_keys</a></th><td>Rename feature_human_tail and feature_human_ears to something not stupid</td></tr><tr><th><a href="datum/preferences.html#proc/migrate_gendered_nonbinary_physique">migrate_gendered_nonbinary_physique</a></th><td>Previously, physiques only supported binary characters, so &quot;Use gender&quot; on a non-binary character played havoc due to all checks being binary (some checked for females others for males)
This caused inconsistencies when it was in play (male laughs and female screams)
Force non-binary characters to have a female physique</td></tr><tr><th><a href="datum/preferences.html#proc/migrate_legacy_sound_toggles">migrate_legacy_sound_toggles</a></th><td>Previously, sound preferences were legacy toggles.
PR #71040 changed these to modern toggles.
This migration transfers the player's existing preferences into the new toggles</td></tr><tr><th><a href="datum/preferences.html#proc/migrate_preferences_to_tgui_prefs_menu">migrate_preferences_to_tgui_prefs_menu</a></th><td>Handle the migrations necessary from pre-tgui prefs to post-tgui prefs</td></tr><tr><th><a href="datum/preferences.html#proc/migrate_quirk_to_loadout">migrate_quirk_to_loadout</a></th><td>Move quirk items into loadout items</td></tr><tr><th><a href="datum/preferences.html#proc/migrate_quirk_to_personality">migrate_quirk_to_personality</a></th><td>Replace a quirk with a personality</td></tr><tr><th><a href="datum/preferences.html#proc/randomise_appearance_prefs">randomise_appearance_prefs</a></th><td>Fully randomizes everything in the character.</td></tr><tr><th><a href="datum/preferences.html#proc/read_preference">read_preference</a></th><td>Read a /datum/preference type and return its value.
This will write to the savefile if a value was not found with the new value.</td></tr><tr><th><a href="datum/preferences.html#proc/remove_loadout_item">remove_loadout_item</a></th><td>Helper for removing a loadout item</td></tr><tr><th><a href="datum/preferences.html#proc/safe_transfer_prefs_to">safe_transfer_prefs_to</a></th><td>Sanitizes the preferences, applies the randomization prefs, and then applies the preference to the human mob.</td></tr><tr><th><a href="datum/preferences.html#proc/select_hardcore_quirks">select_hardcore_quirks</a></th><td>Goes through all quirks that can be used in hardcore mode and select some based on a random budget.
Returns the new value to be gained with this setup, plus the previously earned score.</td></tr><tr><th><a href="datum/preferences.html#proc/should_be_random_hardcore">should_be_random_hardcore</a></th><td>Returns whether the parent mob should have the random hardcore settings enabled. Assumes it has a mind.</td></tr><tr><th><a href="datum/preferences.html#proc/should_randomize">should_randomize</a></th><td>Returns if a preference should be randomized.</td></tr><tr><th><a href="datum/preferences.html#proc/update_preference">update_preference</a></th><td>Will perform an update on the preference, but not write to the savefile.
This will, for instance, update the character preference view.
Performs sanity checks.</td></tr><tr><th><a href="datum/preferences.html#proc/update_tts_blip_prefs">update_tts_blip_prefs</a></th><td>Previously, tts enabled/blip were individual buttons
PR #76558 changed them to one dropdown choice.
This migration transfers the player's existing preferences into the new dropdown</td></tr><tr><th><a href="datum/preferences.html#proc/write_preference">write_preference</a></th><td>Set a /datum/preference entry.
Returns TRUE for a successful preference application.
Returns FALSE if it is invalid.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/be_special"><aside class="declaration">var </aside>be_special <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 25"></a></h3><p>List of ROLE_X that the client wants to be eligible for</p><h3 id="var/character_data"><aside class="declaration">var </aside>character_data <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L79"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 79"></a></h3><p>The savefile relating to character preferences, PREFERENCE_CHARACTER</p><h3 id="var/character_preview_view"><aside class="declaration">var </aside>character_preview_view <aside>– /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/screen.html">screen</a>/<a href="atom/movable/screen/map_view.html">map_view</a>/<a href="atom/movable/screen/map_view/char_preview.html">char_preview</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L70"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 70"></a></h3><p>A preview of the current character</p><h3 id="var/current_window"><aside class="declaration">var </aside>current_window <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L52"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 52"></a></h3><p>The current window, PREFERENCE_TAB_* in [<code>code/__DEFINES/preferences.dm</code>]</p><h3 id="var/default_slot"><aside class="declaration">var </aside>default_slot <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L10"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 10"></a></h3><p>Ensures that we always load the last used save, QOL</p><h3 id="var/favorite_outfits"><aside class="declaration">var </aside>favorite_outfits <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L67"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 67"></a></h3><p>What outfit typepaths we've favorited in the SelectEquipment menu</p><h3 id="var/hearted"><aside class="declaration">var </aside>hearted <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L63"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 63"></a></h3><p>Someone thought we were nice! We get a little heart in OOC until we join the server past the below time (we can keep it until the end of the round otherwise)</p><h3 id="var/hearted_until"><aside class="declaration">var </aside>hearted_until <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L65"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 65"></a></h3><p>If we have a hearted commendations, we honor it every time the player loads preferences until this time has been passed</p><h3 id="var/key_bindings"><aside class="declaration">var </aside>key_bindings <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 29"></a></h3><p>Custom keybindings. Map of keybind names to keyboard inputs.
For example, by default would have &quot;swap_hands&quot; -&gt; list(&quot;X&quot;)</p><h3 id="var/key_bindings_by_key"><aside class="declaration">var </aside>key_bindings_by_key <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 33"></a></h3><p>Cached list of keybindings, mapping keys to actions.
For example, by default would have &quot;X&quot; -&gt; list(&quot;swap_hands&quot;)</p><h3 id="var/last_id"><aside class="declaration">var </aside>last_id <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L19"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 19"></a></h3><p>Last CID that this client has connected from</p><h3 id="var/last_ip"><aside class="declaration">var </aside>last_ip <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 17"></a></h3><p>Last IP that this client has connected from</p><h3 id="var/lastchangelog"><aside class="declaration">var </aside>lastchangelog <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 22"></a></h3><p>Cached changelog size, to detect new changelogs since last join</p><h3 id="var/load_and_save"><aside class="declaration">var </aside>load_and_save <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L8"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 8"></a></h3><p>Whether or not we allow saving/loading. Used for guests, if they're enabled</p><h3 id="var/max_save_slots"><aside class="declaration">var </aside>max_save_slots <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 12"></a></h3><p>The maximum number of slots we're allowed to contain</p><h3 id="var/middleware"><aside class="declaration">var </aside>middleware <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/preference_middleware.html">preference_middleware</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L73"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 73"></a></h3><p>A list of instantiated middleware</p><h3 id="var/muted"><aside class="declaration">var </aside>muted <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L15"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 15"></a></h3><p>Bitflags for communications that are muted</p><h3 id="var/path"><aside class="declaration">var </aside>path <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L6"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 6"></a></h3><p>The path to the general savefile for this datum</p><h3 id="var/recently_updated_keys"><aside class="declaration">var </aside>recently_updated_keys <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L82"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 82"></a></h3><p>A list of keys that have been updated since the last save.</p><h3 id="var/savefile"><aside class="declaration">var </aside>savefile <aside>– /<a href="datum.html">datum</a>/<a href="datum/json_savefile.html">json_savefile</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L76"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 76"></a></h3><p>The json savefile for this datum</p><h3 id="var/tainted_character_profiles"><aside class="declaration">var </aside>tainted_character_profiles <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L89"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 89"></a></h3><p>If set to TRUE, will update character_profiles on the next ui_data tick.</p><h3 id="var/value_cache"><aside class="declaration">var </aside>value_cache <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L86"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 86"></a></h3><p>A cache of preference entries to values.
Used to avoid expensive READ_FILE every time a preference is retrieved.</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_loadout_item"><aside class="declaration">proc </aside>add_loadout_item<aside>(typepath, /list/data)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/quirk_loadout_migration.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/quirk_loadout_migration.dm 14"></a></aside></h3><p>Helper for slotting in a new loadout item</p><h3 id="proc/apply_all_client_preferences"><aside class="declaration">proc </aside>apply_all_client_preferences<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L332"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 332"></a></aside></h3><p>Applies all PREFERENCE_PLAYER preferences</p><h3 id="proc/apply_character_randomization_prefs"><aside class="declaration">proc </aside>apply_character_randomization_prefs<aside>(antag_override)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/preferences_setup.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/preferences_setup.dm 11"></a></aside></h3><p>Randomizes the character according to preferences.</p><h3 id="proc/apply_prefs_to"><aside class="declaration">proc </aside>apply_prefs_to<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/character, icon_updates, /list/do_not_apply)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L515"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 515"></a></aside></h3><p>Applies the given preferences to a human mob.</p>
<p>Arguments:</p>
<ul>
<li>character - The human mob to apply the preferences to</li>
<li>icon_updates - Whether to update the mob's icons after applying preferences.
Is often skipped to save processing when an update will happen later anyway.</li>
<li>do_not_apply - A list of preference types to skip when applying preferences.</li>
</ul><h3 id="proc/check_keybindings"><aside class="declaration">proc </aside>check_keybindings<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences_savefile.dm#L172"><img src="git.png" width="16" height="16" title="code/modules/client/preferences_savefile.dm 172"></a></aside></h3><p>checks through keybindings for outdated unbound keys and updates them</p><h3 id="proc/get_default_randomization"><aside class="declaration">proc </aside>get_default_randomization<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L556"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 556"></a></aside></h3><p>Returns the default <code>randomise</code> variable ouptut</p><h3 id="proc/get_highest_priority_job"><aside class="declaration">proc </aside>get_highest_priority_job<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/preferences_setup.dm#L85"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/preferences_setup.dm 85"></a></aside></h3><p>Returns what job is marked as highest</p><h3 id="proc/get_key_bindings_by_key"><aside class="declaration">proc </aside>get_key_bindings_by_key<aside>(/list/key_bindings)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L546"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 546"></a></aside></h3><p>Inverts the key_bindings list such that it can be used for key_bindings_by_key</p><h3 id="proc/get_save_data_for_savefile_identifier"><aside class="declaration">proc </aside>get_save_data_for_savefile_identifier<aside>(savefile_identifier) <span class="as"> as </span>/list <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/_preference.dm#L233"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 233"></a></aside></h3><p>Returns which savefile to use for a given savefile identifier</p><h3 id="proc/hardcore_random_setup"><aside class="declaration">proc </aside>hardcore_random_setup<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/character)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/preferences_setup.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/preferences_setup.dm 25"></a></aside></h3><p>Setup the random hardcore quirks and give the character the new score prize.</p><h3 id="proc/migrate_body_types"><aside class="declaration">proc </aside>migrate_body_types<aside>(/list/save_data)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/body_type_migration.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/body_type_migration.dm 5"></a></aside></h3><p>Previously, body types could only be used on non-binary characters.
PR #62733 changed this to allow all characters to use body type.
This migration moves binary-gendered characters over to the &quot;use gender&quot; body type
so that old characters are preserved.</p><h3 id="proc/migrate_boolean_sound_prefs_to_default_volume"><aside class="declaration">proc </aside>migrate_boolean_sound_prefs_to_default_volume<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/sound_checkboxes_migration.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/sound_checkboxes_migration.dm 11"></a></aside></h3><ul>
<li>
<p>Pull request: #86932 Sound mixer part 1</p>
</li>
<li>
<p>Multiplies boolean sound prefs by 100</p>
</li>
<li>
<p>Changed ambience tick pref to numeric slider</p>
</li>
<li>
<p>Changed ship ambience tick pref to numeric slider</p>
</li>
<li>
<p>Changed lobby music tick pref to numeric slider</p>
</li>
<li>
<p>Changed Radio noise tick pref to numeric slider</p>
</li>
</ul><h3 id="proc/migrate_character_to_tgui_prefs_menu"><aside class="declaration">proc </aside>migrate_character_to_tgui_prefs_menu<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/tgui_prefs_migration.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/tgui_prefs_migration.dm 7"></a></aside></h3><p>Handle the migrations necessary from pre-tgui prefs to post-tgui prefs, for characters</p><h3 id="proc/migrate_felinid_feature_keys"><aside class="declaration">proc </aside>migrate_felinid_feature_keys<aside>(/list/save_data)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/human_tail_ears_migration.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/human_tail_ears_migration.dm 2"></a></aside></h3><p>Rename feature_human_tail and feature_human_ears to something not stupid</p><h3 id="proc/migrate_gendered_nonbinary_physique"><aside class="declaration">proc </aside>migrate_gendered_nonbinary_physique<aside>(/list/save_data)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/body_type_migration.dm#L14"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/body_type_migration.dm 14"></a></aside></h3><p>Previously, physiques only supported binary characters, so &quot;Use gender&quot; on a non-binary character played havoc due to all checks being binary (some checked for females others for males)
This caused inconsistencies when it was in play (male laughs and female screams)
Force non-binary characters to have a female physique</p><h3 id="proc/migrate_legacy_sound_toggles"><aside class="declaration">proc </aside>migrate_legacy_sound_toggles<aside>(/savefile/savefile)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/legacy_sound_toggles_migration.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/legacy_sound_toggles_migration.dm 5"></a></aside></h3><p>Previously, sound preferences were legacy toggles.
PR #71040 changed these to modern toggles.
This migration transfers the player's existing preferences into the new toggles</p><h3 id="proc/migrate_preferences_to_tgui_prefs_menu"><aside class="declaration">proc </aside>migrate_preferences_to_tgui_prefs_menu<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/tgui_prefs_migration.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/tgui_prefs_migration.dm 2"></a></aside></h3><p>Handle the migrations necessary from pre-tgui prefs to post-tgui prefs</p><h3 id="proc/migrate_quirk_to_loadout"><aside class="declaration">proc </aside>migrate_quirk_to_loadout<aside>(quirk_to_migrate, new_typepath, /list/data_to_migrate)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/quirk_loadout_migration.dm#L8"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/quirk_loadout_migration.dm 8"></a></aside></h3><p>Move quirk items into loadout items</p>
<p>If this is accompanied with removal of a quirk,
you don't need to worry about handling that here -
quirk sanitization happens AFTER migration</p><h3 id="proc/migrate_quirk_to_personality"><aside class="declaration">proc </aside>migrate_quirk_to_personality<aside>(quirk_to_migrate, /<a href="datum.html">datum</a>/<a href="datum/personality.html">personality</a>/new_typepath)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/quirk_personality_migration.dm#L8"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/quirk_personality_migration.dm 8"></a></aside></h3><p>Replace a quirk with a personality</p>
<p>If this is accompanied with removal of a quirk,
you don't need to worry about handling that here -
quirk sanitization happens AFTER migration</p><h3 id="proc/randomise_appearance_prefs"><aside class="declaration">proc </aside>randomise_appearance_prefs<aside>(randomize_flags)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/preferences_setup.dm#L2"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/preferences_setup.dm 2"></a></aside></h3><p>Fully randomizes everything in the character.</p><h3 id="proc/read_preference"><aside class="declaration">proc </aside>read_preference<aside>(preference_type)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/_preference.dm#L254"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 254"></a></aside></h3><p>Read a /datum/preference type and return its value.
This will write to the savefile if a value was not found with the new value.</p><h3 id="proc/remove_loadout_item"><aside class="declaration">proc </aside>remove_loadout_item<aside>(typepath)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/quirk_loadout_migration.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/quirk_loadout_migration.dm 22"></a></aside></h3><p>Helper for removing a loadout item</p><h3 id="proc/safe_transfer_prefs_to"><aside class="declaration">proc </aside>safe_transfer_prefs_to<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/character, icon_updates, is_antag)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L502"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 502"></a></aside></h3><p>Sanitizes the preferences, applies the randomization prefs, and then applies the preference to the human mob.</p><h3 id="proc/select_hardcore_quirks"><aside class="declaration">proc </aside>select_hardcore_quirks<aside>(species)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/mob/dead/new_player/preferences_setup.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/mob/dead/new_player/preferences_setup.dm 38"></a></aside></h3><p>Goes through all quirks that can be used in hardcore mode and select some based on a random budget.
Returns the new value to be gained with this setup, plus the previously earned score.</p><h3 id="proc/should_be_random_hardcore"><aside class="declaration">proc </aside>should_be_random_hardcore<aside>(/<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/job, /<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a>/mind)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences.dm#L535"><img src="git.png" width="16" height="16" title="code/modules/client/preferences.dm 535"></a></aside></h3><p>Returns whether the parent mob should have the random hardcore settings enabled. Assumes it has a mind.</p><h3 id="proc/should_randomize"><aside class="declaration">proc </aside>should_randomize<aside>(/<a href="datum.html">datum</a>/<a href="datum/preference.html">preference</a>/preference, is_antag)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/middleware/random.dm#L59"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/middleware/random.dm 59"></a></aside></h3><p>Returns if a preference should be randomized.</p><h3 id="proc/update_preference"><aside class="declaration">proc </aside>update_preference<aside>(/<a href="datum.html">datum</a>/<a href="datum/preference.html">preference</a>/preference, preference_value)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/_preference.dm#L295"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 295"></a></aside></h3><p>Will perform an update on the preference, but not write to the savefile.
This will, for instance, update the character preference view.
Performs sanity checks.</p><h3 id="proc/update_tts_blip_prefs"><aside class="declaration">proc </aside>update_tts_blip_prefs<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/migrations/tts_blip_migration.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/migrations/tts_blip_migration.dm 5"></a></aside></h3><p>Previously, tts enabled/blip were individual buttons
PR #76558 changed them to one dropdown choice.
This migration transfers the player's existing preferences into the new dropdown</p><h3 id="proc/write_preference"><aside class="declaration">proc </aside>write_preference<aside>(/<a href="datum.html">datum</a>/<a href="datum/preference.html">preference</a>/preference, preference_value)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/client/preferences/_preference.dm#L284"><img src="git.png" width="16" height="16" title="code/modules/client/preferences/_preference.dm 284"></a></aside></h3><p>Set a /datum/preference entry.
Returns TRUE for a successful preference application.
Returns FALSE if it is invalid.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>