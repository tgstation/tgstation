<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/status_effect/stun_absorption - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/status_effect/stun_absorption.html#var">Var Details</a> - <a href="datum/status_effect/stun_absorption.html#proc">Proc Details</a></header><main><h1>Stun absorption <aside>/<a href="datum.html">datum</a>/<a href="datum/status_effect.html">status_effect</a>/<a href="datum/status_effect/stun_absorption.html">stun_absorption</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L10"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 10"></a></h1><p>A status effect effectively functions as <a href="code/__DEFINES/traits/declarations.html#define/TRAIT_STUNIMMUNE" title="TRAIT_STUNIMMUNE">TRAIT_STUNIMMUNE</a>, but with additional effects tied to it,
such as showing a message on trigger / examine, or only blocking a limited amount of stuns.</p>
<p>Apply this via <a href="mob/living.html#proc/add_stun_absorption" title="/mob/living">/mob/living/proc/add_stun_absorption</a>. If you do not supply a duration,
remove this via <a href="mob/living.html#proc/remove_stun_absorption" title="/mob/living">/mob/living/proc/remove_stun_absorption</a>.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/delete_after_passing_max">delete_after_passing_max</a></th><td>If TRUE, after passing the max seconds of stuns blocked, we will delete ourself.
If FALSE, we will instead recharge after some time.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/examine_message">examine_message</a></th><td>Message shown on anyone examining the owner.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/incapacitation_effect_signals">incapacitation_effect_signals</a></th><td>Static list of all generic &quot;stun received &quot; signals that we will react to and block.
These all have the same arguments sent, so we can handle them all via the same signal handler.
Note though that we can register other signals to block effects outside of these if we want.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/max_seconds_of_stuns_blocked">max_seconds_of_stuns_blocked</a></th><td>The max number of seconds we can block before self-deleting.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/priority">priority</a></th><td>The priority of the stun absorption. Used so that multiple sources will not trigger at once.
This number is arbitrary but try to keep in sane / in line with other sources that exist.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/recharge_time">recharge_time</a></th><td>If [delete_after_passing_max] is FALSE, this is how long we will wait before recharging.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/seconds_of_stuns_absorbed">seconds_of_stuns_absorbed</a></th><td>How many total seconds of stuns that have been blocked.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/self_message">self_message</a></th><td>The message shown  to the owner when the effect triggers.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/shown_message">shown_message</a></th><td>The message shown via visible message to all nearby mobs when the effect triggers.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#var/source">source</a></th><td>The string key sourcer of the stun absorption, used for logging</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#proc/absorb_stun">absorb_stun</a></th><td>Absorb a number of seconds of stuns.
If we hit the max amount of absorption, we will qdel ourself in this proc.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#proc/can_absorb_stun">can_absorb_stun</a></th><td>Simply checks if the owner of the effect is in a valid state to absorb stuns.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#proc/recharge_absorption">recharge_absorption</a></th><td>Used in callbacks to &quot;recharge&quot; the effect after passing the max seconds of stuns blocked.</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#proc/try_absorb_generic_effect">try_absorb_generic_effect</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_GENERIC_STUN_CHECK" title="COMSIG_LIVING_GENERIC_STUN_CHECK">COMSIG_LIVING_GENERIC_STUN_CHECK</a>. (Note, this includes being stamcrit)</td></tr><tr><th><a href="datum/status_effect/stun_absorption.html#proc/try_absorb_incapacitating_effect">try_absorb_incapacitating_effect</a></th><td>Signal proc for generic stun signals being sent, such as <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_STATUS_STUN" title="COMSIG_LIVING_STATUS_STUN">COMSIG_LIVING_STATUS_STUN</a> or <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_STATUS_KNOCKDOWN" title="COMSIG_LIVING_STATUS_KNOCKDOWN">COMSIG_LIVING_STATUS_KNOCKDOWN</a>.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/delete_after_passing_max"><aside class="declaration">var </aside>delete_after_passing_max <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L33"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 33"></a></h3><p>If TRUE, after passing the max seconds of stuns blocked, we will delete ourself.
If FALSE, we will instead recharge after some time.</p><h3 id="var/examine_message"><aside class="declaration">var </aside>examine_message <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L30"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 30"></a></h3><p>Message shown on anyone examining the owner.</p><h3 id="var/incapacitation_effect_signals"><aside class="declaration">var </aside>incapacitation_effect_signals <aside>– /static/list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L40"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 40"></a></h3><p>Static list of all generic &quot;stun received &quot; signals that we will react to and block.
These all have the same arguments sent, so we can handle them all via the same signal handler.
Note though that we can register other signals to block effects outside of these if we want.</p><h3 id="var/max_seconds_of_stuns_blocked"><aside class="declaration">var </aside>max_seconds_of_stuns_blocked <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 24"></a></h3><p>The max number of seconds we can block before self-deleting.</p><h3 id="var/priority"><aside class="declaration">var </aside>priority <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 20"></a></h3><p>The priority of the stun absorption. Used so that multiple sources will not trigger at once.
This number is arbitrary but try to keep in sane / in line with other sources that exist.</p><h3 id="var/recharge_time"><aside class="declaration">var </aside>recharge_time <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L35"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 35"></a></h3><p>If [delete_after_passing_max] is FALSE, this is how long we will wait before recharging.</p><h3 id="var/seconds_of_stuns_absorbed"><aside class="declaration">var </aside>seconds_of_stuns_absorbed <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 22"></a></h3><p>How many total seconds of stuns that have been blocked.</p><h3 id="var/self_message"><aside class="declaration">var </aside>self_message <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L28"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 28"></a></h3><p>The message shown  to the owner when the effect triggers.</p><h3 id="var/shown_message"><aside class="declaration">var </aside>shown_message <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L26"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 26"></a></h3><p>The message shown via visible message to all nearby mobs when the effect triggers.</p><h3 id="var/source"><aside class="declaration">var </aside>source <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L17"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 17"></a></h3><p>The string key sourcer of the stun absorption, used for logging</p><h2 id="proc">Proc Details</h2><h3 id="proc/absorb_stun"><aside class="declaration">proc </aside>absorb_stun<aside>(amount)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L150"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 150"></a></aside></h3><p>Absorb a number of seconds of stuns.
If we hit the max amount of absorption, we will qdel ourself in this proc.</p>
<ul>
<li>amount - this is the number of deciseconds being absorbed at once.</li>
</ul>
<p>Returns TRUE on successful absorption, or FALSE otherwise.</p><h3 id="proc/can_absorb_stun"><aside class="declaration">proc </aside>can_absorb_stun<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L135"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 135"></a></aside></h3><p>Simply checks if the owner of the effect is in a valid state to absorb stuns.</p><h3 id="proc/recharge_absorption"><aside class="declaration">proc </aside>recharge_absorption<aside>(amount)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L193"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 193"></a></aside></h3><p>Used in callbacks to &quot;recharge&quot; the effect after passing the max seconds of stuns blocked.</p><h3 id="proc/try_absorb_generic_effect"><aside class="declaration">proc </aside>try_absorb_generic_effect<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/source, check_flags)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L122"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 122"></a></aside></h3><p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_GENERIC_STUN_CHECK" title="COMSIG_LIVING_GENERIC_STUN_CHECK">COMSIG_LIVING_GENERIC_STUN_CHECK</a>. (Note, this includes being stamcrit)</p>
<p>Whenever a generic stun check is done against us, we'll just try to block it with &quot;0 second&quot; stun.
This prevents spam us from showing feedback messages, and is for the generic &quot;can be stunned&quot; check.</p><h3 id="proc/try_absorb_incapacitating_effect"><aside class="declaration">proc </aside>try_absorb_incapacitating_effect<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/source, amount, ignore_canstun)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/status_effects/buffs/stun_absorption.dm#L100"><img src="git.png" width="16" height="16" title="code/datums/status_effects/buffs/stun_absorption.dm 100"></a></aside></h3><p>Signal proc for generic stun signals being sent, such as <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_STATUS_STUN" title="COMSIG_LIVING_STATUS_STUN">COMSIG_LIVING_STATUS_STUN</a> or <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_STATUS_KNOCKDOWN" title="COMSIG_LIVING_STATUS_KNOCKDOWN">COMSIG_LIVING_STATUS_KNOCKDOWN</a>.</p>
<p>When we get stunned, we will try to absorb a number of seconds from the stun, and return [COMPONENT_NO_STUN] if we succeed.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>