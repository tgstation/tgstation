<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/surgery_operation - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/surgery_operation.html#var">Var Details</a> - <a href="datum/surgery_operation.html#proc">Proc Details</a></header><main><h1>surgery_operation <aside>/<a href="datum.html">datum</a>/<a href="datum/surgery_operation.html">surgery_operation</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L388"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 388"></a></h1><h2 id="surgery-operation-datum">Surgery operation datum</h2>
<p>A singleton datum which represents a surgical operation that can be performed on a mob.</p>
<p>Surgery operations can be something simple, like moving between surgery states (tend wounds, clamp vessels),
or more complex, like outright replacing limbs or organs. As such the datum is very flexible.</p>
<p>At most basic, you must implement the vars:</p>
<ul>
<li>
<ul>
<li><a href="datum/surgery_operation.html#var/name" title="/datum/surgery_operation">name</a></li>
</ul>
</li>
<li>
<ul>
<li><a href="datum/surgery_operation.html#var/desc" title="/datum/surgery_operation">desc</a></li>
</ul>
</li>
<li>
<ul>
<li><a href="datum/surgery_operation.html#var/implements" title="/datum/surgery_operation">implements</a>
And the procs:</li>
</ul>
</li>
<li>
<ul>
<li><a href="datum/surgery_operation.html#proc/on_success" title="/datum/surgery_operation">on success</a> - put the effects of the operation here
Other noteworthy vars and procs you probably want to implement or override:</li>
</ul>
</li>
<li>
<ul>
<li><a href="datum/surgery_operation.html#var/operation_flags" title="/datum/surgery_operation">operation flags</a> - flags modifying the behavior of the operation</li>
</ul>
</li>
<li>
<ul>
<li><a href="datum/surgery_operation.html#var/all_surgery_states_required" title="/datum/surgery_operation">required surgery state</a> - target must have ALL of these states to be eligible for the operation</li>
</ul>
</li>
<li>
<ul>
<li><a href="datum/surgery_operation.html#var/any_surgery_states_blocked" title="/datum/surgery_operation">blocked surgery state</a> - target must NOT have ANY these states to be eligible for the operation</li>
</ul>
</li>
<li>
<ul>
<li><a href="datum/surgery_operation.html#proc/state_check" title="/datum/surgery_operation">state check</a> - extra checks for if the operating target is valid</li>
</ul>
</li>
<li>
<ul>
<li><a href="datum/surgery_operation.html#proc/get_default_radial_image" title="/datum/surgery_operation">get default radial image</a> - what icon to use for this operation on the radial menu</li>
</ul>
</li>
</ul>
<p>It's recommended to work off of <a href="datum/surgery_operation/limb.html" title="/datum/surgery_operation/limb">/datum/surgery_operation/limb</a> or <a href="datum/surgery_operation/organ.html" title="/datum/surgery_operation/organ">/datum/surgery_operation/organ</a>
as they implement a lot of common functionality for targeting limbs or organs for you.</p>
<p>See also <a href="datum/surgery_operation/basic.html" title="/datum/surgery_operation/basic">/datum/surgery_operation/basic</a>, which is a bit more complex to use
but allows for operations to target any mob type, rather than only those with limbs or organs.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/surgery_operation.html#var/all_surgery_states_required">all_surgery_states_required</a></th><td>The target must have ALL of these surgery states for the operation to be available</td></tr><tr><th><a href="datum/surgery_operation.html#var/any_surgery_states_blocked">any_surgery_states_blocked</a></th><td>The target must NOT have ANY of these surgery states for the operation to be available</td></tr><tr><th><a href="datum/surgery_operation.html#var/any_surgery_states_required">any_surgery_states_required</a></th><td>The target must have ANY of these surgery states for the operation to be available</td></tr><tr><th><a href="datum/surgery_operation.html#var/desc">desc</a></th><td>Required - Description of the operation, keep it short and format it like an action - &quot;Amputate a patient's limb.&quot;, &quot;Remove a patient's organ.&quot;.</td></tr><tr><th><a href="datum/surgery_operation.html#var/failure_sound">failure_sound</a></th><td>SFX played on failure, after the do-after
Can be a sound path or an assoc list of item typepath to sound path to make different sounds for different tools</td></tr><tr><th><a href="datum/surgery_operation.html#var/implements">implements</a></th><td>What tool(s) can be used to perform this operation?</td></tr><tr><th><a href="datum/surgery_operation.html#var/main_option">main_option</a></th><td>The default radial menu choice for this operation, lazily created on first use
Some subtypes won't have this set as they provide their own options</td></tr><tr><th><a href="datum/surgery_operation.html#var/name">name</a></th><td>Required - Name of the operation, keep it short and format it like an action - &quot;amputate limb&quot;, &quot;remove organ&quot;
Don't capitalize it, it will be capitalized automatically where necessary.</td></tr><tr><th><a href="datum/surgery_operation.html#var/operation_flags">operation_flags</a></th><td>Flags modifying the behavior of this operation</td></tr><tr><th><a href="datum/surgery_operation.html#var/preop_sound">preop_sound</a></th><td>SFX played before the do-after begins
Can be a sound path or an assoc list of item typepath to sound path to make different sounds for different tools</td></tr><tr><th><a href="datum/surgery_operation.html#var/replaced_by">replaced_by</a></th><td>Typepath of a surgical operation that supersedes this one
If this operation and the replaced_by operation are both available, only the replaced_by one will be usable</td></tr><tr><th><a href="datum/surgery_operation.html#var/rnd_desc">rnd_desc</a></th><td>Optional - the description of the operation shown in RND consoles and the operating computer.
Here is where you may want to provide more information on why an operation is done (&quot;Fixes a broken liver&quot;) or special requirements (&quot;Requires Synthflesh&quot;).
Use &quot;the patient&quot; instead of &quot;a patient&quot; to keep it specific.</td></tr><tr><th><a href="datum/surgery_operation.html#var/rnd_name">rnd_name</a></th><td>Optional - the name of the operation shown in RND consoles and the operating computer.
You can get fancier here, givin an official surgery name (&quot;Lobectomy&quot;) or rephrase it to be more descriptive (&quot;Brain Lobectomy&quot;).
Capitalize it as necessary.</td></tr><tr><th><a href="datum/surgery_operation.html#var/success_sound">success_sound</a></th><td>SFX played on success, after the do-after
Can be a sound path or an assoc list of item typepath to sound path to make different sounds for different tools</td></tr><tr><th><a href="datum/surgery_operation.html#var/surgery_failure_mood_event">surgery_failure_mood_event</a></th><td>Which mood event to give the consious patient when surgery fails.
Lasts muuuuuch longer.</td></tr><tr><th><a href="datum/surgery_operation.html#var/surgery_started_mood_event">surgery_started_mood_event</a></th><td>Which mood event to give the patient when surgery is starting while they're conscious.
This should be permanent/not have a timer until the surgery either succeeds or fails, as those states will immediately replace it.
Mostly just flavor text.</td></tr><tr><th><a href="datum/surgery_operation.html#var/surgery_success_mood_event">surgery_success_mood_event</a></th><td>Which mood event to give the conscious patient when surgery succeeds.
Lasts far shorter than if it failed.</td></tr><tr><th><a href="datum/surgery_operation.html#var/time">time</a></th><td>Base time to perform this operation</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/surgery_operation.html#proc/add_radial_overlays">add_radial_overlays</a></th><td>Helper for constructing overlays to apply to a radial image</td></tr><tr><th><a href="datum/surgery_operation.html#proc/all_blocked_strings">all_blocked_strings</a></th><td>Returns a list of strings indicating blocked states for this operation
&quot;Blocked requirements&quot; are formatted as &quot;However, none of the following may be true:&quot;</td></tr><tr><th><a href="datum/surgery_operation.html#proc/all_required_strings">all_required_strings</a></th><td>Returns a list of strings indicating requirements for this operation
&quot;All requirements&quot; are formatted as &quot;All of the following must be true:&quot;</td></tr><tr><th><a href="datum/surgery_operation.html#proc/any_optional_strings">any_optional_strings</a></th><td>Returns a list of strings indicating optional conditions for this operation
&quot;Optional conditions&quot; are formatted as &quot;Additionally, any of the following may be true:&quot;</td></tr><tr><th><a href="datum/surgery_operation.html#proc/any_required_strings">any_required_strings</a></th><td>Returns a list of strings indicating any of the requirements for this operation
&quot;Any requirements&quot; are formatted as &quot;At least one of the following must be true:&quot;</td></tr><tr><th><a href="datum/surgery_operation.html#proc/can_loop">can_loop</a></th><td>Called after an operation to check if it can be repeated/looped</td></tr><tr><th><a href="datum/surgery_operation.html#proc/check_availability">check_availability</a></th><td>Checks to see if this operation can be performed
This is the main entry point for checking availability</td></tr><tr><th><a href="datum/surgery_operation.html#proc/display_pain">display_pain</a></th><td>Display pain message to the target based on their traits and condition</td></tr><tr><th><a href="datum/surgery_operation.html#proc/display_results">display_results</a></th><td>Used to display messages to the surgeon and patient</td></tr><tr><th><a href="datum/surgery_operation.html#proc/failure">failure</a></th><td>Called when the operation fails
Don't touch this proc, override on_failure() instead</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_any_tool">get_any_tool</a></th><td>For surgery operations that can be performed with any item, this explains what kind of item is needed</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_default_radial_image">get_default_radial_image</a></th><td>Returns what icon this surgery uses by default on the radial wheel if it does not implement its own radial options</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_generic_limb_radial_image">get_generic_limb_radial_image</a></th><td>Helper to get a generic limb radial image based on body zone</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_location_modifier">get_location_modifier</a></th><td>Gets the surgery speed modifier for a given mob, based off what sort of table/bed/whatever is on their turf.</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_mob_surgery_speed_mod">get_mob_surgery_speed_mod</a></th><td>Returns a time modifier based on the mob's status</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_operation_target">get_operation_target</a></th><td>Gets what movable is being operated on by a surgeon during this operation
Determines what gets passed into the try_perform() proc
If null is returned, the operation cannot be performed</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_patient">get_patient</a></th><td>Helper for getting the mob who is ultimately being operated on, given the movable that is truly being operated on.
For example in limb surgeries this would return the mob the limb is attached to.</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_radial_options">get_radial_options</a></th><td>Return a radial slice, a list of radial slices, or an assoc list of radial slice to operation info</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_recommended_tool">get_recommended_tool</a></th><td>Returns the name of whatever tool is recommended for this operation, such as &quot;hemostat&quot;</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_requirements">get_requirements</a></th><td>Return a list of lists of strings indicating the various requirements for this operation</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_surgeon_surgery_speed_mod">get_surgeon_surgery_speed_mod</a></th><td>Returns a time modifier based on the surgeon's status</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_time_modifiers">get_time_modifiers</a></th><td>Collates all time modifiers for this operation and returns the final modifier</td></tr><tr><th><a href="datum/surgery_operation.html#proc/get_tool_quality">get_tool_quality</a></th><td>Returns the quality of the passed tool for this operation
Quality directly affects the time taken to perform the operation</td></tr><tr><th><a href="datum/surgery_operation.html#proc/has_any_surgery_state">has_any_surgery_state</a></th><td>Check if the movable being operated on has any of the passed surgery states</td></tr><tr><th><a href="datum/surgery_operation.html#proc/has_surgery_state">has_surgery_state</a></th><td>Check if the movable being operated on has all the passed surgery states</td></tr><tr><th><a href="datum/surgery_operation.html#proc/is_available">is_available</a></th><td>Checks to see if this operation can be performed on the provided target</td></tr><tr><th><a href="datum/surgery_operation.html#proc/locate_operating_computer">locate_operating_computer</a></th><td>Helper for getting an operating compupter the patient is linked to</td></tr><tr><th><a href="datum/surgery_operation.html#proc/on_failure">on_failure</a></th><td>Used to customize behavior when the operation fails</td></tr><tr><th><a href="datum/surgery_operation.html#proc/on_preop">on_preop</a></th><td>Used to customize behavior when the operation starts</td></tr><tr><th><a href="datum/surgery_operation.html#proc/on_success">on_success</a></th><td>Used to customize behavior when the operation is successful</td></tr><tr><th><a href="datum/surgery_operation.html#proc/operate_check">operate_check</a></th><td>Called during the do-after to check if the operation can continue</td></tr><tr><th><a href="datum/surgery_operation.html#proc/play_operation_sound">play_operation_sound</a></th><td>Plays a sound for the operation based on the tool used</td></tr><tr><th><a href="datum/surgery_operation.html#proc/pre_preop">pre_preop</a></th><td>Allows for any extra checks or setup when the operation starts
If you want user input before for an operation, do it here</td></tr><tr><th><a href="datum/surgery_operation.html#proc/show_as_next_step">show_as_next_step</a></th><td>Called by operating computers to hint that this surgery could come next given the target's current state</td></tr><tr><th><a href="datum/surgery_operation.html#proc/snowflake_check_availability">snowflake_check_availability</a></th><td>Snowflake checks for surgeries which need many interconnected conditions to be met</td></tr><tr><th><a href="datum/surgery_operation.html#proc/start_operation">start_operation</a></th><td>Called when the operation initiates
Don't touch this proc, override on_preop() instead</td></tr><tr><th><a href="datum/surgery_operation.html#proc/state_check">state_check</a></th><td>Any operation specific state checks, such as checking for traits or more complex state requirements</td></tr><tr><th><a href="datum/surgery_operation.html#proc/success">success</a></th><td>Called when the operation is successful
Don't touch this proc, override on_success() instead</td></tr><tr><th><a href="datum/surgery_operation.html#proc/tool_check">tool_check</a></th><td>Checks to see if the provided tool is valid for this operation
You can override this to add more specific checks, such as checking sharpness</td></tr><tr><th><a href="datum/surgery_operation.html#proc/try_perform">try_perform</a></th><td>The actual chain of performing the operation</td></tr><tr><th><a href="datum/surgery_operation.html#proc/update_surgery_mood">update_surgery_mood</a></th><td>Updates a patient's mood based on the surgery state and their traits</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/all_surgery_states_required"><aside class="declaration">var </aside>all_surgery_states_required <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L431"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 431"></a></h3><p>The target must have ALL of these surgery states for the operation to be available</p><h3 id="var/any_surgery_states_blocked"><aside class="declaration">var </aside>any_surgery_states_blocked <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L435"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 435"></a></h3><p>The target must NOT have ANY of these surgery states for the operation to be available</p><h3 id="var/any_surgery_states_required"><aside class="declaration">var </aside>any_surgery_states_required <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L433"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 433"></a></h3><p>The target must have ANY of these surgery states for the operation to be available</p><h3 id="var/desc"><aside class="declaration">var </aside>desc <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L395"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 395"></a></h3><p>Required - Description of the operation, keep it short and format it like an action - &quot;Amputate a patient's limb.&quot;, &quot;Remove a patient's organ.&quot;.</p><h3 id="var/failure_sound"><aside class="declaration">var </aside>failure_sound <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L449"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 449"></a></h3><p>SFX played on failure, after the do-after
Can be a sound path or an assoc list of item typepath to sound path to make different sounds for different tools</p><h3 id="var/implements"><aside class="declaration">var </aside>implements <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L423"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 423"></a></h3><p>What tool(s) can be used to perform this operation?</p>
<p>Assoc list of item typepath, TOOL_X, or IMPLEMENT_HAND to a multiplier for how effective that tool is at performing the operation.
For example, list(TOOL_SCALPEL = 2, TOOL_SAW = 0.5) means that you can use a scalpel to operate, and it will double the time the operation takes.
Likewise using a saw will halve the time it takes. If a tool is not listed, it cannot be used for this operation.</p>
<p>Order matters! If a tool matches multiple entries, the first one will always be used.
For example, if you have list(TOOL_SCREWDRIVER = 2, /obj/item/screwdriver = 1), and use a screwdriver
it will use the TOOL_SCREWDRIVER modifier, making your operation 2x slower, even though the latter entry would have been faster.</p>
<p>For this, it is handy to keep in mind SURGERY_MODIFIER_FAILURE_THRESHOLD.
While speeds are soft capped and cannot be reduced beyond this point, larger modifiers still increase failure chances.</p>
<p>Lastly, while most operations have its main tool with a 1x modifier (representing the &quot;intended&quot; tool),
some will have its main tool's multiplier above or below 1x to represent an innately easier or harder operation</p><h3 id="var/main_option"><aside class="declaration">var </aside>main_option <aside>– /<a href="datum.html">datum</a>/<a href="datum/radial_menu_choice.html">radial_menu_choice</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L453"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 453"></a></h3><p>The default radial menu choice for this operation, lazily created on first use
Some subtypes won't have this set as they provide their own options</p><h3 id="var/name"><aside class="declaration">var </aside>name <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L392"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 392"></a></h3><p>Required - Name of the operation, keep it short and format it like an action - &quot;amputate limb&quot;, &quot;remove organ&quot;
Don't capitalize it, it will be capitalized automatically where necessary.</p><h3 id="var/operation_flags"><aside class="declaration">var </aside>operation_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L428"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 428"></a></h3><p>Flags modifying the behavior of this operation</p><h3 id="var/preop_sound"><aside class="declaration">var </aside>preop_sound <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L443"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 443"></a></h3><p>SFX played before the do-after begins
Can be a sound path or an assoc list of item typepath to sound path to make different sounds for different tools</p><h3 id="var/replaced_by"><aside class="declaration">var </aside>replaced_by <aside>– /<a href="datum.html">datum</a>/<a href="datum/surgery_operation.html">surgery_operation</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L439"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 439"></a></h3><p>Typepath of a surgical operation that supersedes this one
If this operation and the replaced_by operation are both available, only the replaced_by one will be usable</p><h3 id="var/rnd_desc"><aside class="declaration">var </aside>rnd_desc <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L404"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 404"></a></h3><p>Optional - the description of the operation shown in RND consoles and the operating computer.
Here is where you may want to provide more information on why an operation is done (&quot;Fixes a broken liver&quot;) or special requirements (&quot;Requires Synthflesh&quot;).
Use &quot;the patient&quot; instead of &quot;a patient&quot; to keep it specific.</p><h3 id="var/rnd_name"><aside class="declaration">var </aside>rnd_name <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L400"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 400"></a></h3><p>Optional - the name of the operation shown in RND consoles and the operating computer.
You can get fancier here, givin an official surgery name (&quot;Lobectomy&quot;) or rephrase it to be more descriptive (&quot;Brain Lobectomy&quot;).
Capitalize it as necessary.</p><h3 id="var/success_sound"><aside class="declaration">var </aside>success_sound <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L446"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 446"></a></h3><p>SFX played on success, after the do-after
Can be a sound path or an assoc list of item typepath to sound path to make different sounds for different tools</p><h3 id="var/surgery_failure_mood_event"><aside class="declaration">var </aside>surgery_failure_mood_event <aside>– /<a href="datum.html">datum</a>/<a href="datum/mood_event.html">mood_event</a>/surgery</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L464"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 464"></a></h3><p>Which mood event to give the consious patient when surgery fails.
Lasts muuuuuch longer.</p><h3 id="var/surgery_started_mood_event"><aside class="declaration">var </aside>surgery_started_mood_event <aside>– /<a href="datum.html">datum</a>/<a href="datum/mood_event.html">mood_event</a>/surgery</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L458"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 458"></a></h3><p>Which mood event to give the patient when surgery is starting while they're conscious.
This should be permanent/not have a timer until the surgery either succeeds or fails, as those states will immediately replace it.
Mostly just flavor text.</p><h3 id="var/surgery_success_mood_event"><aside class="declaration">var </aside>surgery_success_mood_event <aside>– /<a href="datum.html">datum</a>/<a href="datum/mood_event.html">mood_event</a>/surgery</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L461"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 461"></a></h3><p>Which mood event to give the conscious patient when surgery succeeds.
Lasts far shorter than if it failed.</p><h3 id="var/time"><aside class="declaration">var </aside>time <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L425"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 425"></a></h3><p>Base time to perform this operation</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_radial_overlays"><aside class="declaration">proc </aside>add_radial_overlays<aside>(/list/overlay_icons)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L714"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 714"></a></aside></h3><p>Helper for constructing overlays to apply to a radial image</p>
<p>Input can be</p>
<ul>
<li>
<ul>
<li>An atom typepath</li>
</ul>
</li>
<li>
<ul>
<li>An atom instance</li>
</ul>
</li>
<li>
<ul>
<li>Another image</li>
</ul>
</li>
</ul>
<p>Returns a list of images</p><h3 id="proc/all_blocked_strings"><aside class="declaration">proc </aside>all_blocked_strings<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L664"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 664"></a></aside></h3><p>Returns a list of strings indicating blocked states for this operation
&quot;Blocked requirements&quot; are formatted as &quot;However, none of the following may be true:&quot;</p><h3 id="proc/all_required_strings"><aside class="declaration">proc </aside>all_required_strings<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L629"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 629"></a></aside></h3><p>Returns a list of strings indicating requirements for this operation
&quot;All requirements&quot; are formatted as &quot;All of the following must be true:&quot;</p><h3 id="proc/any_optional_strings"><aside class="declaration">proc </aside>any_optional_strings<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L656"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 656"></a></aside></h3><p>Returns a list of strings indicating optional conditions for this operation
&quot;Optional conditions&quot; are formatted as &quot;Additionally, any of the following may be true:&quot;</p><h3 id="proc/any_required_strings"><aside class="declaration">proc </aside>any_required_strings<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L637"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 637"></a></aside></h3><p>Returns a list of strings indicating any of the requirements for this operation
&quot;Any requirements&quot; are formatted as &quot;At least one of the following must be true:&quot;</p><h3 id="proc/can_loop"><aside class="declaration">proc </aside>can_loop<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/patient, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L932"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 932"></a></aside></h3><p>Called after an operation to check if it can be repeated/looped</p><h3 id="proc/check_availability"><aside class="declaration">proc </aside>check_availability<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/patient, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, operated_zone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L470"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 470"></a></aside></h3><p>Checks to see if this operation can be performed
This is the main entry point for checking availability</p><h3 id="proc/display_pain"><aside class="declaration">proc </aside>display_pain<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/target, pain_message, mechanical_surgery)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L998"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 998"></a></aside></h3><p>Display pain message to the target based on their traits and condition</p><h3 id="proc/display_results"><aside class="declaration">proc </aside>display_results<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/target, self_message, detailed_message, vague_message, target_detailed)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L967"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 967"></a></aside></h3><p>Used to display messages to the surgeon and patient</p><h3 id="proc/failure"><aside class="declaration">proc </aside>failure<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1164"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1164"></a></aside></h3><p>Called when the operation fails
Don't touch this proc, override on_failure() instead</p><h3 id="proc/get_any_tool"><aside class="declaration">proc </aside>get_any_tool<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L612"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 612"></a></aside></h3><p>For surgery operations that can be performed with any item, this explains what kind of item is needed</p><h3 id="proc/get_default_radial_image"><aside class="declaration">proc </aside>get_default_radial_image<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L688"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 688"></a></aside></h3><p>Returns what icon this surgery uses by default on the radial wheel if it does not implement its own radial options</p>
<p>Also used when generating icons for the wiki</p><h3 id="proc/get_generic_limb_radial_image"><aside class="declaration">proc </aside>get_generic_limb_radial_image<aside>(body_zone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L692"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 692"></a></aside></h3><p>Helper to get a generic limb radial image based on body zone</p><h3 id="proc/get_location_modifier"><aside class="declaration">proc </aside>get_location_modifier<aside>(/<a href="turf.html">turf</a>/operation_turf, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/patient, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L785"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 785"></a></aside></h3><p>Gets the surgery speed modifier for a given mob, based off what sort of table/bed/whatever is on their turf.</p><h3 id="proc/get_mob_surgery_speed_mod"><aside class="declaration">proc </aside>get_mob_surgery_speed_mod<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/patient, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L755"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 755"></a></aside></h3><p>Returns a time modifier based on the mob's status</p><h3 id="proc/get_operation_target"><aside class="declaration">proc </aside>get_operation_target<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, body_zone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L812"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 812"></a></aside></h3><p>Gets what movable is being operated on by a surgeon during this operation
Determines what gets passed into the try_perform() proc
If null is returned, the operation cannot be performed</p>
<ul>
<li>operating_on - The mob or detached bodypart being operated on</li>
<li>body_zone - The body zone being operated on</li>
</ul>
<p>Returns the atom/movable being operated on</p><h3 id="proc/get_patient"><aside class="declaration">proc </aside>get_patient<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on) <span class="as"> as </span>/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1049"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1049"></a></aside></h3><p>Helper for getting the mob who is ultimately being operated on, given the movable that is truly being operated on.
For example in limb surgeries this would return the mob the limb is attached to.</p><h3 id="proc/get_radial_options"><aside class="declaration">proc </aside>get_radial_options<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/tool, operating_zone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L529"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 529"></a></aside></h3><p>Return a radial slice, a list of radial slices, or an assoc list of radial slice to operation info</p>
<p>By default it returns a single option with the operation name and description,
but you can override this proc to return multiple options for one operation, like selecting which organ to operate on.</p><h3 id="proc/get_recommended_tool"><aside class="declaration">proc </aside>get_recommended_tool<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L596"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 596"></a></aside></h3><p>Returns the name of whatever tool is recommended for this operation, such as &quot;hemostat&quot;</p><h3 id="proc/get_requirements"><aside class="declaration">proc </aside>get_requirements<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L618"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 618"></a></aside></h3><p>Return a list of lists of strings indicating the various requirements for this operation</p><h3 id="proc/get_surgeon_surgery_speed_mod"><aside class="declaration">proc </aside>get_surgeon_surgery_speed_mod<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/patient, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L767"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 767"></a></aside></h3><p>Returns a time modifier based on the surgeon's status</p><h3 id="proc/get_time_modifiers"><aside class="declaration">proc </aside>get_time_modifiers<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L738"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 738"></a></aside></h3><p>Collates all time modifiers for this operation and returns the final modifier</p><h3 id="proc/get_tool_quality"><aside class="declaration">proc </aside>get_tool_quality<aside>(tool)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L511"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 511"></a></aside></h3><p>Returns the quality of the passed tool for this operation
Quality directly affects the time taken to perform the operation</p>
<p>0 = unusable
1 = standard quality</p><h3 id="proc/has_any_surgery_state"><aside class="declaration">proc </aside>has_any_surgery_state<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, state)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L574"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 574"></a></aside></h3><p>Check if the movable being operated on has any of the passed surgery states</p><h3 id="proc/has_surgery_state"><aside class="declaration">proc </aside>has_surgery_state<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, state)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L569"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 569"></a></aside></h3><p>Check if the movable being operated on has all the passed surgery states</p><h3 id="proc/is_available"><aside class="declaration">proc </aside>is_available<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, operated_zone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L541"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 541"></a></aside></h3><p>Checks to see if this operation can be performed on the provided target</p><h3 id="proc/locate_operating_computer"><aside class="declaration">proc </aside>locate_operating_computer<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1053"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1053"></a></aside></h3><p>Helper for getting an operating compupter the patient is linked to</p><h3 id="proc/on_failure"><aside class="declaration">proc </aside>on_failure<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1184"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1184"></a></aside></h3><p>Used to customize behavior when the operation fails</p>
<p>total_penalty_modifier is the final modifier applied to the time taken to perform the operation,
and it can be interpreted as how badly the operation was performed</p>
<p>At its lowest, it will be just above 2.5 (the threshold for success), and can go up to infinity (theoretically)</p><h3 id="proc/on_preop"><aside class="declaration">proc </aside>on_preop<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1116"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1116"></a></aside></h3><p>Used to customize behavior when the operation starts</p><h3 id="proc/on_success"><aside class="declaration">proc </aside>on_success<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1148"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1148"></a></aside></h3><p>Used to customize behavior when the operation is successful</p><h3 id="proc/operate_check"><aside class="declaration">proc </aside>operate_check<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/patient, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L937"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 937"></a></aside></h3><p>Called during the do-after to check if the operation can continue</p><h3 id="proc/play_operation_sound"><aside class="declaration">proc </aside>play_operation_sound<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, sound_or_sound_list)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1025"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1025"></a></aside></h3><p>Plays a sound for the operation based on the tool used</p><h3 id="proc/pre_preop"><aside class="declaration">proc </aside>pre_preop<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L962"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 962"></a></aside></h3><p>Allows for any extra checks or setup when the operation starts
If you want user input before for an operation, do it here</p>
<p>This proc can sleep, sanity checks are automatically performed after it completes</p>
<p>Return FALSE to cancel the operation
Return TRUE to continue</p><h3 id="proc/show_as_next_step"><aside class="declaration">proc </aside>show_as_next_step<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/potential_target, operated_zone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L818"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 818"></a></aside></h3><p>Called by operating computers to hint that this surgery could come next given the target's current state</p><h3 id="proc/snowflake_check_availability"><aside class="declaration">proc </aside>snowflake_check_availability<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, operated_zone)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L500"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 500"></a></aside></h3><p>Snowflake checks for surgeries which need many interconnected conditions to be met</p><h3 id="proc/start_operation"><aside class="declaration">proc </aside>start_operation<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1097"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1097"></a></aside></h3><p>Called when the operation initiates
Don't touch this proc, override on_preop() instead</p><h3 id="proc/state_check"><aside class="declaration">proc </aside>state_check<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L581"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 581"></a></aside></h3><p>Any operation specific state checks, such as checking for traits or more complex state requirements</p><h3 id="proc/success"><aside class="declaration">proc </aside>success<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1132"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1132"></a></aside></h3><p>Called when the operation is successful
Don't touch this proc, override on_success() instead</p><h3 id="proc/tool_check"><aside class="declaration">proc </aside>tool_check<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/tool)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L589"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 589"></a></aside></h3><p>Checks to see if the provided tool is valid for this operation
You can override this to add more specific checks, such as checking sharpness</p><h3 id="proc/try_perform"><aside class="declaration">proc </aside>try_perform<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/operating_on, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/surgeon, tool, /list/operation_args)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L833"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 833"></a></aside></h3><p>The actual chain of performing the operation</p>
<ul>
<li>operating_on - The atom being operated on, probably a bodypart or occasionally a mob directly</li>
<li>surgeon - The mob performing the operation</li>
<li>tool - The tool being used to perform the operation. CAN BE A STRING, ie, IMPLEMENT_HAND, be careful</li>
<li>operation_args - Additional arguments passed into the operation. Contains largely niche info that only certain operations care about or can be accessed through other means</li>
</ul>
<p>Returns an item interaction flag - intended to be invoked from the interaction chain</p><h3 id="proc/update_surgery_mood"><aside class="declaration">proc </aside>update_surgery_mood<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/patient, surgery_state)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/modules/surgery/operations/_operation.dm#L1068"><img src="git.png" width="16" height="16" title="code/modules/surgery/operations/_operation.dm 1068"></a></aside></h3><p>Updates a patient's mood based on the surgery state and their traits</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>