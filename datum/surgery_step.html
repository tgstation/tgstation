<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/surgery_step - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/surgery_step.html#var">Var Details</a> - <a href="datum/surgery_step.html#proc">Proc Details</a></header><main><h1>surgery_step <aside>/<a href="datum.html">datum</a>/<a href="datum/surgery_step.html">surgery_step</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/surgery/surgery_step.dm#L6"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_step.dm 6"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/surgery_step.html#var/surgery_effects_mood">surgery_effects_mood</a></th><td>If the surgery causes mood changes if the patient is conscious.</td></tr><tr><th><a href="datum/surgery_step.html#var/surgery_failure_mood_event">surgery_failure_mood_event</a></th><td>Which mood event to give the consious patient when surgery fails. Lasts muuuuuch longer.</td></tr><tr><th><a href="datum/surgery_step.html#var/surgery_started_mood_event">surgery_started_mood_event</a></th><td>Which mood event to give the patient when surgery is starting while they're conscious. This should be permanent/not have a timer until the surgery either succeeds or fails, as those states will immediately replace it. Mostly just flavor text.</td></tr><tr><th><a href="datum/surgery_step.html#var/surgery_success_mood_event">surgery_success_mood_event</a></th><td>Which mood event to give the conscious patient when surgery succeeds. Lasts far shorter than if it failed.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/surgery_step.html#proc/display_pain">display_pain</a></th><td>Sends a pain message to the target, including a chance of screaming.</td></tr><tr><th><a href="datum/surgery_step.html#proc/update_surgery_mood">update_surgery_mood</a></th><td>Handles updating the mob's mood depending on the surgery states.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/surgery_effects_mood"><aside class="declaration">var </aside>surgery_effects_mood <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/surgery/surgery_step.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_step.dm 21"></a></h3><p>If the surgery causes mood changes if the patient is conscious.</p><h3 id="var/surgery_failure_mood_event"><aside class="declaration">var </aside>surgery_failure_mood_event <aside>– /<a href="datum.html">datum</a>/<a href="datum/mood_event.html">mood_event</a>/surgery</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/surgery/surgery_step.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_step.dm 27"></a></h3><p>Which mood event to give the consious patient when surgery fails. Lasts muuuuuch longer.</p><h3 id="var/surgery_started_mood_event"><aside class="declaration">var </aside>surgery_started_mood_event <aside>– /<a href="datum.html">datum</a>/<a href="datum/mood_event.html">mood_event</a>/surgery</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/surgery/surgery_step.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_step.dm 23"></a></h3><p>Which mood event to give the patient when surgery is starting while they're conscious. This should be permanent/not have a timer until the surgery either succeeds or fails, as those states will immediately replace it. Mostly just flavor text.</p><h3 id="var/surgery_success_mood_event"><aside class="declaration">var </aside>surgery_success_mood_event <aside>– /<a href="datum.html">datum</a>/<a href="datum/mood_event.html">mood_event</a>/surgery</aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/surgery/surgery_step.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_step.dm 25"></a></h3><p>Which mood event to give the conscious patient when surgery succeeds. Lasts far shorter than if it failed.</p><h2 id="proc">Proc Details</h2><h3 id="proc/display_pain"><aside class="declaration">proc </aside>display_pain<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/target, pain_message, mechanical_surgery)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/surgery/surgery_step.dm#L350"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_step.dm 350"></a></aside></h3><p>Sends a pain message to the target, including a chance of screaming.</p>
<p>Arguments:</p>
<ul>
<li>target - Who the message will be sent to</li>
<li>pain_message - The message to be displayed</li>
<li>mechanical_surgery - Boolean flag that represents if a surgery step is done on a mechanical limb (therefore does not force scream)</li>
</ul><h3 id="proc/update_surgery_mood"><aside class="declaration">proc </aside>update_surgery_mood<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/target, surgery_state)  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/surgery/surgery_step.dm#L193"><img src="git.png" width="16" height="16" title="code/modules/surgery/surgery_step.dm 193"></a></aside></h3><p>Handles updating the mob's mood depending on the surgery states.</p>
<ul>
<li>surgery_state = SURGERY_STATE_STARTED, SURGERY_STATE_FAILURE, SURGERY_STATE_SUCCESS</li>
<li>To prevent typos, the event category is defined as SURGERY_MOOD_CATEGORY (&quot;surgery&quot;)</li>
</ul></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>