<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/element/plant_backfire - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/element/plant_backfire.html#var">Var Details</a> - <a href="datum/element/plant_backfire.html#proc">Proc Details</a></header><main><h1>plant_backfire <aside>/<a href="datum.html">datum</a>/<a href="datum/element.html">element</a>/<a href="datum/element/plant_backfire.html">plant_backfire</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L5"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 5"></a></h1><p>-- Plant backfire element --
Certain high-danger plants, like death-nettles, will backfire and harm the holder if they're not properly protected.
If a user is protected with something like leather gloves, they can handle them normally.
If they're not protected properly, we invoke a callback on the user, harming or inconveniencing them.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/element/plant_backfire.html#var/cancel_action">cancel_action</a></th><td>Whether we stop the current action if backfire is triggered (EX: returning CANCEL_ATTACK_CHAIN)</td></tr><tr><th><a href="datum/element/plant_backfire.html#var/extra_genes">extra_genes</a></th><td>Any plant genes we want to check that are required for our plant to be dangerous. Plants without a gene in this list will be considered safe. List of typepaths.</td></tr><tr><th><a href="datum/element/plant_backfire.html#var/extra_traits">extra_traits</a></th><td>Any extra traits we want to check in addition to TRAIT_PLANT_SAFE. Mobs with a trait in this list will be considered safe. List of traits.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/element/plant_backfire.html#proc/attack_safety_check">attack_safety_check</a></th><td>Checks before we attack if we're okay to continue.</td></tr><tr><th><a href="datum/element/plant_backfire.html#proc/backfire">backfire</a></th><td>The actual backfire occurs here.
Checks if the user is able to safely handle the plant.
If not, sends the backfire signal (meaning backfire will occur and be handled by one or multiple genes).</td></tr><tr><th><a href="datum/element/plant_backfire.html#proc/pickup_safety_check">pickup_safety_check</a></th><td>Checks before we pick up the plant if we're okay to continue.</td></tr><tr><th><a href="datum/element/plant_backfire.html#proc/plant_safety_check">plant_safety_check</a></th><td>Actually checks if our user is safely handling our plant.</td></tr><tr><th><a href="datum/element/plant_backfire.html#proc/throw_safety_check">throw_safety_check</a></th><td>Checks before we throw the plant if we're okay to continue.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/cancel_action"><aside class="declaration">var </aside>cancel_action <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L9"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 9"></a></h3><p>Whether we stop the current action if backfire is triggered (EX: returning CANCEL_ATTACK_CHAIN)</p><h3 id="var/extra_genes"><aside class="declaration">var </aside>extra_genes <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L13"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 13"></a></h3><p>Any plant genes we want to check that are required for our plant to be dangerous. Plants without a gene in this list will be considered safe. List of typepaths.</p><h3 id="var/extra_traits"><aside class="declaration">var </aside>extra_traits <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L11"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 11"></a></h3><p>Any extra traits we want to check in addition to TRAIT_PLANT_SAFE. Mobs with a trait in this list will be considered safe. List of traits.</p><h2 id="proc">Proc Details</h2><h3 id="proc/attack_safety_check"><aside class="declaration">proc </aside>attack_safety_check<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/source, /<a href="atom.html">atom</a>/target, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L38"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 38"></a></aside></h3><p>Checks before we attack if we're okay to continue.</p>
<p>source - our plant
user - the mob wielding our [source]</p><h3 id="proc/backfire"><aside class="declaration">proc </aside>backfire<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/plant, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L85"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 85"></a></aside></h3><p>The actual backfire occurs here.
Checks if the user is able to safely handle the plant.
If not, sends the backfire signal (meaning backfire will occur and be handled by one or multiple genes).</p>
<p>Returns FALSE if the user was safe and no backfire occured.
Returns TRUE if the user was not safe and a backfire actually happened.</p><h3 id="proc/pickup_safety_check"><aside class="declaration">proc </aside>pickup_safety_check<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/source, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L55"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 55"></a></aside></h3><p>Checks before we pick up the plant if we're okay to continue.</p>
<p>source - our plant
user - the mob picking our [source]</p><h3 id="proc/plant_safety_check"><aside class="declaration">proc </aside>plant_safety_check<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/plant, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/user)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L104"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 104"></a></aside></h3><p>Actually checks if our user is safely handling our plant.</p>
<p>Checks for TRAIT_PLANT_SAFE, and returns TRUE if we have it.
Then, any extra traits we need to check (Like TRAIT_PIERCEIMMUNE for nettles) and returns TRUE if we have one of them.
Then, any extra genes we need to check (Like liquid contents for bluespace tomatos) and returns TRUE if we don't have the gene.</p>
<p>source - our plant
user - the carbon handling our [source]</p>
<p>returns FALSE if none of the checks are successful.</p><h3 id="proc/throw_safety_check"><aside class="declaration">proc </aside>throw_safety_check<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/source, /list/arguments)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/elements/plant_backfire.dm#L66"><img src="git.png" width="16" height="16" title="code/datums/elements/plant_backfire.dm 66"></a></aside></h3><p>Checks before we throw the plant if we're okay to continue.</p>
<p>source - our plant
thrower - the mob throwing our [source]</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>