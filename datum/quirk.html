<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/quirk - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/quirk.html#var">Var Details</a> - <a href="datum/quirk.html#proc">Proc Details</a></header><main><h1>quirk <aside>/<a href="datum.html">datum</a>/<a href="datum/quirk.html">quirk</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L3"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 3"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/quirk.html#var/desc">desc</a></th><td>The description of the quirk</td></tr><tr><th><a href="datum/quirk.html#var/gain_text">gain_text</a></th><td>Text displayed when this quirk is assigned to a mob (and not transferred)</td></tr><tr><th><a href="datum/quirk.html#var/hardcore_value">hardcore_value</a></th><td>Amount of points this trait is worth towards the hardcore character mode.
Minus points implies a positive quirk, positive means its hard.
This is used to pick the quirks assigned to a hardcore character.
/ 0 means its not available to hardcore draws.</td></tr><tr><th><a href="datum/quirk.html#var/icon">icon</a></th><td>The icon to show in the preferences menu.
This references a tgui icon, so it can be FontAwesome or a tgfont (with a tg- prefix).</td></tr><tr><th><a href="datum/quirk.html#var/lose_text">lose_text</a></th><td>Text displayed when this quirk is removed from a mob (and not transferred)</td></tr><tr><th><a href="datum/quirk.html#var/mail_goodies">mail_goodies</a></th><td>A lazylist of items people can receive from mail who have this quirk enabled
The base weight for the each quirk's mail goodies list to be selected is 5
then the item selected is determined by pick(selected_quirk.mail_goodies)</td></tr><tr><th><a href="datum/quirk.html#var/maximum_process_stat">maximum_process_stat</a></th><td>max stat below which this quirk can process (if it has QUIRK_PROCESSES) and above which it stops.
If null, then it will process regardless of stat.</td></tr><tr><th><a href="datum/quirk.html#var/medical_record_text">medical_record_text</a></th><td>This text will appear on medical records for the trait.</td></tr><tr><th><a href="datum/quirk.html#var/medical_symptom_text">medical_symptom_text</a></th><td>Appears in medical guides for this quirk, but only if the quirk has QUIRK_TRAUMALIKE flag.</td></tr><tr><th><a href="datum/quirk.html#var/mob_trait">mob_trait</a></th><td>if applicable, apply and remove this mob trait</td></tr><tr><th><a href="datum/quirk.html#var/name">name</a></th><td>The name of the quirk</td></tr><tr><th><a href="datum/quirk.html#var/no_process_traits">no_process_traits</a></th><td>A list of traits that should stop this quirk from processing.
Signals for adding and removing this trait will automatically be added to <code>process_update_signals</code>.</td></tr><tr><th><a href="datum/quirk.html#var/process_update_signals">process_update_signals</a></th><td>A list of additional signals to register with update_process()</td></tr><tr><th><a href="datum/quirk.html#var/quirk_flags">quirk_flags</a></th><td>Flags related to this quirk.</td></tr><tr><th><a href="datum/quirk.html#var/quirk_holder">quirk_holder</a></th><td>Reference to the mob currently tied to this quirk datum. Quirks are not singletons.</td></tr><tr><th><a href="datum/quirk.html#var/value">value</a></th><td>What the quirk is worth in preferences, zero = neutral / free</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/quirk.html#proc/add">add</a></th><td>Any effect that should be applied every single time the quirk is added to any mob, even when transferred.</td></tr><tr><th><a href="datum/quirk.html#proc/add_to_holder">add_to_holder</a></th><td>Adds the quirk to a new quirk_holder.</td></tr><tr><th><a href="datum/quirk.html#proc/add_unique">add_unique</a></th><td>Any effects from the proc that should not be done multiple times if the quirk is transferred between mobs.
Put stuff like spawning items in here.</td></tr><tr><th><a href="datum/quirk.html#proc/is_species_appropriate">is_species_appropriate</a></th><td>If a quirk is able to be selected for the mob's species</td></tr><tr><th><a href="datum/quirk.html#proc/on_holder_qdeleting">on_holder_qdeleting</a></th><td>Called when quirk_holder is qdeleting. Simply qdels this datum and lets Destroy() handle the rest.</td></tr><tr><th><a href="datum/quirk.html#proc/on_quirk_holder_first_login">on_quirk_holder_first_login</a></th><td>On client connection set quirk preferences.</td></tr><tr><th><a href="datum/quirk.html#proc/on_stat_changed">on_stat_changed</a></th><td>Updates processing status whenever the mob's stat changes.</td></tr><tr><th><a href="datum/quirk.html#proc/post_add">post_add</a></th><td>Any special effects or chat messages which should be applied.
This proc is guaranteed to run if the mob has a client when the quirk is added.
Otherwise, it runs once on the next COMSIG_MOB_LOGIN.</td></tr><tr><th><a href="datum/quirk.html#proc/remove">remove</a></th><td>Removal of any reversible effects added by the quirk.</td></tr><tr><th><a href="datum/quirk.html#proc/remove_from_current_holder">remove_from_current_holder</a></th><td>Removes the quirk from the current quirk_holder.</td></tr><tr><th><a href="datum/quirk.html#proc/should_process">should_process</a></th><td>Returns if the quirk holder should process currently or not.</td></tr><tr><th><a href="datum/quirk.html#proc/update_process">update_process</a></th><td>Checks to see if the quirk should be processing, and starts/stops it.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/desc"><aside class="declaration">var </aside>desc <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L8"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 8"></a></h3><p>The description of the quirk</p><h3 id="var/gain_text"><aside class="declaration">var </aside>gain_text <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L16"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 16"></a></h3><p>Text displayed when this quirk is assigned to a mob (and not transferred)</p><h3 id="var/hardcore_value"><aside class="declaration">var </aside>hardcore_value <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L29"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 29"></a></h3><p>Amount of points this trait is worth towards the hardcore character mode.
Minus points implies a positive quirk, positive means its hard.
This is used to pick the quirks assigned to a hardcore character.
/ 0 means its not available to hardcore draws.</p><h3 id="var/icon"><aside class="declaration">var </aside>icon <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L32"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 32"></a></h3><p>The icon to show in the preferences menu.
This references a tgui icon, so it can be FontAwesome or a tgfont (with a tg- prefix).</p><h3 id="var/lose_text"><aside class="declaration">var </aside>lose_text <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L18"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 18"></a></h3><p>Text displayed when this quirk is removed from a mob (and not transferred)</p><h3 id="var/mail_goodies"><aside class="declaration">var </aside>mail_goodies <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L36"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 36"></a></h3><p>A lazylist of items people can receive from mail who have this quirk enabled
The base weight for the each quirk's mail goodies list to be selected is 5
then the item selected is determined by pick(selected_quirk.mail_goodies)</p><h3 id="var/maximum_process_stat"><aside class="declaration">var </aside>maximum_process_stat <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L39"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 39"></a></h3><p>max stat below which this quirk can process (if it has QUIRK_PROCESSES) and above which it stops.
If null, then it will process regardless of stat.</p><h3 id="var/medical_record_text"><aside class="declaration">var </aside>medical_record_text <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L20"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 20"></a></h3><p>This text will appear on medical records for the trait.</p><h3 id="var/medical_symptom_text"><aside class="declaration">var </aside>medical_symptom_text <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L22"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 22"></a></h3><p>Appears in medical guides for this quirk, but only if the quirk has QUIRK_TRAUMALIKE flag.</p><h3 id="var/mob_trait"><aside class="declaration">var </aside>mob_trait <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L24"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 24"></a></h3><p>if applicable, apply and remove this mob trait</p><h3 id="var/name"><aside class="declaration">var </aside>name <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L6"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 6"></a></h3><p>The name of the quirk</p><h3 id="var/no_process_traits"><aside class="declaration">var </aside>no_process_traits <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L44"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 44"></a></h3><p>A list of traits that should stop this quirk from processing.
Signals for adding and removing this trait will automatically be added to <code>process_update_signals</code>.</p><h3 id="var/process_update_signals"><aside class="declaration">var </aside>process_update_signals <aside>– /list</aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L41"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 41"></a></h3><p>A list of additional signals to register with update_process()</p><h3 id="var/quirk_flags"><aside class="declaration">var </aside>quirk_flags <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L12"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 12"></a></h3><p>Flags related to this quirk.</p><h3 id="var/quirk_holder"><aside class="declaration">var </aside>quirk_holder <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a></aside> <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L14"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 14"></a></h3><p>Reference to the mob currently tied to this quirk datum. Quirks are not singletons.</p><h3 id="var/value"><aside class="declaration">var </aside>value <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L10"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 10"></a></h3><p>What the quirk is worth in preferences, zero = neutral / free</p><h2 id="proc">Proc Details</h2><h3 id="proc/add"><aside class="declaration">proc </aside>add<aside>(/<a href="client.html">client</a>/client_source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L154"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 154"></a></aside></h3><p>Any effect that should be applied every single time the quirk is added to any mob, even when transferred.</p><h3 id="proc/add_to_holder"><aside class="declaration">proc </aside>add_to_holder<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/new_holder, quirk_transfer, /<a href="client.html">client</a>/client_source, unique, announce)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L70"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 70"></a></aside></h3><p>Adds the quirk to a new quirk_holder.</p>
<p>Performs logic to make sure new_holder is a valid holder of this quirk.
Returns FALSEy if there was some kind of error. Returns TRUE otherwise.
Arguments:</p>
<ul>
<li>new_holder - The mob to add this quirk to.</li>
<li>quirk_transfer - If this is being added to the holder as part of a quirk transfer. Quirks can use this to decide not to spawn new items or apply any other one-time effects.</li>
</ul><h3 id="proc/add_unique"><aside class="declaration">proc </aside>add_unique<aside>(/<a href="client.html">client</a>/client_source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L159"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 159"></a></aside></h3><p>Any effects from the proc that should not be done multiple times if the quirk is transferred between mobs.
Put stuff like spawning items in here.</p><h3 id="proc/is_species_appropriate"><aside class="declaration">proc </aside>is_species_appropriate<aside>(/<a href="datum.html">datum</a>/<a href="datum/species.html">species</a>/mob_species)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L202"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 202"></a></aside></h3><p>If a quirk is able to be selected for the mob's species</p><h3 id="proc/on_holder_qdeleting"><aside class="declaration">proc </aside>on_holder_qdeleting<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/source, force)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L57"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 57"></a></aside></h3><p>Called when quirk_holder is qdeleting. Simply qdels this datum and lets Destroy() handle the rest.</p><h3 id="proc/on_quirk_holder_first_login"><aside class="declaration">proc </aside>on_quirk_holder_first_login<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/source)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L147"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 147"></a></aside></h3><p>On client connection set quirk preferences.</p>
<p>Run post_add to set the client preferences for the quirk.
Clear the attached signal for login.
Used when the quirk has been gained and no client is attached to the mob.</p><h3 id="proc/on_stat_changed"><aside class="declaration">proc </aside>on_stat_changed<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/source, new_stat)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L197"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 197"></a></aside></h3><p>Updates processing status whenever the mob's stat changes.</p><h3 id="proc/post_add"><aside class="declaration">proc </aside>post_add<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L169"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 169"></a></aside></h3><p>Any special effects or chat messages which should be applied.
This proc is guaranteed to run if the mob has a client when the quirk is added.
Otherwise, it runs once on the next COMSIG_MOB_LOGIN.</p><h3 id="proc/remove"><aside class="declaration">proc </aside>remove<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L163"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 163"></a></aside></h3><p>Removal of any reversible effects added by the quirk.</p><h3 id="proc/remove_from_current_holder"><aside class="declaration">proc </aside>remove_from_current_holder<aside>(quirk_transfer)  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L117"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 117"></a></aside></h3><p>Removes the quirk from the current quirk_holder.</p><h3 id="proc/should_process"><aside class="declaration">proc </aside>should_process<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L173"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 173"></a></aside></h3><p>Returns if the quirk holder should process currently or not.</p><h3 id="proc/update_process"><aside class="declaration">proc </aside>update_process<aside>()  <a href="https://github.com/tgstation/tgstation/blob/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f/code/datums/quirks/_quirk.dm#L188"><img src="git.png" width="16" height="16" title="code/datums/quirks/_quirk.dm 188"></a></aside></h3><p>Checks to see if the quirk should be processing, and starts/stops it.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/cd8d3cfc6452876b3929e640c2fd6fdbfee7f93f">cd8d3cf</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>