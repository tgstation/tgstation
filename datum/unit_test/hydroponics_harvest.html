<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/unit_test/hydroponics_harvest - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/unit_test/hydroponics_harvest.html#proc">Proc Details</a></header><main><h1>hydroponics_harvest <aside>/<a href="datum.html">datum</a>/<a href="datum/unit_test.html">unit_test</a>/<a href="datum/unit_test/hydroponics_harvest.html">hydroponics_harvest</a></aside> <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/unit_tests/hydroponics_harvest.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/unit_tests/hydroponics_harvest.dm 22"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/unit_test/hydroponics_harvest.html#proc/Run">Run</a></th><td>A test to make sure harvesting plants in hydroponics results in the correct number of plants with the correct chemicals inside of it.</td></tr></table><h2 id="proc">Proc Details</h2><h3 id="proc/Run">Run<aside>()  <a href="https://github.com/tgstation/tgstation/blob/c41b333c9bc46606d2c5d5b517f7836d5953fbfd/code/modules/unit_tests/hydroponics_harvest.dm#L22"><img src="git.png" width="16" height="16" title="code/modules/unit_tests/hydroponics_harvest.dm 22"></a></aside></h3><p>A test to make sure harvesting plants in hydroponics results in the correct number of plants with the correct chemicals inside of it.</p>
<p>We plant a seed into a tray and harvest it with a human.
This seed is set to have the maximum potency and yield with no instability to prevent mutations.
Then we check how many products we got from the harvest. For most plants, this should be 10 products, as we have a yield of 10.
Alternatively, if the plant has a trait that halves the products on harvest, it should result in 5 products.</p>
<p>After we harvest our seed, we check for the plant's nutriments and vitamins.
Most plants have nutriments, so most plants should result in a number of nutriments.
Some plants have vitamins and some don't, so we then check the number of vitamins.
Additionally, the plant may have traits that double the amount of chemicals it can hold. We check the max volume in that case and adjust accordingly.
Plants may have additional chemicals genes that we don't check.
Plants may have traits that effect the final product's contents that we don't check.
Chemicals may react inside of the plant on harvest, which we don't check.</p>
<p>After we check the harvest and the chemicals in the harvest, we go ahead and clean up the harvested products and remove the seed if it has perennial growth.</p>
<p>This test checks both /obj/item/food/grown items and /obj/item/grown items since, despite both being used in hydroponics,
they aren't the same type so everything that works with one isn't guaranteed to work with the other.</p></main><footer>tgstation.dme <a href="https://github.com/tgstation/tgstation/tree/c41b333c9bc46606d2c5d5b517f7836d5953fbfd">c41b333</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>